{"ast":null,"code":"import { print as printWindow, createElement, detach, classList, selectAll, extend } from '@syncfusion/ej2-base';\nimport { getPrintGridModel } from '../base/util';\nimport { Grid } from '../base/grid';\nimport * as events from '../base/constant';\nimport { Deferred } from '@syncfusion/ej2-data';\nimport * as literals from '../base/string-literals';\n/**\r\n * @returns {string[]} returns the cloned property\r\n * @hidden\r\n */\n\nexport function getCloneProperties() {\n  return ['aggregates', 'allowGrouping', 'allowFiltering', 'allowMultiSorting', 'allowReordering', 'allowSorting', 'allowTextWrap', 'childGrid', 'columns', 'currentViewData', 'dataSource', 'detailTemplate', 'enableAltRow', 'enableColumnVirtualization', 'filterSettings', 'gridLines', 'groupSettings', 'height', 'locale', 'pageSettings', 'printMode', 'query', 'queryString', 'enableRtl', 'rowHeight', 'rowTemplate', 'sortSettings', 'textWrapSettings', 'allowPaging', 'hierarchyPrintMode', 'searchSettings', 'queryCellInfo', 'beforeDataBound'];\n}\n/**\r\n *\r\n * The `Print` module is used to handle print action.\r\n */\n\nvar Print =\n/** @class */\nfunction () {\n  /**\r\n   * Constructor for the Grid print module\r\n   *\r\n   * @param {IGrid} parent - specifies the IGrid\r\n   * @param {Scroll} scrollModule - specifies the scroll module\r\n   * @hidden\r\n   */\n  function Print(parent, scrollModule) {\n    this.isAsyncPrint = false;\n    this.defered = new Deferred();\n    this.parent = parent;\n\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.on(events.contentReady, this.isContentReady(), this);\n    this.actionBeginFunction = this.actionBegin.bind(this);\n    this.parent.addEventListener(events.actionBegin, this.actionBeginFunction);\n    this.parent.on(events.onEmpty, this.onEmpty.bind(this));\n    this.parent.on(events.hierarchyPrint, this.hierarchyPrint, this);\n    this.scrollModule = scrollModule;\n  }\n\n  Print.prototype.isContentReady = function () {\n    var _this = this;\n\n    if (this.isPrintGrid() && (this.parent.hierarchyPrintMode === 'None' || !this.parent.childGrid)) {\n      return this.contentReady;\n    }\n\n    return function () {\n      _this.defered.promise.then(function () {\n        _this.contentReady();\n      });\n\n      if (_this.isPrintGrid()) {\n        _this.hierarchyPrint();\n      }\n    };\n  };\n\n  Print.prototype.hierarchyPrint = function () {\n    this.removeColGroup(this.parent);\n    var printGridObj = window.printGridObj;\n\n    if (printGridObj && !printGridObj.element.querySelector('[aria-busy=true')) {\n      printGridObj.printModule.defered.resolve();\n    }\n  };\n  /**\r\n   * By default, prints all the Grid pages and hides the pager.\r\n   * > You can customize print options using the\r\n   * [`printMode`](grid/#printmode-string/).\r\n   *\r\n   * @returns {void}\r\n   */\n\n\n  Print.prototype.print = function () {\n    this.renderPrintGrid();\n  };\n\n  Print.prototype.onEmpty = function () {\n    if (this.isPrintGrid()) {\n      this.contentReady();\n    }\n  };\n\n  Print.prototype.actionBegin = function () {\n    if (this.isPrintGrid()) {\n      this.isAsyncPrint = true;\n    }\n  };\n\n  Print.prototype.renderPrintGrid = function () {\n    var gObj = this.parent;\n    var element = createElement('div', {\n      id: this.parent.element.id + '_print',\n      className: gObj.element.className + ' e-print-grid'\n    });\n    element.classList.remove('e-gridhover');\n    document.body.appendChild(element);\n    var printGrid = new Grid(getPrintGridModel(gObj, gObj.hierarchyPrintMode));\n\n    for (var i = 0; i < printGrid.columns.length; i++) {\n      printGrid.columns[i] = extend({}, printGrid.columns[i]);\n\n      if (gObj.isFrozenGrid() && !gObj.getFrozenColumns()) {\n        printGrid.columns[i].freeze = undefined;\n      }\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    if (this.parent.isAngular) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      printGrid.viewContainerRef = this.parent.viewContainerRef;\n    } // eslint-disable-next-line @typescript-eslint/no-empty-function\n\n\n    printGrid.load = function () {};\n\n    printGrid.query = gObj.getQuery().clone();\n    window.printGridObj = printGrid;\n    printGrid.isPrinting = true;\n    var modules = printGrid.getInjectedModules();\n    var injectedModues = gObj.getInjectedModules();\n\n    if (!modules || modules.length !== injectedModues.length) {\n      printGrid.setInjectedModules(injectedModues);\n    }\n\n    gObj.notify(events.printGridInit, {\n      element: element,\n      printgrid: printGrid\n    });\n    this.parent.log('exporting_begin', this.getModuleName());\n    printGrid.registeredTemplate = this.parent.registeredTemplate;\n    printGrid.isVue = this.parent.isVue;\n    printGrid.appendTo(element);\n    printGrid.trigger = gObj.trigger;\n  };\n\n  Print.prototype.contentReady = function () {\n    if (this.isPrintGrid()) {\n      var gObj = this.parent;\n\n      if (this.isAsyncPrint) {\n        this.printGrid();\n        return;\n      }\n\n      var args = {\n        requestType: 'print',\n        element: gObj.element,\n        selectedRows: gObj.getContentTable().querySelectorAll('tr[aria-selected=\"true\"]'),\n        cancel: false,\n        hierarchyPrintMode: gObj.hierarchyPrintMode\n      };\n\n      if (!this.isAsyncPrint) {\n        gObj.trigger(events.beforePrint, args);\n      }\n\n      if (args.cancel) {\n        detach(gObj.element);\n        return;\n      }\n\n      if (!this.isAsyncPrint) {\n        this.printGrid();\n      }\n    }\n  };\n\n  Print.prototype.printGrid = function () {\n    var gObj = this.parent; // Height adjustment on print grid\n\n    if (gObj.height !== 'auto') {\n      // if scroller enabled\n      var cssProps = this.scrollModule.getCssProperties();\n      var contentDiv = gObj.element.querySelector('.' + literals.content);\n      var headerDiv = gObj.element.querySelector('.' + literals.gridHeader);\n      contentDiv.style.height = 'auto';\n      contentDiv.style.overflowY = 'auto';\n      headerDiv.style[cssProps.padding] = '';\n      headerDiv.firstElementChild.style[cssProps.border] = '';\n    } // Grid alignment adjustment on grouping\n\n\n    if (gObj.allowGrouping) {\n      if (!gObj.groupSettings.columns.length) {\n        gObj.element.querySelector('.e-groupdroparea').style.display = 'none';\n      } else {\n        this.removeColGroup(gObj);\n      }\n    } // hide horizontal scroll\n\n\n    for (var _i = 0, _a = [].slice.call(gObj.element.getElementsByClassName(literals.content)); _i < _a.length; _i++) {\n      var element = _a[_i];\n      element.style.overflowX = 'hidden';\n    } // Hide the waiting popup\n\n\n    var waitingPop = [].slice.call(gObj.element.getElementsByClassName('e-spin-show'));\n\n    for (var _b = 0, _c = [].slice.call(waitingPop); _b < _c.length; _b++) {\n      var element = _c[_b];\n      classList(element, ['e-spin-hide'], ['e-spin-show']);\n    }\n\n    this.printGridElement(gObj);\n    gObj.isPrinting = false;\n    delete window.printGridObj;\n    var args = {\n      element: gObj.element\n    };\n    gObj.trigger(events.printComplete, args);\n    gObj.destroy();\n    this.parent.log('exporting_complete', this.getModuleName());\n  };\n\n  Print.prototype.printGridElement = function (gObj) {\n    classList(gObj.element, ['e-print-grid-layout'], ['e-print-grid']);\n\n    if (gObj.isPrinting) {\n      detach(gObj.element);\n    }\n\n    this.printWind = window.open('', 'print', 'height=' + window.outerHeight + ',width=' + window.outerWidth + ',tabbar=no');\n    this.printWind.moveTo(0, 0);\n    this.printWind.resizeTo(screen.availWidth, screen.availHeight);\n    this.printWind = printWindow(gObj.element, this.printWind);\n  };\n\n  Print.prototype.removeColGroup = function (gObj) {\n    var depth = gObj.groupSettings.columns.length;\n    var element = gObj.element;\n    var id = '#' + gObj.element.id;\n\n    if (!depth) {\n      return;\n    }\n\n    var groupCaption = selectAll(id + \"captioncell.e-groupcaption\", element);\n    var colSpan = groupCaption[depth - 1].getAttribute('colspan');\n\n    for (var i = 0; i < groupCaption.length; i++) {\n      groupCaption[i].setAttribute('colspan', colSpan);\n    }\n\n    var colGroups = selectAll(\"colgroup\" + id + \"colgroup\", element);\n    var contentColGroups = selectAll('.e-content colgroup', element);\n    this.hideColGroup(colGroups, depth);\n    this.hideColGroup(contentColGroups, depth);\n  };\n\n  Print.prototype.hideColGroup = function (colGroups, depth) {\n    for (var i = 0; i < colGroups.length; i++) {\n      for (var j = 0; j < depth; j++) {\n        colGroups[i].children[j].style.display = 'none';\n      }\n    }\n  };\n  /**\r\n   * To destroy the print\r\n   *\r\n   * @returns {boolean} returns the isPrintGrid or not\r\n   * @hidden\r\n   */\n\n\n  Print.prototype.isPrintGrid = function () {\n    return this.parent.element.id.indexOf('_print') > 0 && this.parent.isPrinting;\n  };\n  /**\r\n   * To destroy the print\r\n   *\r\n   * @returns {void}\r\n   * @hidden\r\n   */\n\n\n  Print.prototype.destroy = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.off(events.contentReady, this.contentReady.bind(this));\n    this.parent.removeEventListener(events.actionBegin, this.actionBeginFunction);\n    this.parent.off(events.onEmpty, this.onEmpty.bind(this));\n    this.parent.off(events.hierarchyPrint, this.hierarchyPrint);\n  };\n  /**\r\n   * For internal use only - Get the module name.\r\n   *\r\n   * @returns {string} returns the module name\r\n   * @private\r\n   */\n\n\n  Print.prototype.getModuleName = function () {\n    return 'print';\n  };\n\n  Print.printGridProp = getCloneProperties().concat([events.beforePrint, events.printComplete, events.load]);\n  return Print;\n}();\n\nexport { Print };","map":{"version":3,"sources":["C:/Users/amase/Desktop/open_dsa/openDSA_dashboard/project/node_modules/@syncfusion/ej2-react-grids/node_modules/@syncfusion/ej2-grids/src/grid/actions/print.js"],"names":["print","printWindow","createElement","detach","classList","selectAll","extend","getPrintGridModel","Grid","events","Deferred","literals","getCloneProperties","Print","parent","scrollModule","isAsyncPrint","defered","isDestroyed","on","contentReady","isContentReady","actionBeginFunction","actionBegin","bind","addEventListener","onEmpty","hierarchyPrint","prototype","_this","isPrintGrid","hierarchyPrintMode","childGrid","promise","then","removeColGroup","printGridObj","window","element","querySelector","printModule","resolve","renderPrintGrid","gObj","id","className","remove","document","body","appendChild","printGrid","i","columns","length","isFrozenGrid","getFrozenColumns","freeze","undefined","isAngular","viewContainerRef","load","query","getQuery","clone","isPrinting","modules","getInjectedModules","injectedModues","setInjectedModules","notify","printGridInit","printgrid","log","getModuleName","registeredTemplate","isVue","appendTo","trigger","args","requestType","selectedRows","getContentTable","querySelectorAll","cancel","beforePrint","height","cssProps","getCssProperties","contentDiv","content","headerDiv","gridHeader","style","overflowY","padding","firstElementChild","border","allowGrouping","groupSettings","display","_i","_a","slice","call","getElementsByClassName","overflowX","waitingPop","_b","_c","printGridElement","printComplete","destroy","printWind","open","outerHeight","outerWidth","moveTo","resizeTo","screen","availWidth","availHeight","depth","groupCaption","colSpan","getAttribute","setAttribute","colGroups","contentColGroups","hideColGroup","j","children","indexOf","off","removeEventListener","printGridProp","concat"],"mappings":"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","sourcesContent":["import { print as printWindow, createElement, detach, classList, selectAll, extend } from '@syncfusion/ej2-base';\r\nimport { getPrintGridModel } from '../base/util';\r\nimport { Grid } from '../base/grid';\r\nimport * as events from '../base/constant';\r\nimport { Deferred } from '@syncfusion/ej2-data';\r\nimport * as literals from '../base/string-literals';\r\n/**\r\n * @returns {string[]} returns the cloned property\r\n * @hidden\r\n */\r\nexport function getCloneProperties() {\r\n    return ['aggregates', 'allowGrouping', 'allowFiltering', 'allowMultiSorting', 'allowReordering', 'allowSorting',\r\n        'allowTextWrap', 'childGrid', 'columns', 'currentViewData', 'dataSource', 'detailTemplate', 'enableAltRow',\r\n        'enableColumnVirtualization', 'filterSettings', 'gridLines',\r\n        'groupSettings', 'height', 'locale', 'pageSettings', 'printMode', 'query', 'queryString', 'enableRtl',\r\n        'rowHeight', 'rowTemplate', 'sortSettings', 'textWrapSettings', 'allowPaging', 'hierarchyPrintMode', 'searchSettings',\r\n        'queryCellInfo', 'beforeDataBound'];\r\n}\r\n/**\r\n *\r\n * The `Print` module is used to handle print action.\r\n */\r\nvar Print = /** @class */ (function () {\r\n    /**\r\n     * Constructor for the Grid print module\r\n     *\r\n     * @param {IGrid} parent - specifies the IGrid\r\n     * @param {Scroll} scrollModule - specifies the scroll module\r\n     * @hidden\r\n     */\r\n    function Print(parent, scrollModule) {\r\n        this.isAsyncPrint = false;\r\n        this.defered = new Deferred();\r\n        this.parent = parent;\r\n        if (this.parent.isDestroyed) {\r\n            return;\r\n        }\r\n        this.parent.on(events.contentReady, this.isContentReady(), this);\r\n        this.actionBeginFunction = this.actionBegin.bind(this);\r\n        this.parent.addEventListener(events.actionBegin, this.actionBeginFunction);\r\n        this.parent.on(events.onEmpty, this.onEmpty.bind(this));\r\n        this.parent.on(events.hierarchyPrint, this.hierarchyPrint, this);\r\n        this.scrollModule = scrollModule;\r\n    }\r\n    Print.prototype.isContentReady = function () {\r\n        var _this = this;\r\n        if (this.isPrintGrid() && (this.parent.hierarchyPrintMode === 'None' || !this.parent.childGrid)) {\r\n            return this.contentReady;\r\n        }\r\n        return function () {\r\n            _this.defered.promise.then(function () {\r\n                _this.contentReady();\r\n            });\r\n            if (_this.isPrintGrid()) {\r\n                _this.hierarchyPrint();\r\n            }\r\n        };\r\n    };\r\n    Print.prototype.hierarchyPrint = function () {\r\n        this.removeColGroup(this.parent);\r\n        var printGridObj = window.printGridObj;\r\n        if (printGridObj && !printGridObj.element.querySelector('[aria-busy=true')) {\r\n            printGridObj.printModule.defered.resolve();\r\n        }\r\n    };\r\n    /**\r\n     * By default, prints all the Grid pages and hides the pager.\r\n     * > You can customize print options using the\r\n     * [`printMode`](grid/#printmode-string/).\r\n     *\r\n     * @returns {void}\r\n     */\r\n    Print.prototype.print = function () {\r\n        this.renderPrintGrid();\r\n    };\r\n    Print.prototype.onEmpty = function () {\r\n        if (this.isPrintGrid()) {\r\n            this.contentReady();\r\n        }\r\n    };\r\n    Print.prototype.actionBegin = function () {\r\n        if (this.isPrintGrid()) {\r\n            this.isAsyncPrint = true;\r\n        }\r\n    };\r\n    Print.prototype.renderPrintGrid = function () {\r\n        var gObj = this.parent;\r\n        var element = createElement('div', {\r\n            id: this.parent.element.id + '_print', className: gObj.element.className + ' e-print-grid'\r\n        });\r\n        element.classList.remove('e-gridhover');\r\n        document.body.appendChild(element);\r\n        var printGrid = new Grid(getPrintGridModel(gObj, gObj.hierarchyPrintMode));\r\n        for (var i = 0; i < printGrid.columns.length; i++) {\r\n            printGrid.columns[i] = extend({}, printGrid.columns[i]);\r\n            if (gObj.isFrozenGrid() && !gObj.getFrozenColumns()) {\r\n                printGrid.columns[i].freeze = undefined;\r\n            }\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        if (this.parent.isAngular) {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            printGrid.viewContainerRef = this.parent.viewContainerRef;\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n        printGrid.load = function () { };\r\n        printGrid.query = gObj.getQuery().clone();\r\n        window.printGridObj = printGrid;\r\n        printGrid.isPrinting = true;\r\n        var modules = printGrid.getInjectedModules();\r\n        var injectedModues = gObj.getInjectedModules();\r\n        if (!modules || modules.length !== injectedModues.length) {\r\n            printGrid.setInjectedModules(injectedModues);\r\n        }\r\n        gObj.notify(events.printGridInit, { element: element, printgrid: printGrid });\r\n        this.parent.log('exporting_begin', this.getModuleName());\r\n        printGrid.registeredTemplate = this.parent.registeredTemplate;\r\n        printGrid.isVue = this.parent.isVue;\r\n        printGrid.appendTo(element);\r\n        printGrid.trigger = gObj.trigger;\r\n    };\r\n    Print.prototype.contentReady = function () {\r\n        if (this.isPrintGrid()) {\r\n            var gObj = this.parent;\r\n            if (this.isAsyncPrint) {\r\n                this.printGrid();\r\n                return;\r\n            }\r\n            var args = {\r\n                requestType: 'print',\r\n                element: gObj.element,\r\n                selectedRows: gObj.getContentTable().querySelectorAll('tr[aria-selected=\"true\"]'),\r\n                cancel: false,\r\n                hierarchyPrintMode: gObj.hierarchyPrintMode\r\n            };\r\n            if (!this.isAsyncPrint) {\r\n                gObj.trigger(events.beforePrint, args);\r\n            }\r\n            if (args.cancel) {\r\n                detach(gObj.element);\r\n                return;\r\n            }\r\n            if (!this.isAsyncPrint) {\r\n                this.printGrid();\r\n            }\r\n        }\r\n    };\r\n    Print.prototype.printGrid = function () {\r\n        var gObj = this.parent;\r\n        // Height adjustment on print grid\r\n        if (gObj.height !== 'auto') { // if scroller enabled\r\n            var cssProps = this.scrollModule.getCssProperties();\r\n            var contentDiv = gObj.element.querySelector('.' + literals.content);\r\n            var headerDiv = gObj.element.querySelector('.' + literals.gridHeader);\r\n            contentDiv.style.height = 'auto';\r\n            contentDiv.style.overflowY = 'auto';\r\n            headerDiv.style[cssProps.padding] = '';\r\n            headerDiv.firstElementChild.style[cssProps.border] = '';\r\n        }\r\n        // Grid alignment adjustment on grouping\r\n        if (gObj.allowGrouping) {\r\n            if (!gObj.groupSettings.columns.length) {\r\n                gObj.element.querySelector('.e-groupdroparea').style.display = 'none';\r\n            }\r\n            else {\r\n                this.removeColGroup(gObj);\r\n            }\r\n        }\r\n        // hide horizontal scroll\r\n        for (var _i = 0, _a = [].slice.call(gObj.element.getElementsByClassName(literals.content)); _i < _a.length; _i++) {\r\n            var element = _a[_i];\r\n            element.style.overflowX = 'hidden';\r\n        }\r\n        // Hide the waiting popup\r\n        var waitingPop = [].slice.call(gObj.element.getElementsByClassName('e-spin-show'));\r\n        for (var _b = 0, _c = [].slice.call(waitingPop); _b < _c.length; _b++) {\r\n            var element = _c[_b];\r\n            classList(element, ['e-spin-hide'], ['e-spin-show']);\r\n        }\r\n        this.printGridElement(gObj);\r\n        gObj.isPrinting = false;\r\n        delete window.printGridObj;\r\n        var args = {\r\n            element: gObj.element\r\n        };\r\n        gObj.trigger(events.printComplete, args);\r\n        gObj.destroy();\r\n        this.parent.log('exporting_complete', this.getModuleName());\r\n    };\r\n    Print.prototype.printGridElement = function (gObj) {\r\n        classList(gObj.element, ['e-print-grid-layout'], ['e-print-grid']);\r\n        if (gObj.isPrinting) {\r\n            detach(gObj.element);\r\n        }\r\n        this.printWind = window.open('', 'print', 'height=' + window.outerHeight + ',width=' + window.outerWidth + ',tabbar=no');\r\n        this.printWind.moveTo(0, 0);\r\n        this.printWind.resizeTo(screen.availWidth, screen.availHeight);\r\n        this.printWind = printWindow(gObj.element, this.printWind);\r\n    };\r\n    Print.prototype.removeColGroup = function (gObj) {\r\n        var depth = gObj.groupSettings.columns.length;\r\n        var element = gObj.element;\r\n        var id = '#' + gObj.element.id;\r\n        if (!depth) {\r\n            return;\r\n        }\r\n        var groupCaption = selectAll(id + \"captioncell.e-groupcaption\", element);\r\n        var colSpan = groupCaption[depth - 1].getAttribute('colspan');\r\n        for (var i = 0; i < groupCaption.length; i++) {\r\n            groupCaption[i].setAttribute('colspan', colSpan);\r\n        }\r\n        var colGroups = selectAll(\"colgroup\" + id + \"colgroup\", element);\r\n        var contentColGroups = selectAll('.e-content colgroup', element);\r\n        this.hideColGroup(colGroups, depth);\r\n        this.hideColGroup(contentColGroups, depth);\r\n    };\r\n    Print.prototype.hideColGroup = function (colGroups, depth) {\r\n        for (var i = 0; i < colGroups.length; i++) {\r\n            for (var j = 0; j < depth; j++) {\r\n                colGroups[i].children[j].style.display = 'none';\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * To destroy the print\r\n     *\r\n     * @returns {boolean} returns the isPrintGrid or not\r\n     * @hidden\r\n     */\r\n    Print.prototype.isPrintGrid = function () {\r\n        return this.parent.element.id.indexOf('_print') > 0 && this.parent.isPrinting;\r\n    };\r\n    /**\r\n     * To destroy the print\r\n     *\r\n     * @returns {void}\r\n     * @hidden\r\n     */\r\n    Print.prototype.destroy = function () {\r\n        if (this.parent.isDestroyed) {\r\n            return;\r\n        }\r\n        this.parent.off(events.contentReady, this.contentReady.bind(this));\r\n        this.parent.removeEventListener(events.actionBegin, this.actionBeginFunction);\r\n        this.parent.off(events.onEmpty, this.onEmpty.bind(this));\r\n        this.parent.off(events.hierarchyPrint, this.hierarchyPrint);\r\n    };\r\n    /**\r\n     * For internal use only - Get the module name.\r\n     *\r\n     * @returns {string} returns the module name\r\n     * @private\r\n     */\r\n    Print.prototype.getModuleName = function () {\r\n        return 'print';\r\n    };\r\n    Print.printGridProp = getCloneProperties().concat([events.beforePrint, events.printComplete, events.load]);\r\n    return Print;\r\n}());\r\nexport { Print };\r\n"]},"metadata":{},"sourceType":"module"}