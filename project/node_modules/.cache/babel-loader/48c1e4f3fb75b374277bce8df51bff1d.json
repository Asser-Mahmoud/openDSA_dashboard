{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { Base } from './base';\nimport { Browser } from './browser';\nimport { isVisible } from './dom';\nimport { Property, Complex, NotifyPropertyChanges, Event } from './notify-property-change';\nimport { EventHandler } from './event-handler';\nimport { ChildProperty } from './child-property';\nimport { select, closest, setStyleAttribute, addClass, createElement } from './dom';\nimport { extend, isUndefined, isNullOrUndefined, compareElementParent, isBlazor } from './util';\nvar defaultPosition = {\n  left: 0,\n  top: 0,\n  bottom: 0,\n  right: 0\n};\nvar positionProp = ['offsetLeft', 'offsetTop'];\nvar axisMapper = ['x', 'y'];\nvar axisValueMapper = ['left', 'top'];\nvar isDraggedObject = {\n  isDragged: false\n};\n/**\n * Specifies the position coordinates\n */\n\nvar Position =\n/** @class */\nfunction (_super) {\n  __extends(Position, _super);\n\n  function Position() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate([Property(0)], Position.prototype, \"left\", void 0);\n\n  __decorate([Property(0)], Position.prototype, \"top\", void 0);\n\n  return Position;\n}(ChildProperty);\n\nexport { Position };\n/**\n * Draggable Module provides support to enable draggable functionality in Dom Elements.\n * ```html\n * <div id='drag'>Draggable</div>\n * <script>\n * var ele = document.getElementById('drag');\n * var drag:Draggable = new Draggable(ele,{\n *     clone:false,\n *     drag: function(e) {\n *      //drag handler code.\n *      },\n *     handle:'.class'\n * });\n * </script>\n * ```\n */\n\nvar Draggable =\n/** @class */\nfunction (_super) {\n  __extends(Draggable, _super);\n\n  function Draggable(element, options) {\n    var _this = _super.call(this, options, element) || this;\n\n    _this.dragLimit = Draggable_1.getDefaultPosition();\n    _this.borderWidth = Draggable_1.getDefaultPosition();\n    _this.padding = Draggable_1.getDefaultPosition();\n    _this.diffX = 0;\n    _this.prevLeft = 0;\n    _this.prevTop = 0;\n    _this.dragProcessStarted = false;\n    _this.eleTop = 0;\n    /* eslint-disable @typescript-eslint/no-explicit-any */\n\n    _this.tapHoldTimer = 0;\n    _this.externalInitialize = false;\n    _this.diffY = 0;\n    _this.parentScrollX = 0;\n    _this.parentScrollY = 0;\n    _this.droppables = {};\n\n    _this.bind();\n\n    return _this;\n  }\n\n  Draggable_1 = Draggable;\n\n  Draggable.prototype.bind = function () {\n    this.toggleEvents();\n\n    if (Browser.isIE) {\n      addClass([this.element], 'e-block-touch');\n    }\n\n    this.droppables[this.scope] = {};\n  };\n\n  Draggable.getDefaultPosition = function () {\n    return extend({}, defaultPosition);\n  };\n\n  Draggable.prototype.toggleEvents = function (isUnWire) {\n    var ele;\n\n    if (!isUndefined(this.handle)) {\n      ele = select(this.handle, this.element);\n    }\n\n    var handler = this.enableTapHold && Browser.isDevice && Browser.isTouch ? this.mobileInitialize : this.initialize;\n\n    if (isUnWire) {\n      EventHandler.remove(ele || this.element, Browser.isSafari() ? 'touchstart' : Browser.touchStartEvent, handler);\n    } else {\n      EventHandler.add(ele || this.element, Browser.isSafari() ? 'touchstart' : Browser.touchStartEvent, handler, this);\n    }\n  };\n  /* istanbul ignore next */\n\n\n  Draggable.prototype.mobileInitialize = function (evt) {\n    var _this = this;\n\n    var target = evt.currentTarget;\n    this.tapHoldTimer = setTimeout(function () {\n      _this.externalInitialize = true;\n\n      _this.removeTapholdTimer();\n\n      _this.initialize(evt, target);\n    }, this.tapHoldThreshold);\n    EventHandler.add(document, Browser.isSafari() ? 'touchmove' : Browser.touchMoveEvent, this.removeTapholdTimer, this);\n    EventHandler.add(document, Browser.isSafari() ? 'touchend' : Browser.touchEndEvent, this.removeTapholdTimer, this);\n  };\n  /* istanbul ignore next */\n\n\n  Draggable.prototype.removeTapholdTimer = function () {\n    clearTimeout(this.tapHoldTimer);\n    EventHandler.remove(document, Browser.isSafari() ? 'touchmove' : Browser.touchMoveEvent, this.removeTapholdTimer);\n    EventHandler.remove(document, Browser.isSafari() ? 'touchend' : Browser.touchEndEvent, this.removeTapholdTimer);\n  };\n  /* istanbul ignore next */\n\n\n  Draggable.prototype.getScrollableParent = function (element, axis) {\n    var scroll = {\n      'vertical': 'scrollHeight',\n      'horizontal': 'scrollWidth'\n    };\n    var client = {\n      'vertical': 'clientHeight',\n      'horizontal': 'clientWidth'\n    };\n\n    if (isNullOrUndefined(element)) {\n      return null;\n    }\n\n    if (element[scroll[\"\" + axis]] > element[client[\"\" + axis]]) {\n      if (axis === 'vertical' ? element.scrollTop > 0 : element.scrollLeft > 0) {\n        if (axis === 'vertical') {\n          this.parentScrollY = this.parentScrollY + (this.parentScrollY === 0 ? element.scrollTop : element.scrollTop - this.parentScrollY);\n          this.tempScrollHeight = element.scrollHeight;\n        } else {\n          this.parentScrollX = this.parentScrollX + (this.parentScrollX === 0 ? element.scrollLeft : element.scrollLeft - this.parentScrollX);\n          this.tempScrollWidth = element.scrollWidth;\n        }\n\n        if (!isNullOrUndefined(element)) {\n          return this.getScrollableParent(element.parentNode, axis);\n        } else {\n          return element;\n        }\n      } else {\n        return this.getScrollableParent(element.parentNode, axis);\n      }\n    } else {\n      return this.getScrollableParent(element.parentNode, axis);\n    }\n  };\n\n  Draggable.prototype.getScrollableValues = function () {\n    this.parentScrollX = 0;\n    this.parentScrollY = 0;\n    var isModalDialog = this.element.classList.contains('e-dialog') && this.element.classList.contains('e-dlg-modal');\n    var verticalScrollParent = this.getScrollableParent(this.element.parentNode, 'vertical');\n    var horizontalScrollParent = this.getScrollableParent(this.element.parentNode, 'horizontal');\n  };\n\n  Draggable.prototype.initialize = function (evt, curTarget) {\n    this.currentStateTarget = evt.target;\n\n    if (this.isDragStarted()) {\n      return;\n    } else {\n      this.isDragStarted(true);\n      this.externalInitialize = false;\n    }\n\n    this.target = evt.currentTarget || curTarget;\n    this.dragProcessStarted = false;\n\n    if (this.abort) {\n      /* tslint:disable no-any */\n      var abortSelectors = this.abort;\n\n      if (typeof abortSelectors === 'string') {\n        abortSelectors = [abortSelectors];\n      }\n\n      for (var i = 0; i < abortSelectors.length; i++) {\n        if (!isNullOrUndefined(closest(evt.target, abortSelectors[parseInt(i.toString(), 10)]))) {\n          /* istanbul ignore next */\n          if (this.isDragStarted()) {\n            this.isDragStarted(true);\n          }\n\n          return;\n        }\n      }\n    }\n\n    if (this.preventDefault && !isUndefined(evt.changedTouches) && evt.type !== 'touchstart') {\n      evt.preventDefault();\n    }\n\n    this.element.setAttribute('aria-grabbed', 'true');\n    var intCoord = this.getCoordinates(evt);\n    this.initialPosition = {\n      x: intCoord.pageX,\n      y: intCoord.pageY\n    };\n\n    if (!this.clone) {\n      var pos = this.element.getBoundingClientRect();\n      this.getScrollableValues();\n\n      if (evt.clientX === evt.pageX) {\n        this.parentScrollX = 0;\n      }\n\n      if (evt.clientY === evt.pageY) {\n        this.parentScrollY = 0;\n      }\n\n      this.relativeXPosition = intCoord.pageX - (pos.left + this.parentScrollX);\n      this.relativeYPosition = intCoord.pageY - (pos.top + this.parentScrollY);\n    }\n\n    if (this.externalInitialize) {\n      this.intDragStart(evt);\n    } else {\n      EventHandler.add(document, Browser.isSafari() ? 'touchmove' : Browser.touchMoveEvent, this.intDragStart, this);\n      EventHandler.add(document, Browser.isSafari() ? 'touchend' : Browser.touchEndEvent, this.intDestroy, this);\n    }\n\n    this.toggleEvents(true);\n\n    if (evt.type !== 'touchstart' && this.isPreventSelect) {\n      document.body.classList.add('e-prevent-select');\n    }\n\n    this.externalInitialize = false;\n    EventHandler.trigger(document.documentElement, Browser.isSafari() ? 'touchstart' : Browser.touchStartEvent, evt);\n  };\n\n  Draggable.prototype.intDragStart = function (evt) {\n    this.removeTapholdTimer();\n    var isChangeTouch = !isUndefined(evt.changedTouches);\n\n    if (isChangeTouch && evt.changedTouches.length !== 1) {\n      return;\n    }\n\n    var intCordinate = this.getCoordinates(evt);\n    var pos;\n    var styleProp = getComputedStyle(this.element);\n    this.margin = {\n      left: parseInt(styleProp.marginLeft, 10),\n      top: parseInt(styleProp.marginTop, 10),\n      right: parseInt(styleProp.marginRight, 10),\n      bottom: parseInt(styleProp.marginBottom, 10)\n    };\n    var element = this.element;\n\n    if (this.clone && this.dragTarget) {\n      var intClosest = closest(evt.target, this.dragTarget);\n\n      if (!isNullOrUndefined(intClosest)) {\n        element = intClosest;\n      }\n    }\n    /* istanbul ignore next */\n\n\n    if (this.isReplaceDragEle) {\n      element = this.currentStateCheck(evt.target, element);\n    }\n\n    this.offset = this.calculateParentPosition(element);\n    this.position = this.getMousePosition(evt, this.isDragScroll);\n    var x = this.initialPosition.x - intCordinate.pageX;\n    var y = this.initialPosition.y - intCordinate.pageY;\n    var distance = Math.sqrt(x * x + y * y);\n\n    if (distance >= this.distance || this.externalInitialize) {\n      var ele = this.getHelperElement(evt);\n\n      if (!ele || isNullOrUndefined(ele)) {\n        return;\n      }\n\n      if (isChangeTouch) {\n        evt.preventDefault();\n      }\n\n      var dragTargetElement = this.helperElement = ele;\n      this.parentClientRect = this.calculateParentPosition(dragTargetElement.offsetParent);\n\n      if (this.dragStart) {\n        var curTarget = this.getProperTargetElement(evt);\n        var args = {\n          event: evt,\n          element: element,\n          target: curTarget,\n          bindEvents: isBlazor() ? this.bindDragEvents.bind(this) : null,\n          dragElement: dragTargetElement\n        };\n        this.trigger('dragStart', args);\n      }\n\n      if (this.dragArea) {\n        this.setDragArea();\n      } else {\n        this.dragLimit = {\n          left: 0,\n          right: 0,\n          bottom: 0,\n          top: 0\n        };\n        this.borderWidth = {\n          top: 0,\n          left: 0\n        };\n      }\n\n      pos = {\n        left: this.position.left - this.parentClientRect.left,\n        top: this.position.top - this.parentClientRect.top\n      };\n\n      if (this.clone && !this.enableTailMode) {\n        this.diffX = this.position.left - this.offset.left;\n        this.diffY = this.position.top - this.offset.top;\n      }\n\n      this.getScrollableValues(); // when drag element has margin-top\n\n      var styles = getComputedStyle(element);\n      var marginTop = parseFloat(styles.marginTop);\n      /* istanbul ignore next */\n\n      if (this.clone && marginTop !== 0) {\n        pos.top += marginTop;\n      }\n\n      this.eleTop = !isNaN(parseFloat(styles.top)) ? parseFloat(styles.top) - this.offset.top : 0;\n      /* istanbul ignore next */\n      // if (this.eleTop > 0) {\n      //     pos.top += this.eleTop;\n      // }\n\n      if (this.enableScrollHandler && !this.clone) {\n        pos.top -= this.parentScrollY;\n        pos.left -= this.parentScrollX;\n      }\n\n      var posValue = this.getProcessedPositionValue({\n        top: pos.top - this.diffY + 'px',\n        left: pos.left - this.diffX + 'px'\n      });\n\n      if (this.dragArea && typeof this.dragArea !== 'string' && this.dragArea.classList.contains('e-kanban-content') && this.dragArea.style.position === 'relative') {\n        pos.top += this.dragArea.scrollTop;\n      }\n\n      this.dragElePosition = {\n        top: pos.top,\n        left: pos.left\n      };\n      setStyleAttribute(dragTargetElement, this.getDragPosition({\n        position: 'absolute',\n        left: posValue.left,\n        top: posValue.top\n      }));\n      EventHandler.remove(document, Browser.isSafari() ? 'touchmove' : Browser.touchMoveEvent, this.intDragStart);\n      EventHandler.remove(document, Browser.isSafari() ? 'touchend' : Browser.touchEndEvent, this.intDestroy);\n\n      if (!isBlazor()) {\n        this.bindDragEvents(dragTargetElement);\n      }\n    }\n  };\n\n  Draggable.prototype.bindDragEvents = function (dragTargetElement) {\n    if (isVisible(dragTargetElement)) {\n      EventHandler.add(document, Browser.isSafari() ? 'touchmove' : Browser.touchMoveEvent, this.intDrag, this);\n      EventHandler.add(document, Browser.isSafari() ? 'touchend' : Browser.touchEndEvent, this.intDragStop, this);\n      this.setGlobalDroppables(false, this.element, dragTargetElement);\n    } else {\n      this.toggleEvents();\n      document.body.classList.remove('e-prevent-select');\n    }\n  };\n\n  Draggable.prototype.elementInViewport = function (el) {\n    this.top = el.offsetTop;\n    this.left = el.offsetLeft;\n    this.width = el.offsetWidth;\n    this.height = el.offsetHeight;\n\n    while (el.offsetParent) {\n      el = el.offsetParent;\n      this.top += el.offsetTop;\n      this.left += el.offsetLeft;\n    }\n\n    return this.top >= window.pageYOffset && this.left >= window.pageXOffset && this.top + this.height <= window.pageYOffset + window.innerHeight && this.left + this.width <= window.pageXOffset + window.innerWidth;\n  };\n\n  Draggable.prototype.getProcessedPositionValue = function (value) {\n    if (this.queryPositionInfo) {\n      return this.queryPositionInfo(value);\n    }\n\n    return value;\n  };\n\n  Draggable.prototype.calculateParentPosition = function (ele) {\n    if (isNullOrUndefined(ele)) {\n      return {\n        left: 0,\n        top: 0\n      };\n    }\n\n    var rect = ele.getBoundingClientRect();\n    var style = getComputedStyle(ele);\n    return {\n      left: rect.left + window.pageXOffset - parseInt(style.marginLeft, 10),\n      top: rect.top + window.pageYOffset - parseInt(style.marginTop, 10)\n    };\n  }; // tslint:disable-next-line:max-func-body-length\n\n\n  Draggable.prototype.intDrag = function (evt) {\n    if (!isUndefined(evt.changedTouches) && evt.changedTouches.length !== 1) {\n      return;\n    }\n\n    if (this.clone && evt.changedTouches && Browser.isDevice && Browser.isTouch) {\n      evt.preventDefault();\n    }\n\n    var left;\n    var top;\n    this.position = this.getMousePosition(evt, this.isDragScroll);\n    var docHeight = this.getDocumentWidthHeight('Height');\n\n    if (docHeight < this.position.top) {\n      this.position.top = docHeight;\n    }\n\n    var docWidth = this.getDocumentWidthHeight('Width');\n\n    if (docWidth < this.position.left) {\n      this.position.left = docWidth;\n    }\n\n    if (this.drag) {\n      var curTarget = this.getProperTargetElement(evt);\n      this.trigger('drag', {\n        event: evt,\n        element: this.element,\n        target: curTarget\n      });\n    }\n\n    var eleObj = this.checkTargetElement(evt);\n\n    if (eleObj.target && eleObj.instance) {\n      /* tslint:disable no-any */\n      var flag = true;\n\n      if (this.hoverObject) {\n        if (this.hoverObject.instance !== eleObj.instance) {\n          this.triggerOutFunction(evt, eleObj);\n        } else {\n          flag = false;\n        }\n      }\n\n      if (flag) {\n        eleObj.instance.dragData[this.scope] = this.droppables[this.scope];\n        eleObj.instance.intOver(evt, eleObj.target);\n        this.hoverObject = eleObj;\n      }\n    } else if (this.hoverObject) {\n      this.triggerOutFunction(evt, eleObj);\n    }\n\n    var helperElement = this.droppables[this.scope].helper;\n    this.parentClientRect = this.calculateParentPosition(this.helperElement.offsetParent);\n    var tLeft = this.parentClientRect.left;\n    var tTop = this.parentClientRect.top;\n    var intCoord = this.getCoordinates(evt);\n    var pagex = intCoord.pageX;\n    var pagey = intCoord.pageY;\n    var dLeft = this.position.left - this.diffX;\n    var dTop = this.position.top - this.diffY;\n    var styles = getComputedStyle(helperElement);\n\n    if (this.dragArea) {\n      if (this.pageX !== pagex || this.skipDistanceCheck) {\n        var helperWidth = helperElement.offsetWidth + (parseFloat(styles.marginLeft) + parseFloat(styles.marginRight));\n\n        if (this.dragLimit.left > dLeft && dLeft > 0) {\n          left = this.dragLimit.left;\n        } else if (this.dragLimit.right + window.pageXOffset < dLeft + helperWidth && dLeft > 0) {\n          left = dLeft - (dLeft - this.dragLimit.right) + window.pageXOffset - helperWidth;\n        } else {\n          left = dLeft < 0 ? this.dragLimit.left : dLeft;\n        }\n      }\n\n      if (this.pageY !== pagey || this.skipDistanceCheck) {\n        var helperHeight = helperElement.offsetHeight + (parseFloat(styles.marginTop) + parseFloat(styles.marginBottom));\n\n        if (this.dragLimit.top > dTop && dTop > 0) {\n          top = this.dragLimit.top;\n        } else if (this.dragLimit.bottom + window.pageYOffset < dTop + helperHeight && dTop > 0) {\n          top = dTop - (dTop - this.dragLimit.bottom) + window.pageYOffset - helperHeight;\n        } else {\n          top = dTop < 0 ? this.dragLimit.top : dTop;\n        }\n      }\n    } else {\n      left = dLeft;\n      top = dTop;\n    }\n\n    var iTop = tTop + this.borderWidth.top;\n    var iLeft = tLeft + this.borderWidth.left;\n\n    if (this.dragProcessStarted) {\n      if (isNullOrUndefined(top)) {\n        top = this.prevTop;\n      }\n\n      if (isNullOrUndefined(left)) {\n        left = this.prevLeft;\n      }\n    }\n\n    var draEleTop;\n    var draEleLeft;\n\n    if (this.helperElement.classList.contains('e-treeview')) {\n      if (this.dragArea) {\n        this.dragLimit.top = this.clone ? this.dragLimit.top : 0;\n        draEleTop = top - iTop < 0 ? this.dragLimit.top : top - this.borderWidth.top;\n        draEleLeft = left - iLeft < 0 ? this.dragLimit.left : left - this.borderWidth.left;\n      } else {\n        draEleTop = top - this.borderWidth.top;\n        draEleLeft = left - this.borderWidth.left;\n      }\n    } else {\n      if (this.dragArea) {\n        var isDialogEle = this.helperElement.classList.contains('e-dialog');\n        this.dragLimit.top = this.clone ? this.dragLimit.top : 0;\n        draEleTop = top - iTop < 0 ? this.dragLimit.top : top - iTop;\n        draEleLeft = left - iLeft < 0 ? isDialogEle ? left - (iLeft - this.borderWidth.left) : this.dragElePosition.left : left - iLeft;\n      } else {\n        draEleTop = top - iTop;\n        draEleLeft = left - iLeft;\n      }\n    }\n\n    var marginTop = parseFloat(getComputedStyle(this.element).marginTop); // when drag-element has margin-top\n\n    /* istanbul ignore next */\n\n    if (marginTop > 0) {\n      if (this.clone) {\n        draEleTop += marginTop;\n\n        if (dTop < 0) {\n          if (marginTop + dTop >= 0) {\n            draEleTop = marginTop + dTop;\n          } else {\n            draEleTop -= marginTop;\n          }\n        }\n\n        draEleTop = this.dragLimit.bottom < draEleTop ? this.dragLimit.bottom : draEleTop;\n      }\n\n      if (top - iTop < 0) {\n        if (dTop + marginTop + (helperElement.offsetHeight - iTop) >= 0) {\n          var tempDraEleTop = this.dragLimit.top + dTop - iTop;\n\n          if (tempDraEleTop + marginTop + iTop < 0) {\n            draEleTop -= marginTop + iTop;\n          } else {\n            draEleTop = tempDraEleTop;\n          }\n        } else {\n          draEleTop -= marginTop + iTop;\n        }\n      }\n    }\n\n    if (this.dragArea && this.helperElement.classList.contains('e-treeview')) {\n      var helperHeight = helperElement.offsetHeight + (parseFloat(styles.marginTop) + parseFloat(styles.marginBottom));\n      draEleTop = draEleTop + helperHeight > this.dragLimit.bottom ? this.dragLimit.bottom - helperHeight : draEleTop;\n    }\n    /* istanbul ignore next */\n    // if(this.eleTop > 0) {\n    //      draEleTop += this.eleTop;\n    // }\n\n\n    if (this.enableScrollHandler && !this.clone) {\n      draEleTop -= this.parentScrollY;\n      draEleLeft -= this.parentScrollX;\n    }\n\n    if (this.dragArea && typeof this.dragArea !== 'string' && this.dragArea.classList.contains('e-kanban-content') && this.dragArea.style.position === 'relative') {\n      draEleTop += this.dragArea.scrollTop;\n    }\n\n    var dragValue = this.getProcessedPositionValue({\n      top: draEleTop + 'px',\n      left: draEleLeft + 'px'\n    });\n    setStyleAttribute(helperElement, this.getDragPosition(dragValue));\n\n    if (!this.elementInViewport(helperElement) && this.enableAutoScroll && !this.helperElement.classList.contains('e-treeview')) {\n      this.helperElement.scrollIntoView();\n    }\n\n    var elements = document.querySelectorAll(':hover');\n\n    if (this.enableAutoScroll && this.helperElement.classList.contains('e-treeview')) {\n      if (elements.length === 0) {\n        elements = this.getPathElements(evt);\n      }\n      /* tslint:disable no-any */\n\n\n      var scrollParent = this.getScrollParent(elements, false);\n\n      if (this.elementInViewport(this.helperElement)) {\n        this.getScrollPosition(scrollParent, draEleTop);\n      } else if (!this.elementInViewport(this.helperElement)) {\n        elements = [].slice.call(document.querySelectorAll(':hover'));\n\n        if (elements.length === 0) {\n          elements = this.getPathElements(evt);\n        }\n\n        scrollParent = this.getScrollParent(elements, true);\n        this.getScrollPosition(scrollParent, draEleTop);\n      }\n    }\n\n    this.dragProcessStarted = true;\n    this.prevLeft = left;\n    this.prevTop = top;\n    this.position.left = left;\n    this.position.top = top;\n    this.pageX = pagex;\n    this.pageY = pagey;\n  };\n  /* tslint:disable no-any */\n\n\n  Draggable.prototype.getScrollParent = function (node, reverse) {\n    /* tslint:disable no-any */\n    var nodeEl = reverse ? node.reverse() : node;\n    var hasScroll;\n\n    for (var i = nodeEl.length - 1; i >= 0; i--) {\n      hasScroll = window.getComputedStyle(nodeEl[parseInt(i.toString(), 10)])['overflow-y'];\n\n      if ((hasScroll === 'auto' || hasScroll === 'scroll') && nodeEl[parseInt(i.toString(), 10)].scrollHeight > nodeEl[parseInt(i.toString(), 10)].clientHeight) {\n        return nodeEl[parseInt(i.toString(), 10)];\n      }\n    }\n\n    hasScroll = window.getComputedStyle(document.scrollingElement)['overflow-y'];\n\n    if (hasScroll === 'visible') {\n      document.scrollingElement.style.overflow = 'auto';\n      return document.scrollingElement;\n    }\n  };\n\n  Draggable.prototype.getScrollPosition = function (nodeEle, draEleTop) {\n    if (nodeEle && nodeEle === document.scrollingElement) {\n      if (nodeEle.clientHeight + document.scrollingElement.scrollTop - this.helperElement.clientHeight < draEleTop && nodeEle.getBoundingClientRect().height + this.parentClientRect.top > draEleTop) {\n        nodeEle.scrollTop += this.helperElement.clientHeight;\n      } else if (nodeEle.scrollTop > draEleTop - this.helperElement.clientHeight) {\n        nodeEle.scrollTop -= this.helperElement.clientHeight;\n      }\n    } else if (nodeEle && nodeEle !== document.scrollingElement) {\n      if (nodeEle.clientHeight + nodeEle.getBoundingClientRect().top - this.helperElement.clientHeight + document.scrollingElement.scrollTop < draEleTop) {\n        nodeEle.scrollTop += this.helperElement.clientHeight;\n      } else if (nodeEle.getBoundingClientRect().top > draEleTop - this.helperElement.clientHeight - document.scrollingElement.scrollTop) {\n        nodeEle.scrollTop -= this.helperElement.clientHeight;\n      }\n    }\n  };\n\n  Draggable.prototype.getPathElements = function (evt) {\n    var elementTop = evt.clientX > 0 ? evt.clientX : 0;\n    var elementLeft = evt.clientY > 0 ? evt.clientY : 0;\n    return document.elementsFromPoint(elementTop, elementLeft);\n  };\n\n  Draggable.prototype.triggerOutFunction = function (evt, eleObj) {\n    this.hoverObject.instance.intOut(evt, eleObj.target);\n    this.hoverObject.instance.dragData[this.scope] = null;\n    this.hoverObject = null;\n  };\n\n  Draggable.prototype.getDragPosition = function (dragValue) {\n    var temp = extend({}, dragValue);\n\n    if (this.axis) {\n      if (this.axis === 'x') {\n        delete temp.top;\n      } else if (this.axis === 'y') {\n        delete temp.left;\n      }\n    }\n\n    return temp;\n  };\n\n  Draggable.prototype.getDocumentWidthHeight = function (str) {\n    var docBody = document.body;\n    var docEle = document.documentElement;\n    var returnValue = Math.max(docBody['scroll' + str], docEle['scroll' + str], docBody['offset' + str], docEle['offset' + str], docEle['client' + str]);\n    return returnValue;\n  };\n\n  Draggable.prototype.intDragStop = function (evt) {\n    this.dragProcessStarted = false;\n\n    if (!isUndefined(evt.changedTouches) && evt.changedTouches.length !== 1) {\n      return;\n    }\n\n    var type = ['touchend', 'pointerup', 'mouseup'];\n\n    if (type.indexOf(evt.type) !== -1) {\n      if (this.dragStop) {\n        var curTarget = this.getProperTargetElement(evt);\n        this.trigger('dragStop', {\n          event: evt,\n          element: this.element,\n          target: curTarget,\n          helper: this.helperElement\n        });\n      }\n\n      this.intDestroy(evt);\n    } else {\n      this.element.setAttribute('aria-grabbed', 'false');\n    }\n\n    var eleObj = this.checkTargetElement(evt);\n\n    if (eleObj.target && eleObj.instance) {\n      eleObj.instance.dragStopCalled = true;\n      eleObj.instance.dragData[this.scope] = this.droppables[this.scope];\n      eleObj.instance.intDrop(evt, eleObj.target);\n    }\n\n    this.setGlobalDroppables(true);\n    document.body.classList.remove('e-prevent-select');\n  };\n  /**\n   * @private\n   */\n\n\n  Draggable.prototype.intDestroy = function (evt) {\n    this.dragProcessStarted = false;\n    this.toggleEvents();\n    document.body.classList.remove('e-prevent-select');\n    this.element.setAttribute('aria-grabbed', 'false');\n    EventHandler.remove(document, Browser.isSafari() ? 'touchmove' : Browser.touchMoveEvent, this.intDragStart);\n    EventHandler.remove(document, Browser.isSafari() ? 'touchend' : Browser.touchEndEvent, this.intDragStop);\n    EventHandler.remove(document, Browser.isSafari() ? 'touchend' : Browser.touchEndEvent, this.intDestroy);\n    EventHandler.remove(document, Browser.isSafari() ? 'touchmove' : Browser.touchMoveEvent, this.intDrag);\n\n    if (this.isDragStarted()) {\n      this.isDragStarted(true);\n    }\n  }; // triggers when property changed\n\n\n  Draggable.prototype.onPropertyChanged = function (newProp, oldProp) {//No Code to handle\n  };\n\n  Draggable.prototype.getModuleName = function () {\n    return 'draggable';\n  };\n\n  Draggable.prototype.isDragStarted = function (change) {\n    if (change) {\n      isDraggedObject.isDragged = !isDraggedObject.isDragged;\n    }\n\n    return isDraggedObject.isDragged;\n  };\n\n  Draggable.prototype.setDragArea = function () {\n    var eleWidthBound;\n    var eleHeightBound;\n    var top = 0;\n    var left = 0;\n    var ele;\n    var type = typeof this.dragArea;\n\n    if (type === 'string') {\n      ele = select(this.dragArea);\n    } else {\n      ele = this.dragArea;\n    }\n\n    if (ele) {\n      var elementArea = ele.getBoundingClientRect();\n      eleWidthBound = ele.scrollWidth ? ele.scrollWidth : elementArea.right - elementArea.left;\n      eleHeightBound = ele.scrollHeight ? this.dragArea && !isNullOrUndefined(this.helperElement) && this.helperElement.classList.contains('e-treeview') ? ele.clientHeight : ele.scrollHeight : elementArea.bottom - elementArea.top;\n      var keys = ['Top', 'Left', 'Bottom', 'Right'];\n      var styles = getComputedStyle(ele);\n\n      for (var i = 0; i < keys.length; i++) {\n        var key = keys[parseInt(i.toString(), 10)];\n        var tborder = styles['border' + key + 'Width'];\n        var tpadding = styles['padding' + key];\n        var lowerKey = key.toLowerCase();\n        this.borderWidth[\"\" + lowerKey] = isNaN(parseFloat(tborder)) ? 0 : parseFloat(tborder);\n        this.padding[\"\" + lowerKey] = isNaN(parseFloat(tpadding)) ? 0 : parseFloat(tpadding);\n      }\n\n      if (this.dragArea && !isNullOrUndefined(this.helperElement) && this.helperElement.classList.contains('e-treeview')) {\n        top = elementArea.top + document.scrollingElement.scrollTop;\n      } else {\n        top = elementArea.top;\n      }\n\n      left = elementArea.left;\n      this.dragLimit.left = left + this.borderWidth.left + this.padding.left;\n      this.dragLimit.top = ele.offsetTop + this.borderWidth.top + this.padding.top;\n      this.dragLimit.right = left + eleWidthBound - (this.borderWidth.right + this.padding.right);\n      this.dragLimit.bottom = top + eleHeightBound - (this.borderWidth.bottom + this.padding.bottom);\n    }\n  };\n\n  Draggable.prototype.getProperTargetElement = function (evt) {\n    var intCoord = this.getCoordinates(evt);\n    var ele;\n    var prevStyle = this.helperElement.style.pointerEvents || '';\n    var isPointer = evt.type.indexOf('pointer') !== -1 && Browser.info.name === 'safari' && parseInt(Browser.info.version) > 12;\n\n    if (compareElementParent(evt.target, this.helperElement) || evt.type.indexOf('touch') !== -1 || isPointer) {\n      this.helperElement.style.pointerEvents = 'none';\n      ele = document.elementFromPoint(intCoord.clientX, intCoord.clientY);\n      this.helperElement.style.pointerEvents = prevStyle;\n    } else {\n      ele = evt.target;\n    }\n\n    return ele;\n  };\n  /* istanbul ignore next */\n\n\n  Draggable.prototype.currentStateCheck = function (ele, oldEle) {\n    var elem;\n\n    if (!isNullOrUndefined(this.currentStateTarget) && this.currentStateTarget !== ele) {\n      elem = this.currentStateTarget;\n    } else {\n      elem = !isNullOrUndefined(oldEle) ? oldEle : ele;\n    }\n\n    return elem;\n  };\n\n  Draggable.prototype.getMousePosition = function (evt, isdragscroll) {\n    /* tslint:disable no-any */\n    var dragEle = evt.srcElement !== undefined ? evt.srcElement : evt.target;\n    var intCoord = this.getCoordinates(evt);\n    var pageX;\n    var pageY;\n    var isOffsetParent = isNullOrUndefined(dragEle.offsetParent);\n    /* istanbul ignore next */\n\n    if (isdragscroll) {\n      pageX = this.clone ? intCoord.pageX : intCoord.pageX + (isOffsetParent ? 0 : dragEle.offsetParent.scrollLeft) - this.relativeXPosition;\n      pageY = this.clone ? intCoord.pageY : intCoord.pageY + (isOffsetParent ? 0 : dragEle.offsetParent.scrollTop) - this.relativeYPosition;\n    } else {\n      pageX = this.clone ? intCoord.pageX : intCoord.pageX + window.pageXOffset - this.relativeXPosition;\n      pageY = this.clone ? intCoord.pageY : intCoord.pageY + window.pageYOffset - this.relativeYPosition;\n    }\n\n    if (document.scrollingElement && !isdragscroll && !this.clone) {\n      var isVerticalScroll = document.scrollingElement.scrollHeight > 0 && document.scrollingElement.scrollHeight > document.scrollingElement.clientHeight && document.scrollingElement.scrollTop > 0;\n      var isHorrizontalScroll = document.scrollingElement.scrollWidth > 0 && document.scrollingElement.scrollWidth > document.scrollingElement.clientWidth && document.scrollingElement.scrollLeft > 0;\n      pageX = isHorrizontalScroll ? pageX - document.scrollingElement.scrollLeft : pageX;\n      pageY = isVerticalScroll ? pageY - document.scrollingElement.scrollTop : pageY;\n    }\n\n    return {\n      left: pageX - (this.margin.left + this.cursorAt.left),\n      top: pageY - (this.margin.top + this.cursorAt.top)\n    };\n  };\n\n  Draggable.prototype.getCoordinates = function (evt) {\n    if (evt.type.indexOf('touch') > -1) {\n      return evt.changedTouches[0];\n    }\n\n    return evt;\n  };\n\n  Draggable.prototype.getHelperElement = function (evt) {\n    var element;\n\n    if (this.clone) {\n      if (this.helper) {\n        element = this.helper({\n          sender: evt,\n          element: this.target\n        });\n      } else {\n        element = createElement('div', {\n          className: 'e-drag-helper e-block-touch',\n          innerHTML: 'Draggable'\n        });\n        document.body.appendChild(element);\n      }\n    } else {\n      element = this.element;\n    }\n\n    return element;\n  };\n\n  Draggable.prototype.setGlobalDroppables = function (reset, drag, helper) {\n    this.droppables[this.scope] = reset ? null : {\n      draggable: drag,\n      helper: helper,\n      draggedElement: this.element\n    };\n  };\n\n  Draggable.prototype.checkTargetElement = function (evt) {\n    var target = this.getProperTargetElement(evt);\n    var dropIns = this.getDropInstance(target);\n\n    if (!dropIns && target && !isNullOrUndefined(target.parentNode)) {\n      var parent_1 = closest(target.parentNode, '.e-droppable') || target.parentElement;\n\n      if (parent_1) {\n        dropIns = this.getDropInstance(parent_1);\n      }\n    }\n\n    return {\n      target: target,\n      instance: dropIns\n    };\n  };\n\n  Draggable.prototype.getDropInstance = function (ele) {\n    var name = 'getModuleName';\n    var drop;\n    var eleInst = ele && ele.ej2_instances;\n\n    if (eleInst) {\n      for (var _i = 0, eleInst_1 = eleInst; _i < eleInst_1.length; _i++) {\n        var inst = eleInst_1[_i];\n\n        if (inst[\"\" + name]() === 'droppable') {\n          drop = inst;\n          break;\n        }\n      }\n    }\n\n    return drop;\n  };\n\n  Draggable.prototype.destroy = function () {\n    this.toggleEvents(true);\n\n    _super.prototype.destroy.call(this);\n  };\n\n  var Draggable_1;\n\n  __decorate([Complex({}, Position)], Draggable.prototype, \"cursorAt\", void 0);\n\n  __decorate([Property(true)], Draggable.prototype, \"clone\", void 0);\n\n  __decorate([Property()], Draggable.prototype, \"dragArea\", void 0);\n\n  __decorate([Property()], Draggable.prototype, \"isDragScroll\", void 0);\n\n  __decorate([Property()], Draggable.prototype, \"isReplaceDragEle\", void 0);\n\n  __decorate([Property(true)], Draggable.prototype, \"isPreventSelect\", void 0);\n\n  __decorate([Event()], Draggable.prototype, \"drag\", void 0);\n\n  __decorate([Event()], Draggable.prototype, \"dragStart\", void 0);\n\n  __decorate([Event()], Draggable.prototype, \"dragStop\", void 0);\n\n  __decorate([Property(1)], Draggable.prototype, \"distance\", void 0);\n\n  __decorate([Property()], Draggable.prototype, \"handle\", void 0);\n\n  __decorate([Property()], Draggable.prototype, \"abort\", void 0);\n\n  __decorate([Property()], Draggable.prototype, \"helper\", void 0);\n\n  __decorate([Property('default')], Draggable.prototype, \"scope\", void 0);\n\n  __decorate([Property('')], Draggable.prototype, \"dragTarget\", void 0);\n\n  __decorate([Property()], Draggable.prototype, \"axis\", void 0);\n\n  __decorate([Property()], Draggable.prototype, \"queryPositionInfo\", void 0);\n\n  __decorate([Property(false)], Draggable.prototype, \"enableTailMode\", void 0);\n\n  __decorate([Property(false)], Draggable.prototype, \"skipDistanceCheck\", void 0);\n\n  __decorate([Property(true)], Draggable.prototype, \"preventDefault\", void 0);\n\n  __decorate([Property(false)], Draggable.prototype, \"enableAutoScroll\", void 0);\n\n  __decorate([Property(false)], Draggable.prototype, \"enableTapHold\", void 0);\n\n  __decorate([Property(750)], Draggable.prototype, \"tapHoldThreshold\", void 0);\n\n  __decorate([Property(false)], Draggable.prototype, \"enableScrollHandler\", void 0);\n\n  Draggable = Draggable_1 = __decorate([NotifyPropertyChanges], Draggable);\n  return Draggable;\n}(Base);\n\nexport { Draggable };","map":{"version":3,"sources":["C:/Users/amase/Desktop/open_dsa/openDSA_dashboard/project/node_modules/@syncfusion/ej2-react-lists/node_modules/@syncfusion/ej2-base/src/draggable.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","Base","Browser","isVisible","Property","Complex","NotifyPropertyChanges","Event","EventHandler","ChildProperty","select","closest","setStyleAttribute","addClass","createElement","extend","isUndefined","isNullOrUndefined","compareElementParent","isBlazor","defaultPosition","left","top","bottom","right","positionProp","axisMapper","axisValueMapper","isDraggedObject","isDragged","Position","_super","apply","Draggable","element","options","_this","call","dragLimit","Draggable_1","getDefaultPosition","borderWidth","padding","diffX","prevLeft","prevTop","dragProcessStarted","eleTop","tapHoldTimer","externalInitialize","diffY","parentScrollX","parentScrollY","droppables","bind","toggleEvents","isIE","scope","isUnWire","ele","handle","handler","enableTapHold","isDevice","isTouch","mobileInitialize","initialize","remove","isSafari","touchStartEvent","add","evt","currentTarget","setTimeout","removeTapholdTimer","tapHoldThreshold","document","touchMoveEvent","touchEndEvent","clearTimeout","getScrollableParent","axis","scroll","client","scrollTop","scrollLeft","tempScrollHeight","scrollHeight","tempScrollWidth","scrollWidth","parentNode","getScrollableValues","isModalDialog","classList","contains","verticalScrollParent","horizontalScrollParent","curTarget","currentStateTarget","isDragStarted","abort","abortSelectors","parseInt","toString","preventDefault","changedTouches","type","setAttribute","intCoord","getCoordinates","initialPosition","x","pageX","y","pageY","clone","pos","getBoundingClientRect","clientX","clientY","relativeXPosition","relativeYPosition","intDragStart","intDestroy","isPreventSelect","body","trigger","documentElement","isChangeTouch","intCordinate","styleProp","getComputedStyle","margin","marginLeft","marginTop","marginRight","marginBottom","dragTarget","intClosest","isReplaceDragEle","currentStateCheck","offset","calculateParentPosition","position","getMousePosition","isDragScroll","distance","Math","sqrt","getHelperElement","dragTargetElement","helperElement","parentClientRect","offsetParent","dragStart","getProperTargetElement","args","event","bindEvents","bindDragEvents","dragElement","dragArea","setDragArea","enableTailMode","styles","parseFloat","isNaN","enableScrollHandler","posValue","getProcessedPositionValue","style","dragElePosition","getDragPosition","intDrag","intDragStop","setGlobalDroppables","elementInViewport","el","offsetTop","offsetLeft","width","offsetWidth","height","offsetHeight","window","pageYOffset","pageXOffset","innerHeight","innerWidth","value","queryPositionInfo","rect","docHeight","getDocumentWidthHeight","docWidth","drag","eleObj","checkTargetElement","instance","flag","hoverObject","triggerOutFunction","dragData","intOver","helper","tLeft","tTop","pagex","pagey","dLeft","dTop","skipDistanceCheck","helperWidth","helperHeight","iTop","iLeft","draEleTop","draEleLeft","isDialogEle","tempDraEleTop","dragValue","enableAutoScroll","scrollIntoView","elements","querySelectorAll","getPathElements","scrollParent","getScrollParent","getScrollPosition","slice","node","reverse","nodeEl","hasScroll","clientHeight","scrollingElement","overflow","nodeEle","elementTop","elementLeft","elementsFromPoint","intOut","temp","str","docBody","docEle","returnValue","max","indexOf","dragStop","dragStopCalled","intDrop","onPropertyChanged","newProp","oldProp","getModuleName","change","eleWidthBound","eleHeightBound","elementArea","keys","tborder","tpadding","lowerKey","toLowerCase","prevStyle","pointerEvents","isPointer","info","name","version","elementFromPoint","oldEle","elem","isdragscroll","dragEle","srcElement","undefined","isOffsetParent","isVerticalScroll","isHorrizontalScroll","clientWidth","cursorAt","sender","className","innerHTML","appendChild","reset","draggable","draggedElement","dropIns","getDropInstance","parent_1","parentElement","drop","eleInst","ej2_instances","_i","eleInst_1","inst","destroy"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Base } from './base';\nimport { Browser } from './browser';\nimport { isVisible } from './dom';\nimport { Property, Complex, NotifyPropertyChanges, Event } from './notify-property-change';\nimport { EventHandler } from './event-handler';\nimport { ChildProperty } from './child-property';\nimport { select, closest, setStyleAttribute, addClass, createElement } from './dom';\nimport { extend, isUndefined, isNullOrUndefined, compareElementParent, isBlazor } from './util';\nvar defaultPosition = { left: 0, top: 0, bottom: 0, right: 0 };\nvar positionProp = ['offsetLeft', 'offsetTop'];\nvar axisMapper = ['x', 'y'];\nvar axisValueMapper = ['left', 'top'];\nvar isDraggedObject = { isDragged: false };\n/**\n * Specifies the position coordinates\n */\nvar Position = /** @class */ (function (_super) {\n    __extends(Position, _super);\n    function Position() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(0)\n    ], Position.prototype, \"left\", void 0);\n    __decorate([\n        Property(0)\n    ], Position.prototype, \"top\", void 0);\n    return Position;\n}(ChildProperty));\nexport { Position };\n/**\n * Draggable Module provides support to enable draggable functionality in Dom Elements.\n * ```html\n * <div id='drag'>Draggable</div>\n * <script>\n * var ele = document.getElementById('drag');\n * var drag:Draggable = new Draggable(ele,{\n *     clone:false,\n *     drag: function(e) {\n *      //drag handler code.\n *      },\n *     handle:'.class'\n * });\n * </script>\n * ```\n */\nvar Draggable = /** @class */ (function (_super) {\n    __extends(Draggable, _super);\n    function Draggable(element, options) {\n        var _this = _super.call(this, options, element) || this;\n        _this.dragLimit = Draggable_1.getDefaultPosition();\n        _this.borderWidth = Draggable_1.getDefaultPosition();\n        _this.padding = Draggable_1.getDefaultPosition();\n        _this.diffX = 0;\n        _this.prevLeft = 0;\n        _this.prevTop = 0;\n        _this.dragProcessStarted = false;\n        _this.eleTop = 0;\n        /* eslint-disable @typescript-eslint/no-explicit-any */\n        _this.tapHoldTimer = 0;\n        _this.externalInitialize = false;\n        _this.diffY = 0;\n        _this.parentScrollX = 0;\n        _this.parentScrollY = 0;\n        _this.droppables = {};\n        _this.bind();\n        return _this;\n    }\n    Draggable_1 = Draggable;\n    Draggable.prototype.bind = function () {\n        this.toggleEvents();\n        if (Browser.isIE) {\n            addClass([this.element], 'e-block-touch');\n        }\n        this.droppables[this.scope] = {};\n    };\n    Draggable.getDefaultPosition = function () {\n        return extend({}, defaultPosition);\n    };\n    Draggable.prototype.toggleEvents = function (isUnWire) {\n        var ele;\n        if (!isUndefined(this.handle)) {\n            ele = select(this.handle, this.element);\n        }\n        var handler = (this.enableTapHold && Browser.isDevice && Browser.isTouch) ? this.mobileInitialize : this.initialize;\n        if (isUnWire) {\n            EventHandler.remove(ele || this.element, Browser.isSafari() ? 'touchstart' : Browser.touchStartEvent, handler);\n        }\n        else {\n            EventHandler.add(ele || this.element, Browser.isSafari() ? 'touchstart' : Browser.touchStartEvent, handler, this);\n        }\n    };\n    /* istanbul ignore next */\n    Draggable.prototype.mobileInitialize = function (evt) {\n        var _this = this;\n        var target = evt.currentTarget;\n        this.tapHoldTimer = setTimeout(function () {\n            _this.externalInitialize = true;\n            _this.removeTapholdTimer();\n            _this.initialize(evt, target);\n        }, this.tapHoldThreshold);\n        EventHandler.add(document, Browser.isSafari() ? 'touchmove' : Browser.touchMoveEvent, this.removeTapholdTimer, this);\n        EventHandler.add(document, Browser.isSafari() ? 'touchend' : Browser.touchEndEvent, this.removeTapholdTimer, this);\n    };\n    /* istanbul ignore next */\n    Draggable.prototype.removeTapholdTimer = function () {\n        clearTimeout(this.tapHoldTimer);\n        EventHandler.remove(document, Browser.isSafari() ? 'touchmove' : Browser.touchMoveEvent, this.removeTapholdTimer);\n        EventHandler.remove(document, Browser.isSafari() ? 'touchend' : Browser.touchEndEvent, this.removeTapholdTimer);\n    };\n    /* istanbul ignore next */\n    Draggable.prototype.getScrollableParent = function (element, axis) {\n        var scroll = { 'vertical': 'scrollHeight', 'horizontal': 'scrollWidth' };\n        var client = { 'vertical': 'clientHeight', 'horizontal': 'clientWidth' };\n        if (isNullOrUndefined(element)) {\n            return null;\n        }\n        if (element[scroll[\"\" + axis]] > element[client[\"\" + axis]]) {\n            if (axis === 'vertical' ? element.scrollTop > 0 : element.scrollLeft > 0) {\n                if (axis === 'vertical') {\n                    this.parentScrollY = this.parentScrollY +\n                        (this.parentScrollY === 0 ? element.scrollTop : element.scrollTop - this.parentScrollY);\n                    this.tempScrollHeight = element.scrollHeight;\n                }\n                else {\n                    this.parentScrollX = this.parentScrollX +\n                        (this.parentScrollX === 0 ? element.scrollLeft : element.scrollLeft - this.parentScrollX);\n                    this.tempScrollWidth = element.scrollWidth;\n                }\n                if (!isNullOrUndefined(element)) {\n                    return this.getScrollableParent(element.parentNode, axis);\n                }\n                else {\n                    return element;\n                }\n            }\n            else {\n                return this.getScrollableParent(element.parentNode, axis);\n            }\n        }\n        else {\n            return this.getScrollableParent(element.parentNode, axis);\n        }\n    };\n    Draggable.prototype.getScrollableValues = function () {\n        this.parentScrollX = 0;\n        this.parentScrollY = 0;\n        var isModalDialog = this.element.classList.contains('e-dialog') && this.element.classList.contains('e-dlg-modal');\n        var verticalScrollParent = this.getScrollableParent(this.element.parentNode, 'vertical');\n        var horizontalScrollParent = this.getScrollableParent(this.element.parentNode, 'horizontal');\n    };\n    Draggable.prototype.initialize = function (evt, curTarget) {\n        this.currentStateTarget = evt.target;\n        if (this.isDragStarted()) {\n            return;\n        }\n        else {\n            this.isDragStarted(true);\n            this.externalInitialize = false;\n        }\n        this.target = (evt.currentTarget || curTarget);\n        this.dragProcessStarted = false;\n        if (this.abort) {\n            /* tslint:disable no-any */\n            var abortSelectors = this.abort;\n            if (typeof abortSelectors === 'string') {\n                abortSelectors = [abortSelectors];\n            }\n            for (var i = 0; i < abortSelectors.length; i++) {\n                if (!isNullOrUndefined(closest(evt.target, abortSelectors[parseInt(i.toString(), 10)]))) {\n                    /* istanbul ignore next */\n                    if (this.isDragStarted()) {\n                        this.isDragStarted(true);\n                    }\n                    return;\n                }\n            }\n        }\n        if (this.preventDefault && !isUndefined(evt.changedTouches) && evt.type !== 'touchstart') {\n            evt.preventDefault();\n        }\n        this.element.setAttribute('aria-grabbed', 'true');\n        var intCoord = this.getCoordinates(evt);\n        this.initialPosition = { x: intCoord.pageX, y: intCoord.pageY };\n        if (!this.clone) {\n            var pos = this.element.getBoundingClientRect();\n            this.getScrollableValues();\n            if (evt.clientX === evt.pageX) {\n                this.parentScrollX = 0;\n            }\n            if (evt.clientY === evt.pageY) {\n                this.parentScrollY = 0;\n            }\n            this.relativeXPosition = intCoord.pageX - (pos.left + this.parentScrollX);\n            this.relativeYPosition = intCoord.pageY - (pos.top + this.parentScrollY);\n        }\n        if (this.externalInitialize) {\n            this.intDragStart(evt);\n        }\n        else {\n            EventHandler.add(document, Browser.isSafari() ? 'touchmove' : Browser.touchMoveEvent, this.intDragStart, this);\n            EventHandler.add(document, Browser.isSafari() ? 'touchend' : Browser.touchEndEvent, this.intDestroy, this);\n        }\n        this.toggleEvents(true);\n        if (evt.type !== 'touchstart' && this.isPreventSelect) {\n            document.body.classList.add('e-prevent-select');\n        }\n        this.externalInitialize = false;\n        EventHandler.trigger(document.documentElement, Browser.isSafari() ? 'touchstart' : Browser.touchStartEvent, evt);\n    };\n    Draggable.prototype.intDragStart = function (evt) {\n        this.removeTapholdTimer();\n        var isChangeTouch = !isUndefined(evt.changedTouches);\n        if (isChangeTouch && (evt.changedTouches.length !== 1)) {\n            return;\n        }\n        var intCordinate = this.getCoordinates(evt);\n        var pos;\n        var styleProp = getComputedStyle(this.element);\n        this.margin = {\n            left: parseInt(styleProp.marginLeft, 10),\n            top: parseInt(styleProp.marginTop, 10),\n            right: parseInt(styleProp.marginRight, 10),\n            bottom: parseInt(styleProp.marginBottom, 10)\n        };\n        var element = this.element;\n        if (this.clone && this.dragTarget) {\n            var intClosest = closest(evt.target, this.dragTarget);\n            if (!isNullOrUndefined(intClosest)) {\n                element = intClosest;\n            }\n        }\n        /* istanbul ignore next */\n        if (this.isReplaceDragEle) {\n            element = this.currentStateCheck(evt.target, element);\n        }\n        this.offset = this.calculateParentPosition(element);\n        this.position = this.getMousePosition(evt, this.isDragScroll);\n        var x = this.initialPosition.x - intCordinate.pageX;\n        var y = this.initialPosition.y - intCordinate.pageY;\n        var distance = Math.sqrt((x * x) + (y * y));\n        if ((distance >= this.distance || this.externalInitialize)) {\n            var ele = this.getHelperElement(evt);\n            if (!ele || isNullOrUndefined(ele)) {\n                return;\n            }\n            if (isChangeTouch) {\n                evt.preventDefault();\n            }\n            var dragTargetElement = this.helperElement = ele;\n            this.parentClientRect = this.calculateParentPosition(dragTargetElement.offsetParent);\n            if (this.dragStart) {\n                var curTarget = this.getProperTargetElement(evt);\n                var args = {\n                    event: evt,\n                    element: element,\n                    target: curTarget,\n                    bindEvents: isBlazor() ? this.bindDragEvents.bind(this) : null,\n                    dragElement: dragTargetElement\n                };\n                this.trigger('dragStart', args);\n            }\n            if (this.dragArea) {\n                this.setDragArea();\n            }\n            else {\n                this.dragLimit = { left: 0, right: 0, bottom: 0, top: 0 };\n                this.borderWidth = { top: 0, left: 0 };\n            }\n            pos = { left: this.position.left - this.parentClientRect.left, top: this.position.top - this.parentClientRect.top };\n            if (this.clone && !this.enableTailMode) {\n                this.diffX = this.position.left - this.offset.left;\n                this.diffY = this.position.top - this.offset.top;\n            }\n            this.getScrollableValues();\n            // when drag element has margin-top\n            var styles = getComputedStyle(element);\n            var marginTop = parseFloat(styles.marginTop);\n            /* istanbul ignore next */\n            if (this.clone && marginTop !== 0) {\n                pos.top += marginTop;\n            }\n            this.eleTop = !isNaN(parseFloat(styles.top)) ? parseFloat(styles.top) - this.offset.top : 0;\n            /* istanbul ignore next */\n            // if (this.eleTop > 0) {\n            //     pos.top += this.eleTop;\n            // }\n            if (this.enableScrollHandler && !this.clone) {\n                pos.top -= this.parentScrollY;\n                pos.left -= this.parentScrollX;\n            }\n            var posValue = this.getProcessedPositionValue({\n                top: (pos.top - this.diffY) + 'px',\n                left: (pos.left - this.diffX) + 'px'\n            });\n            if (this.dragArea && typeof this.dragArea !== 'string' && this.dragArea.classList.contains('e-kanban-content') && this.dragArea.style.position === 'relative') {\n                pos.top += this.dragArea.scrollTop;\n            }\n            this.dragElePosition = { top: pos.top, left: pos.left };\n            setStyleAttribute(dragTargetElement, this.getDragPosition({ position: 'absolute', left: posValue.left, top: posValue.top }));\n            EventHandler.remove(document, Browser.isSafari() ? 'touchmove' : Browser.touchMoveEvent, this.intDragStart);\n            EventHandler.remove(document, Browser.isSafari() ? 'touchend' : Browser.touchEndEvent, this.intDestroy);\n            if (!isBlazor()) {\n                this.bindDragEvents(dragTargetElement);\n            }\n        }\n    };\n    Draggable.prototype.bindDragEvents = function (dragTargetElement) {\n        if (isVisible(dragTargetElement)) {\n            EventHandler.add(document, Browser.isSafari() ? 'touchmove' : Browser.touchMoveEvent, this.intDrag, this);\n            EventHandler.add(document, Browser.isSafari() ? 'touchend' : Browser.touchEndEvent, this.intDragStop, this);\n            this.setGlobalDroppables(false, this.element, dragTargetElement);\n        }\n        else {\n            this.toggleEvents();\n            document.body.classList.remove('e-prevent-select');\n        }\n    };\n    Draggable.prototype.elementInViewport = function (el) {\n        this.top = el.offsetTop;\n        this.left = el.offsetLeft;\n        this.width = el.offsetWidth;\n        this.height = el.offsetHeight;\n        while (el.offsetParent) {\n            el = el.offsetParent;\n            this.top += el.offsetTop;\n            this.left += el.offsetLeft;\n        }\n        return (this.top >= window.pageYOffset &&\n            this.left >= window.pageXOffset &&\n            (this.top + this.height) <= (window.pageYOffset + window.innerHeight) &&\n            (this.left + this.width) <= (window.pageXOffset + window.innerWidth));\n    };\n    Draggable.prototype.getProcessedPositionValue = function (value) {\n        if (this.queryPositionInfo) {\n            return this.queryPositionInfo(value);\n        }\n        return value;\n    };\n    Draggable.prototype.calculateParentPosition = function (ele) {\n        if (isNullOrUndefined(ele)) {\n            return { left: 0, top: 0 };\n        }\n        var rect = ele.getBoundingClientRect();\n        var style = getComputedStyle(ele);\n        return {\n            left: (rect.left + window.pageXOffset) - parseInt(style.marginLeft, 10),\n            top: (rect.top + window.pageYOffset) - parseInt(style.marginTop, 10)\n        };\n    };\n    // tslint:disable-next-line:max-func-body-length\n    Draggable.prototype.intDrag = function (evt) {\n        if (!isUndefined(evt.changedTouches) && (evt.changedTouches.length !== 1)) {\n            return;\n        }\n        if (this.clone && evt.changedTouches && Browser.isDevice && Browser.isTouch) {\n            evt.preventDefault();\n        }\n        var left;\n        var top;\n        this.position = this.getMousePosition(evt, this.isDragScroll);\n        var docHeight = this.getDocumentWidthHeight('Height');\n        if (docHeight < this.position.top) {\n            this.position.top = docHeight;\n        }\n        var docWidth = this.getDocumentWidthHeight('Width');\n        if (docWidth < this.position.left) {\n            this.position.left = docWidth;\n        }\n        if (this.drag) {\n            var curTarget = this.getProperTargetElement(evt);\n            this.trigger('drag', { event: evt, element: this.element, target: curTarget });\n        }\n        var eleObj = this.checkTargetElement(evt);\n        if (eleObj.target && eleObj.instance) {\n            /* tslint:disable no-any */\n            var flag = true;\n            if (this.hoverObject) {\n                if (this.hoverObject.instance !== eleObj.instance) {\n                    this.triggerOutFunction(evt, eleObj);\n                }\n                else {\n                    flag = false;\n                }\n            }\n            if (flag) {\n                eleObj.instance.dragData[this.scope] = this.droppables[this.scope];\n                eleObj.instance.intOver(evt, eleObj.target);\n                this.hoverObject = eleObj;\n            }\n        }\n        else if (this.hoverObject) {\n            this.triggerOutFunction(evt, eleObj);\n        }\n        var helperElement = this.droppables[this.scope].helper;\n        this.parentClientRect = this.calculateParentPosition(this.helperElement.offsetParent);\n        var tLeft = this.parentClientRect.left;\n        var tTop = this.parentClientRect.top;\n        var intCoord = this.getCoordinates(evt);\n        var pagex = intCoord.pageX;\n        var pagey = intCoord.pageY;\n        var dLeft = this.position.left - this.diffX;\n        var dTop = this.position.top - this.diffY;\n        var styles = getComputedStyle(helperElement);\n        if (this.dragArea) {\n            if (this.pageX !== pagex || this.skipDistanceCheck) {\n                var helperWidth = helperElement.offsetWidth + (parseFloat(styles.marginLeft)\n                    + parseFloat(styles.marginRight));\n                if (this.dragLimit.left > dLeft && dLeft > 0) {\n                    left = this.dragLimit.left;\n                }\n                else if (this.dragLimit.right + window.pageXOffset < dLeft + helperWidth && dLeft > 0) {\n                    left = dLeft - (dLeft - this.dragLimit.right) + window.pageXOffset - helperWidth;\n                }\n                else {\n                    left = dLeft < 0 ? this.dragLimit.left : dLeft;\n                }\n            }\n            if (this.pageY !== pagey || this.skipDistanceCheck) {\n                var helperHeight = helperElement.offsetHeight + (parseFloat(styles.marginTop)\n                    + parseFloat(styles.marginBottom));\n                if (this.dragLimit.top > dTop && dTop > 0) {\n                    top = this.dragLimit.top;\n                }\n                else if (this.dragLimit.bottom + window.pageYOffset < dTop + helperHeight && dTop > 0) {\n                    top = dTop - (dTop - this.dragLimit.bottom) + window.pageYOffset - helperHeight;\n                }\n                else {\n                    top = dTop < 0 ? this.dragLimit.top : dTop;\n                }\n            }\n        }\n        else {\n            left = dLeft;\n            top = dTop;\n        }\n        var iTop = tTop + this.borderWidth.top;\n        var iLeft = tLeft + this.borderWidth.left;\n        if (this.dragProcessStarted) {\n            if (isNullOrUndefined(top)) {\n                top = this.prevTop;\n            }\n            if (isNullOrUndefined(left)) {\n                left = this.prevLeft;\n            }\n        }\n        var draEleTop;\n        var draEleLeft;\n        if (this.helperElement.classList.contains('e-treeview')) {\n            if (this.dragArea) {\n                this.dragLimit.top = this.clone ? this.dragLimit.top : 0;\n                draEleTop = (top - iTop) < 0 ? this.dragLimit.top : (top - this.borderWidth.top);\n                draEleLeft = (left - iLeft) < 0 ? this.dragLimit.left : (left - this.borderWidth.left);\n            }\n            else {\n                draEleTop = top - this.borderWidth.top;\n                draEleLeft = left - this.borderWidth.left;\n            }\n        }\n        else {\n            if (this.dragArea) {\n                var isDialogEle = this.helperElement.classList.contains('e-dialog');\n                this.dragLimit.top = this.clone ? this.dragLimit.top : 0;\n                draEleTop = (top - iTop) < 0 ? this.dragLimit.top : (top - iTop);\n                draEleLeft = (left - iLeft) < 0 ? isDialogEle ? (left - (iLeft - this.borderWidth.left)) :\n                    this.dragElePosition.left : (left - iLeft);\n            }\n            else {\n                draEleTop = top - iTop;\n                draEleLeft = left - iLeft;\n            }\n        }\n        var marginTop = parseFloat(getComputedStyle(this.element).marginTop);\n        // when drag-element has margin-top\n        /* istanbul ignore next */\n        if (marginTop > 0) {\n            if (this.clone) {\n                draEleTop += marginTop;\n                if (dTop < 0) {\n                    if ((marginTop + dTop) >= 0) {\n                        draEleTop = marginTop + dTop;\n                    }\n                    else {\n                        draEleTop -= marginTop;\n                    }\n                }\n                draEleTop = (this.dragLimit.bottom < draEleTop) ? this.dragLimit.bottom : draEleTop;\n            }\n            if ((top - iTop) < 0) {\n                if (dTop + marginTop + (helperElement.offsetHeight - iTop) >= 0) {\n                    var tempDraEleTop = this.dragLimit.top + dTop - iTop;\n                    if ((tempDraEleTop + marginTop + iTop) < 0) {\n                        draEleTop -= marginTop + iTop;\n                    }\n                    else {\n                        draEleTop = tempDraEleTop;\n                    }\n                }\n                else {\n                    draEleTop -= marginTop + iTop;\n                }\n            }\n        }\n        if (this.dragArea && this.helperElement.classList.contains('e-treeview')) {\n            var helperHeight = helperElement.offsetHeight + (parseFloat(styles.marginTop)\n                + parseFloat(styles.marginBottom));\n            draEleTop = (draEleTop + helperHeight) > this.dragLimit.bottom ? (this.dragLimit.bottom - helperHeight) : draEleTop;\n        }\n        /* istanbul ignore next */\n        // if(this.eleTop > 0) {\n        //      draEleTop += this.eleTop;\n        // }\n        if (this.enableScrollHandler && !this.clone) {\n            draEleTop -= this.parentScrollY;\n            draEleLeft -= this.parentScrollX;\n        }\n        if (this.dragArea && typeof this.dragArea !== 'string' && this.dragArea.classList.contains('e-kanban-content') && this.dragArea.style.position === 'relative') {\n            draEleTop += this.dragArea.scrollTop;\n        }\n        var dragValue = this.getProcessedPositionValue({ top: draEleTop + 'px', left: draEleLeft + 'px' });\n        setStyleAttribute(helperElement, this.getDragPosition(dragValue));\n        if (!this.elementInViewport(helperElement) && this.enableAutoScroll && !this.helperElement.classList.contains('e-treeview')) {\n            this.helperElement.scrollIntoView();\n        }\n        var elements = document.querySelectorAll(':hover');\n        if (this.enableAutoScroll && this.helperElement.classList.contains('e-treeview')) {\n            if (elements.length === 0) {\n                elements = this.getPathElements(evt);\n            }\n            /* tslint:disable no-any */\n            var scrollParent = this.getScrollParent(elements, false);\n            if (this.elementInViewport(this.helperElement)) {\n                this.getScrollPosition(scrollParent, draEleTop);\n            }\n            else if (!this.elementInViewport(this.helperElement)) {\n                elements = [].slice.call(document.querySelectorAll(':hover'));\n                if (elements.length === 0) {\n                    elements = this.getPathElements(evt);\n                }\n                scrollParent = this.getScrollParent(elements, true);\n                this.getScrollPosition(scrollParent, draEleTop);\n            }\n        }\n        this.dragProcessStarted = true;\n        this.prevLeft = left;\n        this.prevTop = top;\n        this.position.left = left;\n        this.position.top = top;\n        this.pageX = pagex;\n        this.pageY = pagey;\n    };\n    /* tslint:disable no-any */\n    Draggable.prototype.getScrollParent = function (node, reverse) {\n        /* tslint:disable no-any */\n        var nodeEl = reverse ? node.reverse() : node;\n        var hasScroll;\n        for (var i = nodeEl.length - 1; i >= 0; i--) {\n            hasScroll = window.getComputedStyle(nodeEl[parseInt(i.toString(), 10)])['overflow-y'];\n            if ((hasScroll === 'auto' || hasScroll === 'scroll')\n                && nodeEl[parseInt(i.toString(), 10)].scrollHeight > nodeEl[parseInt(i.toString(), 10)].clientHeight) {\n                return nodeEl[parseInt(i.toString(), 10)];\n            }\n        }\n        hasScroll = window.getComputedStyle(document.scrollingElement)['overflow-y'];\n        if (hasScroll === 'visible') {\n            document.scrollingElement.style.overflow = 'auto';\n            return document.scrollingElement;\n        }\n    };\n    Draggable.prototype.getScrollPosition = function (nodeEle, draEleTop) {\n        if (nodeEle && nodeEle === document.scrollingElement) {\n            if ((nodeEle.clientHeight + document.scrollingElement.scrollTop - this.helperElement.clientHeight) < draEleTop\n                && nodeEle.getBoundingClientRect().height + this.parentClientRect.top > draEleTop) {\n                nodeEle.scrollTop += this.helperElement.clientHeight;\n            }\n            else if (nodeEle.scrollTop > draEleTop - this.helperElement.clientHeight) {\n                nodeEle.scrollTop -= this.helperElement.clientHeight;\n            }\n        }\n        else if (nodeEle && nodeEle !== document.scrollingElement) {\n            if ((nodeEle.clientHeight + nodeEle.getBoundingClientRect().top - this.helperElement.clientHeight + document.scrollingElement.scrollTop) < draEleTop) {\n                nodeEle.scrollTop += this.helperElement.clientHeight;\n            }\n            else if (nodeEle.getBoundingClientRect().top > (draEleTop - this.helperElement.clientHeight - document.scrollingElement.scrollTop)) {\n                nodeEle.scrollTop -= this.helperElement.clientHeight;\n            }\n        }\n    };\n    Draggable.prototype.getPathElements = function (evt) {\n        var elementTop = evt.clientX > 0 ? evt.clientX : 0;\n        var elementLeft = evt.clientY > 0 ? evt.clientY : 0;\n        return document.elementsFromPoint(elementTop, elementLeft);\n    };\n    Draggable.prototype.triggerOutFunction = function (evt, eleObj) {\n        this.hoverObject.instance.intOut(evt, eleObj.target);\n        this.hoverObject.instance.dragData[this.scope] = null;\n        this.hoverObject = null;\n    };\n    Draggable.prototype.getDragPosition = function (dragValue) {\n        var temp = extend({}, dragValue);\n        if (this.axis) {\n            if (this.axis === 'x') {\n                delete temp.top;\n            }\n            else if (this.axis === 'y') {\n                delete temp.left;\n            }\n        }\n        return temp;\n    };\n    Draggable.prototype.getDocumentWidthHeight = function (str) {\n        var docBody = document.body;\n        var docEle = document.documentElement;\n        var returnValue = Math.max(docBody['scroll' + str], docEle['scroll' + str], docBody['offset' + str], docEle['offset' + str], docEle['client' + str]);\n        return returnValue;\n    };\n    Draggable.prototype.intDragStop = function (evt) {\n        this.dragProcessStarted = false;\n        if (!isUndefined(evt.changedTouches) && (evt.changedTouches.length !== 1)) {\n            return;\n        }\n        var type = ['touchend', 'pointerup', 'mouseup'];\n        if (type.indexOf(evt.type) !== -1) {\n            if (this.dragStop) {\n                var curTarget = this.getProperTargetElement(evt);\n                this.trigger('dragStop', { event: evt, element: this.element, target: curTarget, helper: this.helperElement });\n            }\n            this.intDestroy(evt);\n        }\n        else {\n            this.element.setAttribute('aria-grabbed', 'false');\n        }\n        var eleObj = this.checkTargetElement(evt);\n        if (eleObj.target && eleObj.instance) {\n            eleObj.instance.dragStopCalled = true;\n            eleObj.instance.dragData[this.scope] = this.droppables[this.scope];\n            eleObj.instance.intDrop(evt, eleObj.target);\n        }\n        this.setGlobalDroppables(true);\n        document.body.classList.remove('e-prevent-select');\n    };\n    /**\n     * @private\n     */\n    Draggable.prototype.intDestroy = function (evt) {\n        this.dragProcessStarted = false;\n        this.toggleEvents();\n        document.body.classList.remove('e-prevent-select');\n        this.element.setAttribute('aria-grabbed', 'false');\n        EventHandler.remove(document, Browser.isSafari() ? 'touchmove' : Browser.touchMoveEvent, this.intDragStart);\n        EventHandler.remove(document, Browser.isSafari() ? 'touchend' : Browser.touchEndEvent, this.intDragStop);\n        EventHandler.remove(document, Browser.isSafari() ? 'touchend' : Browser.touchEndEvent, this.intDestroy);\n        EventHandler.remove(document, Browser.isSafari() ? 'touchmove' : Browser.touchMoveEvent, this.intDrag);\n        if (this.isDragStarted()) {\n            this.isDragStarted(true);\n        }\n    };\n    // triggers when property changed\n    Draggable.prototype.onPropertyChanged = function (newProp, oldProp) {\n        //No Code to handle\n    };\n    Draggable.prototype.getModuleName = function () {\n        return 'draggable';\n    };\n    Draggable.prototype.isDragStarted = function (change) {\n        if (change) {\n            isDraggedObject.isDragged = !isDraggedObject.isDragged;\n        }\n        return isDraggedObject.isDragged;\n    };\n    Draggable.prototype.setDragArea = function () {\n        var eleWidthBound;\n        var eleHeightBound;\n        var top = 0;\n        var left = 0;\n        var ele;\n        var type = typeof this.dragArea;\n        if (type === 'string') {\n            ele = select(this.dragArea);\n        }\n        else {\n            ele = this.dragArea;\n        }\n        if (ele) {\n            var elementArea = ele.getBoundingClientRect();\n            eleWidthBound = ele.scrollWidth ? ele.scrollWidth : elementArea.right - elementArea.left;\n            eleHeightBound = ele.scrollHeight ? (this.dragArea && !isNullOrUndefined(this.helperElement) && this.helperElement.classList.contains('e-treeview')) ? ele.clientHeight : ele.scrollHeight : elementArea.bottom - elementArea.top;\n            var keys = ['Top', 'Left', 'Bottom', 'Right'];\n            var styles = getComputedStyle(ele);\n            for (var i = 0; i < keys.length; i++) {\n                var key = keys[parseInt(i.toString(), 10)];\n                var tborder = styles['border' + key + 'Width'];\n                var tpadding = styles['padding' + key];\n                var lowerKey = key.toLowerCase();\n                this.borderWidth[\"\" + lowerKey] = isNaN(parseFloat(tborder)) ? 0 : parseFloat(tborder);\n                this.padding[\"\" + lowerKey] = isNaN(parseFloat(tpadding)) ? 0 : parseFloat(tpadding);\n            }\n            if (this.dragArea && !isNullOrUndefined(this.helperElement) && this.helperElement.classList.contains('e-treeview')) {\n                top = elementArea.top + document.scrollingElement.scrollTop;\n            }\n            else {\n                top = elementArea.top;\n            }\n            left = elementArea.left;\n            this.dragLimit.left = left + this.borderWidth.left + this.padding.left;\n            this.dragLimit.top = ele.offsetTop + this.borderWidth.top + this.padding.top;\n            this.dragLimit.right = left + eleWidthBound - (this.borderWidth.right + this.padding.right);\n            this.dragLimit.bottom = top + eleHeightBound - (this.borderWidth.bottom + this.padding.bottom);\n        }\n    };\n    Draggable.prototype.getProperTargetElement = function (evt) {\n        var intCoord = this.getCoordinates(evt);\n        var ele;\n        var prevStyle = this.helperElement.style.pointerEvents || '';\n        var isPointer = evt.type.indexOf('pointer') !== -1 && Browser.info.name === 'safari' && parseInt(Browser.info.version) > 12;\n        if (compareElementParent(evt.target, this.helperElement) || evt.type.indexOf('touch') !== -1 || isPointer) {\n            this.helperElement.style.pointerEvents = 'none';\n            ele = document.elementFromPoint(intCoord.clientX, intCoord.clientY);\n            this.helperElement.style.pointerEvents = prevStyle;\n        }\n        else {\n            ele = evt.target;\n        }\n        return ele;\n    };\n    /* istanbul ignore next */\n    Draggable.prototype.currentStateCheck = function (ele, oldEle) {\n        var elem;\n        if (!isNullOrUndefined(this.currentStateTarget) && this.currentStateTarget !== ele) {\n            elem = this.currentStateTarget;\n        }\n        else {\n            elem = !isNullOrUndefined(oldEle) ? oldEle : ele;\n        }\n        return elem;\n    };\n    Draggable.prototype.getMousePosition = function (evt, isdragscroll) {\n        /* tslint:disable no-any */\n        var dragEle = evt.srcElement !== undefined ? evt.srcElement : evt.target;\n        var intCoord = this.getCoordinates(evt);\n        var pageX;\n        var pageY;\n        var isOffsetParent = isNullOrUndefined(dragEle.offsetParent);\n        /* istanbul ignore next */\n        if (isdragscroll) {\n            pageX = this.clone ? intCoord.pageX :\n                (intCoord.pageX + (isOffsetParent ? 0 : dragEle.offsetParent.scrollLeft)) - this.relativeXPosition;\n            pageY = this.clone ? intCoord.pageY :\n                (intCoord.pageY + (isOffsetParent ? 0 : dragEle.offsetParent.scrollTop)) - this.relativeYPosition;\n        }\n        else {\n            pageX = this.clone ? intCoord.pageX : (intCoord.pageX + window.pageXOffset) - this.relativeXPosition;\n            pageY = this.clone ? intCoord.pageY : (intCoord.pageY + window.pageYOffset) - this.relativeYPosition;\n        }\n        if (document.scrollingElement && (!isdragscroll && !this.clone)) {\n            var isVerticalScroll = document.scrollingElement.scrollHeight > 0 && document.scrollingElement.scrollHeight > document.scrollingElement.clientHeight && document.scrollingElement.scrollTop > 0;\n            var isHorrizontalScroll = document.scrollingElement.scrollWidth > 0 && document.scrollingElement.scrollWidth > document.scrollingElement.clientWidth && document.scrollingElement.scrollLeft > 0;\n            pageX = isHorrizontalScroll ? pageX - document.scrollingElement.scrollLeft : pageX;\n            pageY = isVerticalScroll ? pageY - document.scrollingElement.scrollTop : pageY;\n        }\n        return {\n            left: pageX - (this.margin.left + this.cursorAt.left),\n            top: pageY - (this.margin.top + this.cursorAt.top)\n        };\n    };\n    Draggable.prototype.getCoordinates = function (evt) {\n        if (evt.type.indexOf('touch') > -1) {\n            return evt.changedTouches[0];\n        }\n        return evt;\n    };\n    Draggable.prototype.getHelperElement = function (evt) {\n        var element;\n        if (this.clone) {\n            if (this.helper) {\n                element = this.helper({ sender: evt, element: this.target });\n            }\n            else {\n                element = createElement('div', { className: 'e-drag-helper e-block-touch', innerHTML: 'Draggable' });\n                document.body.appendChild(element);\n            }\n        }\n        else {\n            element = this.element;\n        }\n        return element;\n    };\n    Draggable.prototype.setGlobalDroppables = function (reset, drag, helper) {\n        this.droppables[this.scope] = reset ? null : {\n            draggable: drag,\n            helper: helper,\n            draggedElement: this.element\n        };\n    };\n    Draggable.prototype.checkTargetElement = function (evt) {\n        var target = this.getProperTargetElement(evt);\n        var dropIns = this.getDropInstance(target);\n        if (!dropIns && target && !isNullOrUndefined(target.parentNode)) {\n            var parent_1 = closest(target.parentNode, '.e-droppable') || target.parentElement;\n            if (parent_1) {\n                dropIns = this.getDropInstance(parent_1);\n            }\n        }\n        return { target: target, instance: dropIns };\n    };\n    Draggable.prototype.getDropInstance = function (ele) {\n        var name = 'getModuleName';\n        var drop;\n        var eleInst = ele && ele.ej2_instances;\n        if (eleInst) {\n            for (var _i = 0, eleInst_1 = eleInst; _i < eleInst_1.length; _i++) {\n                var inst = eleInst_1[_i];\n                if (inst[\"\" + name]() === 'droppable') {\n                    drop = inst;\n                    break;\n                }\n            }\n        }\n        return drop;\n    };\n    Draggable.prototype.destroy = function () {\n        this.toggleEvents(true);\n        _super.prototype.destroy.call(this);\n    };\n    var Draggable_1;\n    __decorate([\n        Complex({}, Position)\n    ], Draggable.prototype, \"cursorAt\", void 0);\n    __decorate([\n        Property(true)\n    ], Draggable.prototype, \"clone\", void 0);\n    __decorate([\n        Property()\n    ], Draggable.prototype, \"dragArea\", void 0);\n    __decorate([\n        Property()\n    ], Draggable.prototype, \"isDragScroll\", void 0);\n    __decorate([\n        Property()\n    ], Draggable.prototype, \"isReplaceDragEle\", void 0);\n    __decorate([\n        Property(true)\n    ], Draggable.prototype, \"isPreventSelect\", void 0);\n    __decorate([\n        Event()\n    ], Draggable.prototype, \"drag\", void 0);\n    __decorate([\n        Event()\n    ], Draggable.prototype, \"dragStart\", void 0);\n    __decorate([\n        Event()\n    ], Draggable.prototype, \"dragStop\", void 0);\n    __decorate([\n        Property(1)\n    ], Draggable.prototype, \"distance\", void 0);\n    __decorate([\n        Property()\n    ], Draggable.prototype, \"handle\", void 0);\n    __decorate([\n        Property()\n    ], Draggable.prototype, \"abort\", void 0);\n    __decorate([\n        Property()\n    ], Draggable.prototype, \"helper\", void 0);\n    __decorate([\n        Property('default')\n    ], Draggable.prototype, \"scope\", void 0);\n    __decorate([\n        Property('')\n    ], Draggable.prototype, \"dragTarget\", void 0);\n    __decorate([\n        Property()\n    ], Draggable.prototype, \"axis\", void 0);\n    __decorate([\n        Property()\n    ], Draggable.prototype, \"queryPositionInfo\", void 0);\n    __decorate([\n        Property(false)\n    ], Draggable.prototype, \"enableTailMode\", void 0);\n    __decorate([\n        Property(false)\n    ], Draggable.prototype, \"skipDistanceCheck\", void 0);\n    __decorate([\n        Property(true)\n    ], Draggable.prototype, \"preventDefault\", void 0);\n    __decorate([\n        Property(false)\n    ], Draggable.prototype, \"enableAutoScroll\", void 0);\n    __decorate([\n        Property(false)\n    ], Draggable.prototype, \"enableTapHold\", void 0);\n    __decorate([\n        Property(750)\n    ], Draggable.prototype, \"tapHoldThreshold\", void 0);\n    __decorate([\n        Property(false)\n    ], Draggable.prototype, \"enableScrollHandler\", void 0);\n    Draggable = Draggable_1 = __decorate([\n        NotifyPropertyChanges\n    ], Draggable);\n    return Draggable;\n}(Base));\nexport { Draggable };\n"]},"metadata":{},"sourceType":"module"}