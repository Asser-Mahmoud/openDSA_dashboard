{"ast":null,"code":"/* eslint-disable @typescript-eslint/ban-types */\n\n/* eslint-disable @typescript-eslint/no-inferrable-types */\nimport { EventHandler, Browser, remove } from '@syncfusion/ej2-base';\nimport { ScrollElements, createScrollSvg } from './scrollbar-elements';\nimport { getElement, minMax, logBase } from '../utils/helper';\nimport { getScrollbarThemeColor } from '../model/theme';\nimport { scrollChanged, scrollEnd, scrollStart } from '../model/constants';\n/**\r\n * Scrollbar Base\r\n */\n\nvar ScrollBar =\n/** @class */\nfunction () {\n  /**\r\n   * Constructor for creating scrollbar\r\n   *\r\n   * @param component\r\n   * @param axis\r\n   */\n  function ScrollBar(component, axis) {\n    /** @private */\n    this.scrollRange = {\n      max: null,\n      min: null,\n      interval: null,\n      delta: null\n    };\n    this.component = component;\n    this.elements = [];\n    this.scrollElements = new ScrollElements(component);\n    this.axis = axis;\n    this.mouseMoveListener = this.scrollMouseMove.bind(this);\n    this.mouseUpListener = this.scrollMouseUp.bind(this);\n    this.animateDuration = 500;\n    this.isPointer = Browser.isPointer;\n    this.browserName = Browser.info.name;\n  }\n  /**\r\n   * To Mouse x and y position\r\n   *\r\n   * @param e\r\n   */\n\n\n  ScrollBar.prototype.getMouseXY = function (e) {\n    var pageX;\n    var pageY;\n    var touchArg;\n\n    if (e.type.indexOf('touch') > -1) {\n      touchArg = e;\n      pageX = touchArg.changedTouches[0].clientX;\n      pageY = touchArg.changedTouches[0].clientY;\n    } else {\n      pageX = e.clientX;\n      pageY = e.clientY;\n    }\n\n    var svgRect = getElement(this.component.element.id + '_scrollBar_svg' + this.axis.name).getBoundingClientRect();\n    this.mouseX = pageX - Math.max(svgRect.left, 0);\n    this.mouseY = pageY - Math.max(svgRect.top, 0);\n  };\n  /**\r\n   * Method to bind events for scrollbar svg object\r\n   *\r\n   * @param element\r\n   * @returns {void}\r\n   */\n\n\n  ScrollBar.prototype.wireEvents = function (element) {\n    EventHandler.add(element, Browser.touchStartEvent, this.scrollMouseDown, this);\n    EventHandler.add(element, Browser.touchMoveEvent, this.scrollMouseMove, this);\n    EventHandler.add(element, Browser.touchEndEvent, this.scrollMouseUp, this);\n    EventHandler.add(element, 'mousewheel', this.scrollMouseWheel, this);\n    window.addEventListener('mousemove', this.mouseMoveListener, false);\n    window.addEventListener('mouseup', this.mouseUpListener, false);\n  };\n  /**\r\n   * Method to remove events for srcollbar svg object\r\n   *\r\n   * @param element\r\n   */\n\n\n  ScrollBar.prototype.unWireEvents = function (element) {\n    EventHandler.remove(element, Browser.touchStartEvent, this.scrollMouseDown);\n    EventHandler.remove(element, Browser.touchMoveEvent, this.scrollMouseMove);\n    EventHandler.remove(element, Browser.touchEndEvent, this.scrollMouseUp);\n    EventHandler.remove(element, 'mousewheel', this.scrollMouseWheel);\n    window.removeEventListener('mousemove', this.mouseMoveListener, false);\n    window.removeEventListener('mouseup', this.mouseUpListener, false);\n  };\n  /**\r\n   * Handles the mouse down on scrollbar\r\n   *\r\n   * @param e\r\n   */\n\n\n  ScrollBar.prototype.scrollMouseDown = function (e) {\n    var id = e.target.id;\n    var elem = this.scrollElements;\n    var isInverse = this.axis.isAxisInverse;\n    this.getMouseXY(e);\n    this.isResizeLeft = this.isExist(id, '_leftCircle_') || this.isExist(id, '_leftArrow_');\n    this.isResizeRight = this.isExist(id, '_rightCircle_') || this.isExist(id, '_rightArrow_'); //  this.previousXY = this.isVertical ? this.mouseY : this.mouseX;\n\n    this.previousXY = this.isVertical && isInverse ? this.mouseY : this.isVertical ? this.width - this.mouseY : isInverse ? this.width - this.mouseX : this.mouseX;\n    this.previousWidth = elem.thumbRectWidth;\n    this.previousRectX = elem.thumbRectX;\n    this.startZoomPosition = this.axis.zoomPosition;\n    this.startZoomFactor = this.axis.zoomFactor;\n    this.startRange = this.axis.visibleRange;\n    this.scrollStarted = true;\n    this.component.trigger(scrollStart, this.getArgs(scrollStart));\n\n    if (this.isExist(id, 'scrollBarThumb_') || this.isExist(id, 'gripCircle')) {\n      this.isThumbDrag = true;\n      this.svgObject.style.cursor = '-webkit-grabbing';\n    } else if (this.isExist(id, 'scrollBarBackRect_')) {\n      var currentX = this.moveLength(this.previousXY, this.previousRectX);\n      elem.thumbRectX = this.isWithIn(currentX) ? currentX : elem.thumbRectX;\n      this.positionThumb(elem.thumbRectX, elem.thumbRectWidth);\n      this.setZoomFactorPosition(elem.thumbRectX, elem.thumbRectWidth, false);\n\n      if (this.isLazyLoad) {\n        var thumbMove = elem.thumbRectX > this.previousRectX ? 'RightMove' : 'LeftMove';\n        var args = this.calculateLazyRange(elem.thumbRectX, elem.thumbRectWidth, thumbMove);\n\n        if (args) {\n          this.component.trigger(scrollEnd, args);\n        }\n      }\n    }\n    /**\r\n     * Customer issue\r\n     * Task ID - EJ2-28898\r\n     * Issue: While element's height is smaller than chart'height, html scroll bar presents. On that case while moving chart scrollbar,\r\n     * html scrollbar goes up due to chart's svg removed from the dom when zoomFactor and zoomPosition chnaged\r\n     * Fix: Only for scrolling purpose, height for element is set to chart's available height\r\n     */\n\n\n    if (this.component.element.style.height === '') {\n      this.isCustomHeight = true;\n      this.component.element.style.height = this.component.availableSize.height + 'px';\n    }\n  };\n  /**\r\n   * To check the matched string\r\n   *\r\n   * @param id\r\n   * @param match\r\n   */\n\n\n  ScrollBar.prototype.isExist = function (id, match) {\n    return id.indexOf(match) > -1;\n  };\n  /**\r\n   * To check current poisition is within scrollbar region\r\n   *\r\n   * @param currentX\r\n   */\n\n\n  ScrollBar.prototype.isWithIn = function (currentX) {\n    var circleRadius = 8;\n    return currentX - circleRadius >= 0 && currentX + this.scrollElements.thumbRectWidth + circleRadius <= this.width;\n  };\n  /**\r\n   * Method to find move length of thumb\r\n   *\r\n   * @param mouseXY\r\n   * @param thumbX\r\n   * @param circleRadius\r\n   */\n\n\n  ScrollBar.prototype.moveLength = function (mouseXY, thumbX, circleRadius) {\n    if (circleRadius === void 0) {\n      circleRadius = 8;\n    }\n\n    var moveLength = 10 / 100 * (this.width - circleRadius * 2);\n\n    if (mouseXY < thumbX) {\n      moveLength = thumbX - (thumbX - moveLength > circleRadius ? moveLength : circleRadius);\n    } else {\n      moveLength = thumbX + (thumbX + this.scrollElements.thumbRectWidth + moveLength < this.width - circleRadius ? moveLength : circleRadius);\n    }\n\n    return moveLength;\n  };\n  /**\r\n   * Method to calculate zoom factor and position\r\n   *\r\n   * @param currentX\r\n   * @param currentWidth\r\n   */\n\n\n  ScrollBar.prototype.setZoomFactorPosition = function (currentX, currentWidth, isRequire) {\n    if (isRequire === void 0) {\n      isRequire = true;\n    }\n\n    this.isScrollUI = true;\n    var axis = this.axis;\n    var circleRadius = 8;\n    var circleWidth = 1;\n    var currentScrollWidth = currentX + currentWidth + circleRadius + circleWidth;\n    var currentZPWidth = circleRadius + circleWidth / 2;\n    this.zoomPosition = (currentX - (currentX - currentZPWidth <= 0 ? currentZPWidth : 0)) / (this.isVertical ? axis.rect.height : this.width);\n    this.zoomFactor = (currentWidth + (currentScrollWidth >= this.width ? circleRadius + circleWidth : 0)) / (this.isVertical ? axis.rect.height : this.width);\n    axis.zoomPosition = this.zoomPosition < 0 ? 0 : this.zoomPosition > 0.9 ? 1 : this.zoomPosition;\n    axis.zoomFactor = isRequire ? this.zoomFactor : axis.zoomFactor;\n  };\n  /**\r\n   * Handles the mouse move on scrollbar\r\n   *\r\n   * @param e\r\n   */\n\n\n  ScrollBar.prototype.scrollMouseMove = function (e) {\n    var target = e.target;\n    var elem = this.scrollElements;\n    var isInverse = this.axis.isAxisInverse;\n\n    if (!getElement(this.svgObject.id)) {\n      return null;\n    }\n\n    this.getMouseXY(e);\n    this.setCursor(target);\n    this.setTheme(target); //let mouseXY: number = this.isVertical ? this.mouseY : this.mouseX;\n\n    var mouseXY = this.isVertical && isInverse ? this.width - this.mouseY : this.isVertical ? this.mouseY : this.mouseX;\n    var range = this.axis.visibleRange;\n    var zoomPosition = this.zoomPosition;\n    var zoomFactor = this.zoomFactor;\n    var moveLength = this.previousRectX - elem.thumbRectX;\n    var thumbMove = moveLength < 0 ? 'RightMove' : 'LeftMove';\n    var args;\n\n    if (this.isLazyLoad && (this.isThumbDrag || this.isResizeLeft || this.isResizeRight)) {\n      args = this.calculateLazyRange(elem.thumbRectX, elem.thumbRectWidth, thumbMove);\n    }\n\n    var currentRange = args ? args.currentRange : null;\n\n    if (this.isThumbDrag) {\n      this.component.isScrolling = this.isThumbDrag;\n      mouseXY = this.isVertical || isInverse ? this.width - mouseXY : mouseXY;\n      var currentX = elem.thumbRectX + (mouseXY - this.previousXY);\n\n      if (mouseXY >= currentX + elem.thumbRectWidth) {\n        this.setCursor(target);\n      } else {\n        this.svgObject.style.cursor = '-webkit-grabbing';\n      }\n\n      if (mouseXY >= 0 && mouseXY <= currentX + elem.thumbRectWidth) {\n        elem.thumbRectX = this.isWithIn(currentX) ? currentX : elem.thumbRectX;\n        this.positionThumb(elem.thumbRectX, elem.thumbRectWidth);\n        this.previousXY = mouseXY;\n        this.setZoomFactorPosition(currentX, elem.thumbRectWidth, false);\n      }\n\n      this.component.trigger(scrollChanged, this.getArgs(scrollChanged, range, zoomPosition, zoomFactor, currentRange));\n    } else if (this.isResizeLeft || this.isResizeRight) {\n      this.resizeThumb();\n      this.component.trigger(scrollChanged, this.getArgs(scrollChanged, range, zoomPosition, zoomFactor, currentRange));\n    }\n  };\n  /**\r\n   * Handles the mouse wheel on scrollbar\r\n   *\r\n   * @param e\r\n   */\n\n\n  ScrollBar.prototype.scrollMouseWheel = function (e) {\n    var svgRect = getElement(this.component.element.id + '_scrollBar_svg' + this.axis.name).getBoundingClientRect();\n    this.mouseX = e.clientX - Math.max(svgRect.left, 0);\n    this.mouseY = e.clientY - Math.max(svgRect.top, 0);\n    var origin = 0.5;\n    var elem = this.scrollElements;\n    var axis = this.axis;\n    var direction = this.browserName === 'mozilla' && !this.isPointer ? -e.detail / 3 > 0 ? 1 : -1 : e['wheelDelta'] / 120 > 0 ? 1 : -1;\n    var cumulative = Math.max(Math.max(1 / minMax(axis.zoomFactor, 0, 1), 1) + 0.25 * direction, 1);\n    var range = this.axis.visibleRange;\n    var zoomPosition = this.zoomPosition;\n    var zoomFactor = this.zoomFactor;\n    var args;\n\n    if (cumulative >= 1) {\n      origin = axis.orientation === 'Horizontal' ? this.mouseX / axis.rect.width : 1 - this.mouseY / axis.rect.height;\n      origin = origin > 1 ? 1 : origin < 0 ? 0 : origin;\n      this.zoomFactor = cumulative === 1 ? 1 : minMax(1 / cumulative, 0, 1);\n      this.zoomPosition = cumulative === 1 ? 0 : axis.zoomPosition + (axis.zoomFactor - this.zoomFactor) * origin;\n    }\n\n    elem.thumbRectX = this.isWithIn(this.zoomPosition * this.width) ? this.zoomPosition * this.width : elem.thumbRectX;\n    this.isScrollUI = true;\n    this.positionThumb(elem.thumbRectX, elem.thumbRectWidth);\n\n    if (this.isLazyLoad) {\n      this.setZoomFactorPosition(elem.thumbRectX, elem.thumbRectWidth);\n    }\n\n    axis.zoomFactor = this.zoomFactor;\n    axis.zoomPosition = this.zoomPosition;\n\n    if (this.isLazyLoad) {\n      args = this.calculateMouseWheelRange(elem.thumbRectX, elem.thumbRectWidth);\n\n      if (args) {\n        if (args.currentRange.minimum !== args.previousAxisRange.minimum && args.currentRange.maximum !== args.previousAxisRange.maximum) {\n          this.component.trigger(scrollEnd, args);\n          this.isScrollEnd = false;\n        }\n      }\n    }\n\n    if (!this.isLazyLoad) {\n      this.component.trigger(scrollChanged, this.getArgs(scrollChanged, range, zoomPosition, zoomFactor));\n    }\n  };\n  /**\r\n   * Handles the mouse up on scrollbar\r\n   *\r\n   * @param e\r\n   */\n\n\n  ScrollBar.prototype.scrollMouseUp = function () {\n    var args;\n    this.startX = this.scrollElements.thumbRectX;\n    var circleRadius = 8;\n    var circleWidth = 1;\n    var currentScrollWidth = this.startX + this.scrollElements.thumbRectWidth + circleRadius + circleWidth;\n    var currentZPWidth = circleRadius + circleWidth / 2;\n\n    if ((this.isResizeLeft || this.isResizeRight) && !this.isLazyLoad) {\n      this.axis.zoomFactor = currentScrollWidth >= this.width - 1 && this.startX - currentZPWidth <= 0 ? 1 : this.zoomFactor;\n    }\n\n    if (this.isLazyLoad) {\n      var moveLength = this.previousRectX - this.startX;\n\n      if ((moveLength > 0 || moveLength < 0) && this.isThumbDrag) {\n        var thumbMove = moveLength < 0 ? 'RightMove' : 'LeftMove';\n\n        if (thumbMove === 'RightMove') {\n          this.startX = this.startX + Math.abs(moveLength) < this.width - circleRadius ? this.startX : this.width - circleRadius - this.scrollElements.thumbRectWidth;\n        } else {\n          this.startX = this.startX + this.scrollElements.thumbRectWidth - Math.abs(moveLength) > circleRadius ? this.startX : circleRadius;\n        }\n\n        args = this.calculateLazyRange(this.startX, this.scrollElements.thumbRectWidth, thumbMove);\n\n        if (args) {\n          this.component.trigger(scrollEnd, args);\n          this.scrollStarted = false;\n        }\n      }\n\n      if (this.isResizeLeft || this.isResizeRight) {\n        args = this.calculateLazyRange(this.startX, this.scrollElements.thumbRectWidth);\n\n        if (args) {\n          this.component.trigger(scrollEnd, args);\n          this.scrollStarted = false;\n        }\n      }\n    }\n\n    this.isThumbDrag = false;\n    this.isResizeLeft = false;\n    this.isResizeRight = false;\n    this.isScrollEnd = false;\n    this.component.isScrolling = false;\n\n    if (this.scrollStarted && !this.isLazyLoad) {\n      this.component.trigger(scrollEnd, this.getArgs(scrollChanged, this.startRange, this.startZoomPosition, this.startZoomFactor));\n      this.scrollStarted = false;\n    }\n    /**\r\n     * Customer issue\r\n     * Task ID - EJ2-28898\r\n     * Chart's height setted is removed here.\r\n     */\n\n\n    if (this.isCustomHeight) {\n      this.component.element.style.height = null;\n    }\n  };\n\n  ScrollBar.prototype.calculateMouseWheelRange = function (scrollThumbX, scrollThumbWidth) {\n    var zoomFactor;\n    var zoomPosition;\n    var args;\n    var range = this.scrollRange;\n    var previousRange = this.getStartEnd(this.previousStart, this.previousEnd, false);\n    var circleRadius = 8;\n\n    if (scrollThumbX + scrollThumbWidth + circleRadius <= this.width) {\n      zoomPosition = (scrollThumbX - circleRadius) / this.width;\n      zoomFactor = scrollThumbWidth / this.width;\n    }\n\n    var currentStart = range.min + zoomPosition * range.delta;\n    var currentEnd = currentStart + zoomFactor * range.delta;\n\n    if (currentEnd) {\n      args = {\n        axis: this.axis,\n        currentRange: this.getStartEnd(currentStart, currentEnd, true),\n        previousAxisRange: previousRange\n      };\n    }\n\n    return args;\n  };\n  /**\r\n   * Range calculation for lazy loading\r\n   *\r\n   * @param scrollThumbX\r\n   * @param scrollThumbWidth\r\n   * @param thumbMove\r\n   * @param scrollThumbX\r\n   * @param scrollThumbWidth\r\n   * @param thumbMove\r\n   * @param scrollThumbX\r\n   * @param scrollThumbWidth\r\n   * @param thumbMove\r\n   */\n\n\n  ScrollBar.prototype.calculateLazyRange = function (scrollThumbX, scrollThumbWidth, thumbMove) {\n    var currentScrollWidth = scrollThumbWidth;\n    var zoomFactor;\n    var zoomPosition;\n    var currentStart;\n    var currentEnd;\n    var args;\n    var range = this.scrollRange;\n    var previousRange = this.getStartEnd(this.previousStart, this.previousEnd, false);\n    var circleRadius = 8;\n    var circleWidth = 16;\n\n    if (this.isResizeRight || thumbMove === 'RightMove') {\n      currentScrollWidth = this.isResizeRight ? currentScrollWidth + circleWidth : currentScrollWidth;\n      zoomFactor = (currentScrollWidth + circleRadius) / this.width;\n      zoomPosition = thumbMove === 'RightMove' ? (scrollThumbX + circleRadius) / this.width : this.axis.zoomPosition;\n      currentStart = thumbMove === 'RightMove' ? range.min + zoomPosition * range.delta : this.previousStart;\n      currentEnd = currentStart + zoomFactor * range.delta;\n    } else if (this.isResizeLeft || thumbMove === 'LeftMove') {\n      zoomPosition = (scrollThumbX - circleRadius) / this.width;\n      zoomFactor = currentScrollWidth / this.width;\n      currentStart = range.min + zoomPosition * range.delta;\n      currentStart = currentStart >= range.min ? currentStart : range.min;\n      currentEnd = thumbMove === 'LeftMove' ? currentStart + zoomFactor * range.delta : this.previousEnd;\n    } else if (this.isThumbDrag) {\n      zoomPosition = thumbMove === 'RightMove' ? (scrollThumbX + circleRadius) / this.width : (scrollThumbX - circleRadius) / this.width;\n      zoomFactor = this.scrollElements.thumbRectWidth / this.width;\n      currentStart = range.min + zoomPosition * range.delta;\n      currentStart = currentStart >= range.min ? currentStart : range.min;\n      currentEnd = currentStart + zoomFactor * range.delta;\n    }\n\n    if (currentEnd) {\n      args = {\n        axis: this.component.isBlazor ? {} : this.axis,\n        currentRange: this.getStartEnd(currentStart, currentEnd, true),\n        previousAxisRange: previousRange\n      };\n    }\n\n    return args;\n  };\n  /**\r\n   * Get start and end values\r\n   *\r\n   * @param start\r\n   * @param end\r\n   * @param isCurrentStartEnd\r\n   * @param start\r\n   * @param end\r\n   * @param isCurrentStartEnd\r\n   * @param start\r\n   * @param end\r\n   * @param isCurrentStartEnd\r\n   */\n\n\n  ScrollBar.prototype.getStartEnd = function (start, end, isCurrentStartEnd) {\n    var valueType = this.valueType;\n\n    if ((valueType === 'DateTime' || valueType === 'DateTimeCategory') && isCurrentStartEnd) {\n      this.previousStart = start;\n      this.previousEnd = end;\n    } else if (isCurrentStartEnd) {\n      this.previousStart = Math.round(start);\n      this.previousEnd = Math.ceil(end);\n    }\n\n    switch (valueType) {\n      case 'Double':\n      case 'Category':\n      case 'Logarithmic':\n        start = Math.round(start);\n        end = Math.ceil(end);\n        break;\n\n      case 'DateTime':\n      case 'DateTimeCategory':\n        start = new Date(start);\n        end = new Date(end);\n        break;\n    }\n\n    return {\n      minimum: start,\n      maximum: end\n    };\n  };\n  /**\r\n   * To render scroll bar\r\n   *\r\n   * @param isScrollExist\r\n   * @private\r\n   */\n\n\n  ScrollBar.prototype.render = function (isScrollExist) {\n    if (this.component.zoomModule || isScrollExist && this.axis.scrollbarSettings.enable) {\n      this.getDefaults();\n    }\n\n    this.getTheme();\n    this.removeScrollSvg();\n    createScrollSvg(this, this.component.svgRenderer);\n    this.wireEvents(this.svgObject);\n    this.svgObject.appendChild(this.scrollElements.renderElements(this, this.component.svgRenderer));\n    return this.svgObject;\n  };\n  /**\r\n   * Theming for scrollabr\r\n   *\r\n   * @returns {void}\r\n   */\n\n\n  ScrollBar.prototype.getTheme = function () {\n    this.scrollbarThemeStyle = getScrollbarThemeColor(this.component.theme);\n  };\n  /**\r\n   * Method to remove existing scrollbar\r\n   *\r\n   * @returns {void}\r\n   */\n\n\n  ScrollBar.prototype.removeScrollSvg = function () {\n    if (document.getElementById(this.component.element.id + '_scrollBar_svg' + this.axis.name)) {\n      remove(document.getElementById(this.component.element.id + '_scrollBar_svg' + this.axis.name));\n    }\n  };\n  /**\r\n   * Method to set cursor fpr scrollbar\r\n   *\r\n   * @param target\r\n   */\n\n\n  ScrollBar.prototype.setCursor = function (target) {\n    var id = target.id;\n    this.svgObject.style.cursor = id.indexOf('scrollBarThumb_') > -1 || id.indexOf('_gripCircle') > -1 ? '-webkit-grab' : id.indexOf('Circle_') > -1 || id.indexOf('Arrow_') > -1 ? this.isVertical ? 'ns-resize' : 'ew-resize' : 'auto';\n  };\n  /**\r\n   * Method to set theme for sollbar\r\n   *\r\n   * @param target\r\n   */\n\n\n  ScrollBar.prototype.setTheme = function (target) {\n    var id = target.id;\n    var isLeftHover = id.indexOf('_leftCircle_') > -1 || id.indexOf('_leftArrow_') > -1;\n    var isRightHover = id.indexOf('_rightCircle_') > -1 || id.indexOf('_rightArrow_') > -1;\n    var style = this.scrollbarThemeStyle;\n    var leftArrowEle = this.scrollElements.leftArrowEle;\n    var rightArrowEle = this.scrollElements.rightArrowEle;\n    var leftCircleEle = this.scrollElements.leftCircleEle;\n    var rightCircleEle = this.scrollElements.rightCircleEle;\n    var isAxis = this.isCurrentAxis(target, leftArrowEle);\n    leftCircleEle.style.fill = isLeftHover && isAxis ? style.circleHover : style.circle;\n    rightCircleEle.style.fill = isRightHover && isAxis ? style.circleHover : style.circle;\n    leftCircleEle.style.stroke = isLeftHover && isAxis ? style.circleHover : style.circle;\n    rightCircleEle.style.stroke = isRightHover && isAxis ? style.circleHover : style.circle;\n\n    if (this.component.theme === 'HighContrastLight') {\n      leftArrowEle.style.fill = isLeftHover && isAxis ? style.arrowHover : style.arrow;\n      leftArrowEle.style.stroke = isLeftHover && isAxis ? style.arrowHover : style.arrow;\n      rightArrowEle.style.fill = isRightHover && isAxis ? style.arrowHover : style.arrow;\n      rightArrowEle.style.stroke = isRightHover && isAxis ? style.arrowHover : style.arrow;\n      leftCircleEle.style.stroke = isLeftHover && isAxis ? style.circleHover : style.circle;\n      rightCircleEle.style.stroke = isRightHover && isAxis ? style.circleHover : style.circle;\n    }\n  };\n  /**\r\n   * To check current axis\r\n   *\r\n   * @param target\r\n   * @param ele\r\n   */\n\n\n  ScrollBar.prototype.isCurrentAxis = function (target, ele) {\n    return target.id.split('_')[2] === ele.id.split('_')[2];\n  };\n  /**\r\n   * Method to resize thumb\r\n   *\r\n   * @param e\r\n   */\n\n\n  ScrollBar.prototype.resizeThumb = function () {\n    var currentWidth;\n    var circleRadius = 8;\n    var padding = 5;\n    var gripWidth = 14;\n    var minThumbWidth = circleRadius * 2 + padding * 2 + gripWidth;\n    var thumbX = this.previousRectX;\n    var isInverse = this.axis.isAxisInverse; // let mouseXY: number = this.isVertical ? this.mouseY : this.mouseX;\n\n    var mouseXY = this.isVertical && isInverse ? this.mouseY : this.isVertical ? this.width - this.mouseY : isInverse ? this.width - this.mouseX : this.mouseX;\n    var diff = Math.abs(this.previousXY - mouseXY);\n\n    if (this.isResizeLeft && mouseXY >= 0) {\n      var currentX = thumbX + (mouseXY > this.previousXY ? diff : -diff);\n      currentWidth = currentX - circleRadius >= 0 ? this.previousWidth + (mouseXY > this.previousXY ? -diff : diff) : this.previousWidth;\n      currentX = currentX - circleRadius >= 0 ? currentX : thumbX;\n\n      if (currentWidth >= minThumbWidth && mouseXY < currentX + currentWidth) {\n        this.scrollElements.thumbRectX = this.previousRectX = currentX;\n        this.scrollElements.thumbRectWidth = this.previousWidth = currentWidth;\n        this.previousXY = mouseXY;\n        this.positionThumb(currentX, currentWidth);\n        this.setZoomFactorPosition(currentX, currentWidth);\n      }\n    } else if (this.isResizeRight) {\n      currentWidth = mouseXY >= minThumbWidth + this.scrollElements.thumbRectX && mouseXY <= this.width - circleRadius ? mouseXY - this.scrollElements.thumbRectX : this.previousWidth;\n      this.scrollElements.thumbRectWidth = this.previousWidth = currentWidth;\n      this.previousXY = mouseXY;\n      this.positionThumb(this.startX, currentWidth);\n      this.setZoomFactorPosition(this.startX, currentWidth);\n\n      if (!this.isLazyLoad) {\n        this.setZoomFactorPosition(this.startX, currentWidth);\n      }\n    }\n  };\n  /**\r\n   * Method to position the scrollbar thumb\r\n   *\r\n   * @param currentX\r\n   * @param currentWidth\r\n   */\n\n\n  ScrollBar.prototype.positionThumb = function (currentX, currentWidth) {\n    var elem = this.scrollElements;\n    var gripWidth = 14;\n    var gripCircleDiameter = 2;\n    var padding = gripWidth / 2 - gripCircleDiameter;\n    elem.slider.setAttribute('x', currentX.toString());\n    elem.slider.setAttribute('width', currentWidth.toString());\n    elem.leftCircleEle.setAttribute('cx', currentX.toString());\n    elem.rightCircleEle.setAttribute('cx', (currentX + currentWidth).toString());\n    elem.setArrowDirection(currentX, currentWidth, this.height);\n    elem.gripCircle.setAttribute('transform', 'translate(' + (currentX + currentWidth / 2 + (this.isVertical ? 1 : -1) * padding) + ',' + (this.isVertical ? '10' : '5') + ') rotate(' + (this.isVertical ? '180' : '0') + ')');\n  };\n  /**\r\n   * Method to get default values\r\n   *\r\n   * @returns {void}\r\n   */\n\n\n  ScrollBar.prototype.getDefaults = function () {\n    var axis = this.axis;\n    var circleRadius = 8;\n    var padding = 5;\n    var gripWidth = 14;\n    var minThumbWidth = circleRadius * 2 + padding * 2 + gripWidth;\n\n    if (this.axis.scrollbarSettings.enable) {\n      this.isLazyLoad = true;\n      this.getLazyDefaults(axis);\n    }\n\n    this.isVertical = axis.orientation === 'Vertical';\n    this.zoomFactor = this.isLazyLoad ? this.zoomFactor : axis.zoomFactor;\n    this.zoomPosition = this.isLazyLoad ? this.zoomPosition : axis.zoomPosition;\n    var currentWidth = this.zoomFactor * (this.isVertical ? axis.rect.height : axis.rect.width);\n    currentWidth = currentWidth > minThumbWidth ? currentWidth : minThumbWidth;\n    this.scrollX = axis.rect.x;\n    this.scrollY = axis.rect.y;\n    this.width = this.isVertical ? axis.rect.height : axis.rect.width;\n    this.height = 16;\n    var currentX = this.zoomPosition * (this.isVertical ? axis.rect.height : this.width);\n    var minThumbX = this.width - minThumbWidth - circleRadius;\n    this.scrollElements.thumbRectX = currentX > minThumbX ? minThumbX : currentX < circleRadius ? circleRadius : currentX;\n    this.scrollElements.thumbRectWidth = currentWidth + this.scrollElements.thumbRectX < this.width - circleRadius * 2 ? currentWidth : this.width - this.scrollElements.thumbRectX - circleRadius;\n  };\n  /**\r\n   * Lazy load default values\r\n   *\r\n   * @param axis\r\n   */\n\n\n  ScrollBar.prototype.getLazyDefaults = function (axis) {\n    var start;\n    var end;\n    var valueType = axis.valueType;\n    var scrollbarSettings = axis.scrollbarSettings;\n    var range = axis.scrollbarSettings.range;\n    var visibleRange = axis.visibleRange;\n    var pointsLength = axis.scrollbarSettings.pointsLength;\n    this.valueType = valueType = (!scrollbarSettings.range.minimum || !scrollbarSettings.range.maximum) && scrollbarSettings.pointsLength ? 'Double' : valueType;\n    var option = {\n      skeleton: 'full',\n      type: 'dateTime'\n    };\n    var dateParser = this.component.intl.getDateParser(option);\n    var dateFormatter = this.component.intl.getDateFormat(option);\n\n    switch (valueType) {\n      case 'Double':\n      case 'Category':\n      case 'Logarithmic':\n        start = range.minimum ? range.minimum : pointsLength ? 0 : visibleRange.min;\n        end = range.maximum ? range.maximum : pointsLength ? pointsLength - 1 : visibleRange.max;\n        break;\n\n      case 'DateTime':\n      case 'DateTimeCategory':\n        start = range.minimum ? Date.parse(dateParser(dateFormatter(range.minimum))) : visibleRange.min;\n        end = range.maximum ? Date.parse(dateParser(dateFormatter(range.maximum))) : visibleRange.max;\n        break;\n    }\n\n    start = Math.min(start, visibleRange.min);\n    end = Math.max(end, visibleRange.max);\n    var zoomFactor = (visibleRange.max - visibleRange.min) / (end - start);\n    var zoomPosition = (visibleRange.min - start) / (end - start);\n    this.zoomFactor = range.minimum || range.maximum ? zoomFactor : this.axis.maxPointLength / axis.scrollbarSettings.pointsLength;\n    this.zoomPosition = range.minimum || range.maximum ? zoomPosition : axis.zoomPosition;\n    this.scrollRange.min = start;\n    this.scrollRange.max = end;\n    this.scrollRange.delta = end - start;\n    this.previousStart = visibleRange.min;\n    this.previousEnd = visibleRange.max;\n  };\n  /**\r\n   * Method to get log range\r\n   *\r\n   * @param axis\r\n   */\n\n\n  ScrollBar.prototype.getLogRange = function (axis) {\n    var range = axis.scrollbarSettings.range;\n    var start = logBase(range.minimum, axis.logBase);\n    var end = logBase(range.maximum, axis.logBase);\n    start = isFinite(start) ? start : range.minimum;\n    end = isFinite(start) ? end : range.maximum;\n    return {\n      minimum: Math.floor(start / 1),\n      maximum: Math.ceil(end / 1)\n    };\n  };\n  /**\r\n   * Method for injecting scrollbar module\r\n   *\r\n   * @param axis\r\n   * @param component\r\n   */\n\n\n  ScrollBar.prototype.injectTo = function (axis, component) {\n    axis.zoomingScrollBar = new ScrollBar(component, axis);\n  };\n  /**\r\n   * Method to destroy scrollbar\r\n   *\r\n   * @returns {void}\r\n   */\n\n\n  ScrollBar.prototype.destroy = function () {\n    var _this = this;\n\n    if (this.axes) {\n      this.axes.map(function (axis) {\n        axis.zoomingScrollBar.destroy();\n      });\n    } else {\n      this.elements.map(function (element) {\n        _this.unWireEvents(element);\n\n        remove(element.firstChild);\n      });\n      this.elements = [];\n    }\n  };\n  /**\r\n   * Method to get scrollbar module name\r\n   *\r\n   * @returns {string}\r\n   */\n\n\n  ScrollBar.prototype.getModuleName = function () {\n    return 'ScrollBar';\n  };\n\n  ScrollBar.prototype.getArgs = function (eventName, range, zoomPosition, zoomFactor, currentRanges) {\n    var scrollArgs = {\n      axis: this.component.isBlazor ? {} : this.axis,\n      name: eventName,\n      range: this.axis.visibleRange,\n      zoomFactor: this.axis.zoomFactor,\n      zoomPosition: this.axis.zoomPosition,\n      previousRange: range,\n      previousZoomFactor: zoomFactor,\n      previousZoomPosition: zoomPosition,\n      currentRange: currentRanges\n    };\n    return scrollArgs;\n  };\n\n  return ScrollBar;\n}();\n\nexport { ScrollBar };","map":{"version":3,"sources":["C:/Users/x/Desktop/openDSA/openDSA_dashboard/project/node_modules/@syncfusion/ej2-react-charts/node_modules/@syncfusion/ej2-charts/src/common/scrollbar/scrollbar.js"],"names":["EventHandler","Browser","remove","ScrollElements","createScrollSvg","getElement","minMax","logBase","getScrollbarThemeColor","scrollChanged","scrollEnd","scrollStart","ScrollBar","component","axis","scrollRange","max","min","interval","delta","elements","scrollElements","mouseMoveListener","scrollMouseMove","bind","mouseUpListener","scrollMouseUp","animateDuration","isPointer","browserName","info","name","prototype","getMouseXY","e","pageX","pageY","touchArg","type","indexOf","changedTouches","clientX","clientY","svgRect","element","id","getBoundingClientRect","mouseX","Math","left","mouseY","top","wireEvents","add","touchStartEvent","scrollMouseDown","touchMoveEvent","touchEndEvent","scrollMouseWheel","window","addEventListener","unWireEvents","removeEventListener","target","elem","isInverse","isAxisInverse","isResizeLeft","isExist","isResizeRight","previousXY","isVertical","width","previousWidth","thumbRectWidth","previousRectX","thumbRectX","startZoomPosition","zoomPosition","startZoomFactor","zoomFactor","startRange","visibleRange","scrollStarted","trigger","getArgs","isThumbDrag","svgObject","style","cursor","currentX","moveLength","isWithIn","positionThumb","setZoomFactorPosition","isLazyLoad","thumbMove","args","calculateLazyRange","height","isCustomHeight","availableSize","match","circleRadius","mouseXY","thumbX","currentWidth","isRequire","isScrollUI","circleWidth","currentScrollWidth","currentZPWidth","rect","setCursor","setTheme","range","currentRange","isScrolling","resizeThumb","origin","direction","detail","cumulative","orientation","calculateMouseWheelRange","minimum","previousAxisRange","maximum","isScrollEnd","startX","abs","scrollThumbX","scrollThumbWidth","previousRange","getStartEnd","previousStart","previousEnd","currentStart","currentEnd","isBlazor","start","end","isCurrentStartEnd","valueType","round","ceil","Date","render","isScrollExist","zoomModule","scrollbarSettings","enable","getDefaults","getTheme","removeScrollSvg","svgRenderer","appendChild","renderElements","scrollbarThemeStyle","theme","document","getElementById","isLeftHover","isRightHover","leftArrowEle","rightArrowEle","leftCircleEle","rightCircleEle","isAxis","isCurrentAxis","fill","circleHover","circle","stroke","arrowHover","arrow","ele","split","padding","gripWidth","minThumbWidth","diff","gripCircleDiameter","slider","setAttribute","toString","setArrowDirection","gripCircle","getLazyDefaults","scrollX","x","scrollY","y","minThumbX","pointsLength","option","skeleton","dateParser","intl","getDateParser","dateFormatter","getDateFormat","parse","maxPointLength","getLogRange","isFinite","floor","injectTo","zoomingScrollBar","destroy","_this","axes","map","firstChild","getModuleName","eventName","currentRanges","scrollArgs","previousZoomFactor","previousZoomPosition"],"mappings":"AAAA;;AACA;AACA,SAASA,YAAT,EAAuBC,OAAvB,EAAgCC,MAAhC,QAA8C,sBAA9C;AACA,SAASC,cAAT,EAAyBC,eAAzB,QAAgD,sBAAhD;AACA,SAASC,UAAT,EAAqBC,MAArB,EAA6BC,OAA7B,QAA4C,iBAA5C;AACA,SAASC,sBAAT,QAAuC,gBAAvC;AACA,SAASC,aAAT,EAAwBC,SAAxB,EAAmCC,WAAnC,QAAsD,oBAAtD;AACA;AACA;AACA;;AACA,IAAIC,SAAS;AAAG;AAAe,YAAY;AACvC;AACJ;AACA;AACA;AACA;AACA;AACI,WAASA,SAAT,CAAmBC,SAAnB,EAA8BC,IAA9B,EAAoC;AAChC;AACA,SAAKC,WAAL,GAAmB;AAAEC,MAAAA,GAAG,EAAE,IAAP;AAAaC,MAAAA,GAAG,EAAE,IAAlB;AAAwBC,MAAAA,QAAQ,EAAE,IAAlC;AAAwCC,MAAAA,KAAK,EAAE;AAA/C,KAAnB;AACA,SAAKN,SAAL,GAAiBA,SAAjB;AACA,SAAKO,QAAL,GAAgB,EAAhB;AACA,SAAKC,cAAL,GAAsB,IAAIlB,cAAJ,CAAmBU,SAAnB,CAAtB;AACA,SAAKC,IAAL,GAAYA,IAAZ;AACA,SAAKQ,iBAAL,GAAyB,KAAKC,eAAL,CAAqBC,IAArB,CAA0B,IAA1B,CAAzB;AACA,SAAKC,eAAL,GAAuB,KAAKC,aAAL,CAAmBF,IAAnB,CAAwB,IAAxB,CAAvB;AACA,SAAKG,eAAL,GAAuB,GAAvB;AACA,SAAKC,SAAL,GAAiB3B,OAAO,CAAC2B,SAAzB;AACA,SAAKC,WAAL,GAAmB5B,OAAO,CAAC6B,IAAR,CAAaC,IAAhC;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACInB,EAAAA,SAAS,CAACoB,SAAV,CAAoBC,UAApB,GAAiC,UAAUC,CAAV,EAAa;AAC1C,QAAIC,KAAJ;AACA,QAAIC,KAAJ;AACA,QAAIC,QAAJ;;AACA,QAAIH,CAAC,CAACI,IAAF,CAAOC,OAAP,CAAe,OAAf,IAA0B,CAAC,CAA/B,EAAkC;AAC9BF,MAAAA,QAAQ,GAAGH,CAAX;AACAC,MAAAA,KAAK,GAAGE,QAAQ,CAACG,cAAT,CAAwB,CAAxB,EAA2BC,OAAnC;AACAL,MAAAA,KAAK,GAAGC,QAAQ,CAACG,cAAT,CAAwB,CAAxB,EAA2BE,OAAnC;AACH,KAJD,MAKK;AACDP,MAAAA,KAAK,GAAGD,CAAC,CAACO,OAAV;AACAL,MAAAA,KAAK,GAAGF,CAAC,CAACQ,OAAV;AACH;;AACD,QAAIC,OAAO,GAAGtC,UAAU,CAAC,KAAKQ,SAAL,CAAe+B,OAAf,CAAuBC,EAAvB,GAA4B,gBAA5B,GAA+C,KAAK/B,IAAL,CAAUiB,IAA1D,CAAV,CAA0Ee,qBAA1E,EAAd;AACA,SAAKC,MAAL,GAAcZ,KAAK,GAAGa,IAAI,CAAChC,GAAL,CAAS2B,OAAO,CAACM,IAAjB,EAAuB,CAAvB,CAAtB;AACA,SAAKC,MAAL,GAAcd,KAAK,GAAGY,IAAI,CAAChC,GAAL,CAAS2B,OAAO,CAACQ,GAAjB,EAAsB,CAAtB,CAAtB;AACH,GAhBD;AAiBA;AACJ;AACA;AACA;AACA;AACA;;;AACIvC,EAAAA,SAAS,CAACoB,SAAV,CAAoBoB,UAApB,GAAiC,UAAUR,OAAV,EAAmB;AAChD5C,IAAAA,YAAY,CAACqD,GAAb,CAAiBT,OAAjB,EAA0B3C,OAAO,CAACqD,eAAlC,EAAmD,KAAKC,eAAxD,EAAyE,IAAzE;AACAvD,IAAAA,YAAY,CAACqD,GAAb,CAAiBT,OAAjB,EAA0B3C,OAAO,CAACuD,cAAlC,EAAkD,KAAKjC,eAAvD,EAAwE,IAAxE;AACAvB,IAAAA,YAAY,CAACqD,GAAb,CAAiBT,OAAjB,EAA0B3C,OAAO,CAACwD,aAAlC,EAAiD,KAAK/B,aAAtD,EAAqE,IAArE;AACA1B,IAAAA,YAAY,CAACqD,GAAb,CAAiBT,OAAjB,EAA0B,YAA1B,EAAwC,KAAKc,gBAA7C,EAA+D,IAA/D;AACAC,IAAAA,MAAM,CAACC,gBAAP,CAAwB,WAAxB,EAAqC,KAAKtC,iBAA1C,EAA6D,KAA7D;AACAqC,IAAAA,MAAM,CAACC,gBAAP,CAAwB,SAAxB,EAAmC,KAAKnC,eAAxC,EAAyD,KAAzD;AACH,GAPD;AAQA;AACJ;AACA;AACA;AACA;;;AACIb,EAAAA,SAAS,CAACoB,SAAV,CAAoB6B,YAApB,GAAmC,UAAUjB,OAAV,EAAmB;AAClD5C,IAAAA,YAAY,CAACE,MAAb,CAAoB0C,OAApB,EAA6B3C,OAAO,CAACqD,eAArC,EAAsD,KAAKC,eAA3D;AACAvD,IAAAA,YAAY,CAACE,MAAb,CAAoB0C,OAApB,EAA6B3C,OAAO,CAACuD,cAArC,EAAqD,KAAKjC,eAA1D;AACAvB,IAAAA,YAAY,CAACE,MAAb,CAAoB0C,OAApB,EAA6B3C,OAAO,CAACwD,aAArC,EAAoD,KAAK/B,aAAzD;AACA1B,IAAAA,YAAY,CAACE,MAAb,CAAoB0C,OAApB,EAA6B,YAA7B,EAA2C,KAAKc,gBAAhD;AACAC,IAAAA,MAAM,CAACG,mBAAP,CAA2B,WAA3B,EAAwC,KAAKxC,iBAA7C,EAAgE,KAAhE;AACAqC,IAAAA,MAAM,CAACG,mBAAP,CAA2B,SAA3B,EAAsC,KAAKrC,eAA3C,EAA4D,KAA5D;AACH,GAPD;AAQA;AACJ;AACA;AACA;AACA;;;AACIb,EAAAA,SAAS,CAACoB,SAAV,CAAoBuB,eAApB,GAAsC,UAAUrB,CAAV,EAAa;AAC/C,QAAIW,EAAE,GAAGX,CAAC,CAAC6B,MAAF,CAASlB,EAAlB;AACA,QAAImB,IAAI,GAAG,KAAK3C,cAAhB;AACA,QAAI4C,SAAS,GAAG,KAAKnD,IAAL,CAAUoD,aAA1B;AACA,SAAKjC,UAAL,CAAgBC,CAAhB;AACA,SAAKiC,YAAL,GAAoB,KAAKC,OAAL,CAAavB,EAAb,EAAiB,cAAjB,KAAoC,KAAKuB,OAAL,CAAavB,EAAb,EAAiB,aAAjB,CAAxD;AACA,SAAKwB,aAAL,GAAqB,KAAKD,OAAL,CAAavB,EAAb,EAAiB,eAAjB,KAAqC,KAAKuB,OAAL,CAAavB,EAAb,EAAiB,cAAjB,CAA1D,CAN+C,CAO/C;;AACA,SAAKyB,UAAL,GAAmB,KAAKC,UAAL,IAAmBN,SAApB,GAAiC,KAAKf,MAAtC,GAA+C,KAAKqB,UAAL,GAAkB,KAAKC,KAAL,GAC/E,KAAKtB,MADwD,GAC/Ce,SAAS,GAAG,KAAKO,KAAL,GAAa,KAAKzB,MAArB,GAA8B,KAAKA,MAD9D;AAEA,SAAK0B,aAAL,GAAqBT,IAAI,CAACU,cAA1B;AACA,SAAKC,aAAL,GAAqBX,IAAI,CAACY,UAA1B;AACA,SAAKC,iBAAL,GAAyB,KAAK/D,IAAL,CAAUgE,YAAnC;AACA,SAAKC,eAAL,GAAuB,KAAKjE,IAAL,CAAUkE,UAAjC;AACA,SAAKC,UAAL,GAAkB,KAAKnE,IAAL,CAAUoE,YAA5B;AACA,SAAKC,aAAL,GAAqB,IAArB;AACA,SAAKtE,SAAL,CAAeuE,OAAf,CAAuBzE,WAAvB,EAAoC,KAAK0E,OAAL,CAAa1E,WAAb,CAApC;;AACA,QAAI,KAAKyD,OAAL,CAAavB,EAAb,EAAiB,iBAAjB,KAAuC,KAAKuB,OAAL,CAAavB,EAAb,EAAiB,YAAjB,CAA3C,EAA2E;AACvE,WAAKyC,WAAL,GAAmB,IAAnB;AACA,WAAKC,SAAL,CAAeC,KAAf,CAAqBC,MAArB,GAA8B,kBAA9B;AACH,KAHD,MAIK,IAAI,KAAKrB,OAAL,CAAavB,EAAb,EAAiB,oBAAjB,CAAJ,EAA4C;AAC7C,UAAI6C,QAAQ,GAAG,KAAKC,UAAL,CAAgB,KAAKrB,UAArB,EAAiC,KAAKK,aAAtC,CAAf;AACAX,MAAAA,IAAI,CAACY,UAAL,GAAkB,KAAKgB,QAAL,CAAcF,QAAd,IAA0BA,QAA1B,GAAqC1B,IAAI,CAACY,UAA5D;AACA,WAAKiB,aAAL,CAAmB7B,IAAI,CAACY,UAAxB,EAAoCZ,IAAI,CAACU,cAAzC;AACA,WAAKoB,qBAAL,CAA2B9B,IAAI,CAACY,UAAhC,EAA4CZ,IAAI,CAACU,cAAjD,EAAiE,KAAjE;;AACA,UAAI,KAAKqB,UAAT,EAAqB;AACjB,YAAIC,SAAS,GAAGhC,IAAI,CAACY,UAAL,GAAkB,KAAKD,aAAvB,GAAuC,WAAvC,GAAqD,UAArE;AACA,YAAIsB,IAAI,GAAG,KAAKC,kBAAL,CAAwBlC,IAAI,CAACY,UAA7B,EAAyCZ,IAAI,CAACU,cAA9C,EAA8DsB,SAA9D,CAAX;;AACA,YAAIC,IAAJ,EAAU;AACN,eAAKpF,SAAL,CAAeuE,OAAf,CAAuB1E,SAAvB,EAAkCuF,IAAlC;AACH;AACJ;AACJ;AACD;AACR;AACA;AACA;AACA;AACA;AACA;;;AACQ,QAAI,KAAKpF,SAAL,CAAe+B,OAAf,CAAuB4C,KAAvB,CAA6BW,MAA7B,KAAwC,EAA5C,EAAgD;AAC5C,WAAKC,cAAL,GAAsB,IAAtB;AACA,WAAKvF,SAAL,CAAe+B,OAAf,CAAuB4C,KAAvB,CAA6BW,MAA7B,GAAsC,KAAKtF,SAAL,CAAewF,aAAf,CAA6BF,MAA7B,GAAsC,IAA5E;AACH;AACJ,GA7CD;AA8CA;AACJ;AACA;AACA;AACA;AACA;;;AACIvF,EAAAA,SAAS,CAACoB,SAAV,CAAoBoC,OAApB,GAA8B,UAAUvB,EAAV,EAAcyD,KAAd,EAAqB;AAC/C,WAAOzD,EAAE,CAACN,OAAH,CAAW+D,KAAX,IAAoB,CAAC,CAA5B;AACH,GAFD;AAGA;AACJ;AACA;AACA;AACA;;;AACI1F,EAAAA,SAAS,CAACoB,SAAV,CAAoB4D,QAApB,GAA+B,UAAUF,QAAV,EAAoB;AAC/C,QAAIa,YAAY,GAAG,CAAnB;AACA,WAAQb,QAAQ,GAAGa,YAAX,IAA2B,CAA3B,IACJb,QAAQ,GAAG,KAAKrE,cAAL,CAAoBqD,cAA/B,GAAgD6B,YAAhD,IAAgE,KAAK/B,KADzE;AAEH,GAJD;AAKA;AACJ;AACA;AACA;AACA;AACA;AACA;;;AACI5D,EAAAA,SAAS,CAACoB,SAAV,CAAoB2D,UAApB,GAAiC,UAAUa,OAAV,EAAmBC,MAAnB,EAA2BF,YAA3B,EAAyC;AACtE,QAAIA,YAAY,KAAK,KAAK,CAA1B,EAA6B;AAAEA,MAAAA,YAAY,GAAG,CAAf;AAAmB;;AAClD,QAAIZ,UAAU,GAAI,KAAK,GAAN,IAAc,KAAKnB,KAAL,GAAa+B,YAAY,GAAG,CAA1C,CAAjB;;AACA,QAAIC,OAAO,GAAGC,MAAd,EAAsB;AAClBd,MAAAA,UAAU,GAAGc,MAAM,IAAIA,MAAM,GAAGd,UAAT,GAAsBY,YAAtB,GAAqCZ,UAArC,GAAkDY,YAAtD,CAAnB;AACH,KAFD,MAGK;AACDZ,MAAAA,UAAU,GAAGc,MAAM,IAAIA,MAAM,GAAG,KAAKpF,cAAL,CAAoBqD,cAA7B,GAA8CiB,UAA9C,GAA2D,KAAKnB,KAAL,GAAa+B,YAAxE,GACnBZ,UADmB,GACNY,YADE,CAAnB;AAEH;;AACD,WAAOZ,UAAP;AACH,GAXD;AAYA;AACJ;AACA;AACA;AACA;AACA;;;AACI/E,EAAAA,SAAS,CAACoB,SAAV,CAAoB8D,qBAApB,GAA4C,UAAUJ,QAAV,EAAoBgB,YAApB,EAAkCC,SAAlC,EAA6C;AACrF,QAAIA,SAAS,KAAK,KAAK,CAAvB,EAA0B;AAAEA,MAAAA,SAAS,GAAG,IAAZ;AAAmB;;AAC/C,SAAKC,UAAL,GAAkB,IAAlB;AACA,QAAI9F,IAAI,GAAG,KAAKA,IAAhB;AACA,QAAIyF,YAAY,GAAG,CAAnB;AACA,QAAIM,WAAW,GAAG,CAAlB;AACA,QAAIC,kBAAkB,GAAGpB,QAAQ,GAAGgB,YAAX,GAA0BH,YAA1B,GAAyCM,WAAlE;AACA,QAAIE,cAAc,GAAGR,YAAY,GAAIM,WAAW,GAAG,CAAnD;AACA,SAAK/B,YAAL,GAAoB,CAACY,QAAQ,IAAIA,QAAQ,GAAGqB,cAAX,IAA6B,CAA7B,GAAiCA,cAAjC,GAAkD,CAAtD,CAAT,KAAsE,KAAKxC,UAAL,GACpFzD,IAAI,CAACkG,IAAL,CAAUb,MAD0E,GACjE,KAAK3B,KADV,CAApB;AAEA,SAAKQ,UAAL,GAAkB,CAAC0B,YAAY,IAAII,kBAAkB,IAAI,KAAKtC,KAA3B,GAAmC+B,YAAY,GAAGM,WAAlD,GAAgE,CAApE,CAAb,KAAwF,KAAKtC,UAAL,GACpGzD,IAAI,CAACkG,IAAL,CAAUb,MAD0F,GACjF,KAAK3B,KADZ,CAAlB;AAEA1D,IAAAA,IAAI,CAACgE,YAAL,GAAoB,KAAKA,YAAL,GAAoB,CAApB,GAAwB,CAAxB,GAA4B,KAAKA,YAAL,GAAoB,GAApB,GAA0B,CAA1B,GAA8B,KAAKA,YAAnF;AACAhE,IAAAA,IAAI,CAACkE,UAAL,GAAkB2B,SAAS,GAAG,KAAK3B,UAAR,GAAqBlE,IAAI,CAACkE,UAArD;AACH,GAdD;AAeA;AACJ;AACA;AACA;AACA;;;AACIpE,EAAAA,SAAS,CAACoB,SAAV,CAAoBT,eAApB,GAAsC,UAAUW,CAAV,EAAa;AAC/C,QAAI6B,MAAM,GAAG7B,CAAC,CAAC6B,MAAf;AACA,QAAIC,IAAI,GAAG,KAAK3C,cAAhB;AACA,QAAI4C,SAAS,GAAG,KAAKnD,IAAL,CAAUoD,aAA1B;;AACA,QAAI,CAAC7D,UAAU,CAAC,KAAKkF,SAAL,CAAe1C,EAAhB,CAAf,EAAoC;AAChC,aAAO,IAAP;AACH;;AACD,SAAKZ,UAAL,CAAgBC,CAAhB;AACA,SAAK+E,SAAL,CAAelD,MAAf;AACA,SAAKmD,QAAL,CAAcnD,MAAd,EAT+C,CAU/C;;AACA,QAAIyC,OAAO,GAAI,KAAKjC,UAAL,IAAmBN,SAApB,GAAiC,KAAKO,KAAL,GAAa,KAAKtB,MAAnD,GAA4D,KAAKqB,UAAL,GACtE,KAAKrB,MADiE,GACxD,KAAKH,MADvB;AAEA,QAAIoE,KAAK,GAAG,KAAKrG,IAAL,CAAUoE,YAAtB;AACA,QAAIJ,YAAY,GAAG,KAAKA,YAAxB;AACA,QAAIE,UAAU,GAAG,KAAKA,UAAtB;AACA,QAAIW,UAAU,GAAG,KAAKhB,aAAL,GAAqBX,IAAI,CAACY,UAA3C;AACA,QAAIoB,SAAS,GAAGL,UAAU,GAAG,CAAb,GAAiB,WAAjB,GAA+B,UAA/C;AACA,QAAIM,IAAJ;;AACA,QAAI,KAAKF,UAAL,KAAoB,KAAKT,WAAL,IAAoB,KAAKnB,YAAzB,IAAyC,KAAKE,aAAlE,CAAJ,EAAsF;AAClF4B,MAAAA,IAAI,GAAG,KAAKC,kBAAL,CAAwBlC,IAAI,CAACY,UAA7B,EAAyCZ,IAAI,CAACU,cAA9C,EAA8DsB,SAA9D,CAAP;AACH;;AACD,QAAIoB,YAAY,GAAGnB,IAAI,GAAGA,IAAI,CAACmB,YAAR,GAAuB,IAA9C;;AACA,QAAI,KAAK9B,WAAT,EAAsB;AAClB,WAAKzE,SAAL,CAAewG,WAAf,GAA6B,KAAK/B,WAAlC;AACAkB,MAAAA,OAAO,GAAI,KAAKjC,UAAL,IAAmBN,SAApB,GAAiC,KAAKO,KAAL,GAAagC,OAA9C,GAAwDA,OAAlE;AACA,UAAId,QAAQ,GAAG1B,IAAI,CAACY,UAAL,IAAmB4B,OAAO,GAAG,KAAKlC,UAAlC,CAAf;;AACA,UAAIkC,OAAO,IAAId,QAAQ,GAAG1B,IAAI,CAACU,cAA/B,EAA+C;AAC3C,aAAKuC,SAAL,CAAelD,MAAf;AACH,OAFD,MAGK;AACD,aAAKwB,SAAL,CAAeC,KAAf,CAAqBC,MAArB,GAA8B,kBAA9B;AACH;;AACD,UAAIe,OAAO,IAAI,CAAX,IAAgBA,OAAO,IAAId,QAAQ,GAAG1B,IAAI,CAACU,cAA/C,EAA+D;AAC3DV,QAAAA,IAAI,CAACY,UAAL,GAAkB,KAAKgB,QAAL,CAAcF,QAAd,IAA0BA,QAA1B,GAAqC1B,IAAI,CAACY,UAA5D;AACA,aAAKiB,aAAL,CAAmB7B,IAAI,CAACY,UAAxB,EAAoCZ,IAAI,CAACU,cAAzC;AACA,aAAKJ,UAAL,GAAkBkC,OAAlB;AACA,aAAKV,qBAAL,CAA2BJ,QAA3B,EAAqC1B,IAAI,CAACU,cAA1C,EAA0D,KAA1D;AACH;;AACD,WAAK7D,SAAL,CAAeuE,OAAf,CAAuB3E,aAAvB,EAAsC,KAAK4E,OAAL,CAAa5E,aAAb,EAA4B0G,KAA5B,EAAmCrC,YAAnC,EAAiDE,UAAjD,EAA6DoC,YAA7D,CAAtC;AACH,KAjBD,MAkBK,IAAI,KAAKjD,YAAL,IAAqB,KAAKE,aAA9B,EAA6C;AAC9C,WAAKiD,WAAL;AACA,WAAKzG,SAAL,CAAeuE,OAAf,CAAuB3E,aAAvB,EAAsC,KAAK4E,OAAL,CAAa5E,aAAb,EAA4B0G,KAA5B,EAAmCrC,YAAnC,EAAiDE,UAAjD,EAA6DoC,YAA7D,CAAtC;AACH;AACJ,GA7CD;AA8CA;AACJ;AACA;AACA;AACA;;;AACIxG,EAAAA,SAAS,CAACoB,SAAV,CAAoB0B,gBAApB,GAAuC,UAAUxB,CAAV,EAAa;AAChD,QAAIS,OAAO,GAAGtC,UAAU,CAAC,KAAKQ,SAAL,CAAe+B,OAAf,CAAuBC,EAAvB,GAA4B,gBAA5B,GAA+C,KAAK/B,IAAL,CAAUiB,IAA1D,CAAV,CAA0Ee,qBAA1E,EAAd;AACA,SAAKC,MAAL,GAAcb,CAAC,CAACO,OAAF,GAAYO,IAAI,CAAChC,GAAL,CAAS2B,OAAO,CAACM,IAAjB,EAAuB,CAAvB,CAA1B;AACA,SAAKC,MAAL,GAAchB,CAAC,CAACQ,OAAF,GAAYM,IAAI,CAAChC,GAAL,CAAS2B,OAAO,CAACQ,GAAjB,EAAsB,CAAtB,CAA1B;AACA,QAAIoE,MAAM,GAAG,GAAb;AACA,QAAIvD,IAAI,GAAG,KAAK3C,cAAhB;AACA,QAAIP,IAAI,GAAG,KAAKA,IAAhB;AACA,QAAI0G,SAAS,GAAI,KAAK3F,WAAL,KAAqB,SAArB,IAAkC,CAAC,KAAKD,SAAzC,GACZ,CAAEM,CAAC,CAACuF,MAAJ,GAAc,CAAd,GAAkB,CAAlB,GAAsB,CAAtB,GAA0B,CAAC,CADf,GACoBvF,CAAC,CAAC,YAAD,CAAD,GAAkB,GAAnB,GAA0B,CAA1B,GAA8B,CAA9B,GAAkC,CAAC,CADtE;AAEA,QAAIwF,UAAU,GAAG1E,IAAI,CAAChC,GAAL,CAASgC,IAAI,CAAChC,GAAL,CAAS,IAAIV,MAAM,CAACQ,IAAI,CAACkE,UAAN,EAAkB,CAAlB,EAAqB,CAArB,CAAnB,EAA4C,CAA5C,IAAkD,OAAOwC,SAAlE,EAA8E,CAA9E,CAAjB;AACA,QAAIL,KAAK,GAAG,KAAKrG,IAAL,CAAUoE,YAAtB;AACA,QAAIJ,YAAY,GAAG,KAAKA,YAAxB;AACA,QAAIE,UAAU,GAAG,KAAKA,UAAtB;AACA,QAAIiB,IAAJ;;AACA,QAAIyB,UAAU,IAAI,CAAlB,EAAqB;AACjBH,MAAAA,MAAM,GAAGzG,IAAI,CAAC6G,WAAL,KAAqB,YAArB,GAAoC,KAAK5E,MAAL,GAAcjC,IAAI,CAACkG,IAAL,CAAUxC,KAA5D,GAAoE,IAAK,KAAKtB,MAAL,GAAcpC,IAAI,CAACkG,IAAL,CAAUb,MAA1G;AACAoB,MAAAA,MAAM,GAAGA,MAAM,GAAG,CAAT,GAAa,CAAb,GAAiBA,MAAM,GAAG,CAAT,GAAa,CAAb,GAAiBA,MAA3C;AACA,WAAKvC,UAAL,GAAmB0C,UAAU,KAAK,CAAhB,GAAqB,CAArB,GAAyBpH,MAAM,CAAC,IAAIoH,UAAL,EAAiB,CAAjB,EAAoB,CAApB,CAAjD;AACA,WAAK5C,YAAL,GAAqB4C,UAAU,KAAK,CAAhB,GAAqB,CAArB,GAAyB5G,IAAI,CAACgE,YAAL,GAAqB,CAAChE,IAAI,CAACkE,UAAL,GAAkB,KAAKA,UAAxB,IAAsCuC,MAAxG;AACH;;AACDvD,IAAAA,IAAI,CAACY,UAAL,GAAkB,KAAKgB,QAAL,CAAc,KAAKd,YAAL,GAAoB,KAAKN,KAAvC,IAAgD,KAAKM,YAAL,GAAoB,KAAKN,KAAzE,GAAiFR,IAAI,CAACY,UAAxG;AACA,SAAKgC,UAAL,GAAkB,IAAlB;AACA,SAAKf,aAAL,CAAmB7B,IAAI,CAACY,UAAxB,EAAoCZ,IAAI,CAACU,cAAzC;;AACA,QAAI,KAAKqB,UAAT,EAAqB;AACjB,WAAKD,qBAAL,CAA2B9B,IAAI,CAACY,UAAhC,EAA4CZ,IAAI,CAACU,cAAjD;AACH;;AACD5D,IAAAA,IAAI,CAACkE,UAAL,GAAkB,KAAKA,UAAvB;AACAlE,IAAAA,IAAI,CAACgE,YAAL,GAAoB,KAAKA,YAAzB;;AACA,QAAI,KAAKiB,UAAT,EAAqB;AACjBE,MAAAA,IAAI,GAAG,KAAK2B,wBAAL,CAA8B5D,IAAI,CAACY,UAAnC,EAA+CZ,IAAI,CAACU,cAApD,CAAP;;AACA,UAAIuB,IAAJ,EAAU;AACN,YAAKA,IAAI,CAACmB,YAAL,CAAkBS,OAAlB,KAA8B5B,IAAI,CAAC6B,iBAAL,CAAuBD,OAAtD,IAAmE5B,IAAI,CAACmB,YAAL,CAAkBW,OAAlB,KACnE9B,IAAI,CAAC6B,iBAAL,CAAuBC,OAD3B,EACqC;AACjC,eAAKlH,SAAL,CAAeuE,OAAf,CAAuB1E,SAAvB,EAAkCuF,IAAlC;AACA,eAAK+B,WAAL,GAAmB,KAAnB;AACH;AACJ;AACJ;;AACD,QAAI,CAAC,KAAKjC,UAAV,EAAsB;AAClB,WAAKlF,SAAL,CAAeuE,OAAf,CAAuB3E,aAAvB,EAAsC,KAAK4E,OAAL,CAAa5E,aAAb,EAA4B0G,KAA5B,EAAmCrC,YAAnC,EAAiDE,UAAjD,CAAtC;AACH;AACJ,GAzCD;AA0CA;AACJ;AACA;AACA;AACA;;;AACIpE,EAAAA,SAAS,CAACoB,SAAV,CAAoBN,aAApB,GAAoC,YAAY;AAC5C,QAAIuE,IAAJ;AACA,SAAKgC,MAAL,GAAc,KAAK5G,cAAL,CAAoBuD,UAAlC;AACA,QAAI2B,YAAY,GAAG,CAAnB;AACA,QAAIM,WAAW,GAAG,CAAlB;AACA,QAAIC,kBAAkB,GAAG,KAAKmB,MAAL,GAAc,KAAK5G,cAAL,CAAoBqD,cAAlC,GAAmD6B,YAAnD,GAAkEM,WAA3F;AACA,QAAIE,cAAc,GAAGR,YAAY,GAAIM,WAAW,GAAG,CAAnD;;AACA,QAAI,CAAC,KAAK1C,YAAL,IAAqB,KAAKE,aAA3B,KAA6C,CAAC,KAAK0B,UAAvD,EAAmE;AAC/D,WAAKjF,IAAL,CAAUkE,UAAV,GAAwB8B,kBAAkB,IAAI,KAAKtC,KAAL,GAAa,CAAnC,IAAyC,KAAKyD,MAAL,GAAclB,cAAf,IAAkC,CAA3E,GAAgF,CAAhF,GAAoF,KAAK/B,UAAhH;AACH;;AACD,QAAI,KAAKe,UAAT,EAAqB;AACjB,UAAIJ,UAAU,GAAG,KAAKhB,aAAL,GAAqB,KAAKsD,MAA3C;;AACA,UAAI,CAACtC,UAAU,GAAG,CAAb,IAAkBA,UAAU,GAAG,CAAhC,KAAsC,KAAKL,WAA/C,EAA4D;AACxD,YAAIU,SAAS,GAAGL,UAAU,GAAG,CAAb,GAAiB,WAAjB,GAA+B,UAA/C;;AACA,YAAIK,SAAS,KAAK,WAAlB,EAA+B;AAC3B,eAAKiC,MAAL,GAAe,KAAKA,MAAL,GAAcjF,IAAI,CAACkF,GAAL,CAASvC,UAAT,CAAf,GAAuC,KAAKnB,KAAL,GAAa+B,YAApD,GAAmE,KAAK0B,MAAxE,GACV,KAAKzD,KAAL,GAAa+B,YAAb,GAA4B,KAAKlF,cAAL,CAAoBqD,cADpD;AAEH,SAHD,MAIK;AACD,eAAKuD,MAAL,GAAe,KAAKA,MAAL,GAAc,KAAK5G,cAAL,CAAoBqD,cAAlC,GAAmD1B,IAAI,CAACkF,GAAL,CAASvC,UAAT,CAApD,GAA4EY,YAA5E,GACV,KAAK0B,MADK,GACI1B,YADlB;AAEH;;AACDN,QAAAA,IAAI,GAAG,KAAKC,kBAAL,CAAwB,KAAK+B,MAA7B,EAAqC,KAAK5G,cAAL,CAAoBqD,cAAzD,EAAyEsB,SAAzE,CAAP;;AACA,YAAIC,IAAJ,EAAU;AACN,eAAKpF,SAAL,CAAeuE,OAAf,CAAuB1E,SAAvB,EAAkCuF,IAAlC;AACA,eAAKd,aAAL,GAAqB,KAArB;AACH;AACJ;;AACD,UAAI,KAAKhB,YAAL,IAAqB,KAAKE,aAA9B,EAA6C;AACzC4B,QAAAA,IAAI,GAAG,KAAKC,kBAAL,CAAwB,KAAK+B,MAA7B,EAAqC,KAAK5G,cAAL,CAAoBqD,cAAzD,CAAP;;AACA,YAAIuB,IAAJ,EAAU;AACN,eAAKpF,SAAL,CAAeuE,OAAf,CAAuB1E,SAAvB,EAAkCuF,IAAlC;AACA,eAAKd,aAAL,GAAqB,KAArB;AACH;AACJ;AACJ;;AACD,SAAKG,WAAL,GAAmB,KAAnB;AACA,SAAKnB,YAAL,GAAoB,KAApB;AACA,SAAKE,aAAL,GAAqB,KAArB;AACA,SAAK2D,WAAL,GAAmB,KAAnB;AACA,SAAKnH,SAAL,CAAewG,WAAf,GAA6B,KAA7B;;AACA,QAAI,KAAKlC,aAAL,IAAsB,CAAC,KAAKY,UAAhC,EAA4C;AACxC,WAAKlF,SAAL,CAAeuE,OAAf,CAAuB1E,SAAvB,EAAkC,KAAK2E,OAAL,CAAa5E,aAAb,EAA4B,KAAKwE,UAAjC,EAA6C,KAAKJ,iBAAlD,EAAqE,KAAKE,eAA1E,CAAlC;AACA,WAAKI,aAAL,GAAqB,KAArB;AACH;AACD;AACR;AACA;AACA;AACA;;;AACQ,QAAI,KAAKiB,cAAT,EAAyB;AACrB,WAAKvF,SAAL,CAAe+B,OAAf,CAAuB4C,KAAvB,CAA6BW,MAA7B,GAAsC,IAAtC;AACH;AACJ,GArDD;;AAsDAvF,EAAAA,SAAS,CAACoB,SAAV,CAAoB4F,wBAApB,GAA+C,UAAUO,YAAV,EAAwBC,gBAAxB,EAA0C;AACrF,QAAIpD,UAAJ;AACA,QAAIF,YAAJ;AACA,QAAImB,IAAJ;AACA,QAAIkB,KAAK,GAAG,KAAKpG,WAAjB;AACA,QAAIsH,aAAa,GAAG,KAAKC,WAAL,CAAiB,KAAKC,aAAtB,EAAqC,KAAKC,WAA1C,EAAuD,KAAvD,CAApB;AACA,QAAIjC,YAAY,GAAG,CAAnB;;AACA,QAAK4B,YAAY,GAAGC,gBAAf,GAAkC7B,YAAnC,IAAoD,KAAK/B,KAA7D,EAAoE;AAChEM,MAAAA,YAAY,GAAG,CAACqD,YAAY,GAAG5B,YAAhB,IAAgC,KAAK/B,KAApD;AACAQ,MAAAA,UAAU,GAAGoD,gBAAgB,GAAI,KAAK5D,KAAtC;AACH;;AACD,QAAIiE,YAAY,GAAGtB,KAAK,CAAClG,GAAN,GAAY6D,YAAY,GAAGqC,KAAK,CAAChG,KAApD;AACA,QAAIuH,UAAU,GAAGD,YAAY,GAAGzD,UAAU,GAAGmC,KAAK,CAAChG,KAAnD;;AACA,QAAIuH,UAAJ,EAAgB;AACZzC,MAAAA,IAAI,GAAG;AAAEnF,QAAAA,IAAI,EAAE,KAAKA,IAAb;AAAmBsG,QAAAA,YAAY,EAAE,KAAKkB,WAAL,CAAiBG,YAAjB,EAA+BC,UAA/B,EAA2C,IAA3C,CAAjC;AAAmFZ,QAAAA,iBAAiB,EAAEO;AAAtG,OAAP;AACH;;AACD,WAAOpC,IAAP;AACH,GAjBD;AAkBA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACIrF,EAAAA,SAAS,CAACoB,SAAV,CAAoBkE,kBAApB,GAAyC,UAAUiC,YAAV,EAAwBC,gBAAxB,EAA0CpC,SAA1C,EAAqD;AAC1F,QAAIc,kBAAkB,GAAGsB,gBAAzB;AACA,QAAIpD,UAAJ;AACA,QAAIF,YAAJ;AACA,QAAI2D,YAAJ;AACA,QAAIC,UAAJ;AACA,QAAIzC,IAAJ;AACA,QAAIkB,KAAK,GAAG,KAAKpG,WAAjB;AACA,QAAIsH,aAAa,GAAG,KAAKC,WAAL,CAAiB,KAAKC,aAAtB,EAAqC,KAAKC,WAA1C,EAAuD,KAAvD,CAApB;AACA,QAAIjC,YAAY,GAAG,CAAnB;AACA,QAAIM,WAAW,GAAG,EAAlB;;AACA,QAAI,KAAKxC,aAAL,IAAsB2B,SAAS,KAAK,WAAxC,EAAqD;AACjDc,MAAAA,kBAAkB,GAAG,KAAKzC,aAAL,GAAqByC,kBAAkB,GAAGD,WAA1C,GAAwDC,kBAA7E;AACA9B,MAAAA,UAAU,GAAG,CAAC8B,kBAAkB,GAAGP,YAAtB,IAAsC,KAAK/B,KAAxD;AACAM,MAAAA,YAAY,GAAGkB,SAAS,KAAK,WAAd,GAA4B,CAACmC,YAAY,GAAG5B,YAAhB,IAAgC,KAAK/B,KAAjE,GAAyE,KAAK1D,IAAL,CAAUgE,YAAlG;AACA2D,MAAAA,YAAY,GAAGzC,SAAS,KAAK,WAAd,GAA6BmB,KAAK,CAAClG,GAAN,GAAY6D,YAAY,GAAGqC,KAAK,CAAChG,KAA9D,GAAuE,KAAKoH,aAA3F;AACAG,MAAAA,UAAU,GAAGD,YAAY,GAAGzD,UAAU,GAAGmC,KAAK,CAAChG,KAA/C;AACH,KAND,MAOK,IAAI,KAAKgD,YAAL,IAAqB6B,SAAS,KAAK,UAAvC,EAAmD;AACpDlB,MAAAA,YAAY,GAAG,CAACqD,YAAY,GAAG5B,YAAhB,IAAgC,KAAK/B,KAApD;AACAQ,MAAAA,UAAU,GAAG8B,kBAAkB,GAAG,KAAKtC,KAAvC;AACAiE,MAAAA,YAAY,GAAGtB,KAAK,CAAClG,GAAN,GAAY6D,YAAY,GAAGqC,KAAK,CAAChG,KAAhD;AACAsH,MAAAA,YAAY,GAAGA,YAAY,IAAItB,KAAK,CAAClG,GAAtB,GAA4BwH,YAA5B,GAA2CtB,KAAK,CAAClG,GAAhE;AACAyH,MAAAA,UAAU,GAAG1C,SAAS,KAAK,UAAd,GAA4ByC,YAAY,GAAGzD,UAAU,GAAGmC,KAAK,CAAChG,KAA9D,GAAuE,KAAKqH,WAAzF;AACH,KANI,MAOA,IAAI,KAAKlD,WAAT,EAAsB;AACvBR,MAAAA,YAAY,GAAGkB,SAAS,KAAK,WAAd,GAA4B,CAACmC,YAAY,GAAG5B,YAAhB,IAAgC,KAAK/B,KAAjE,GAAyE,CAAC2D,YAAY,GAAG5B,YAAhB,IAAgC,KAAK/B,KAA7H;AACAQ,MAAAA,UAAU,GAAI,KAAK3D,cAAL,CAAoBqD,cAArB,GAAuC,KAAKF,KAAzD;AACAiE,MAAAA,YAAY,GAAGtB,KAAK,CAAClG,GAAN,GAAY6D,YAAY,GAAGqC,KAAK,CAAChG,KAAhD;AACAsH,MAAAA,YAAY,GAAGA,YAAY,IAAItB,KAAK,CAAClG,GAAtB,GAA4BwH,YAA5B,GAA2CtB,KAAK,CAAClG,GAAhE;AACAyH,MAAAA,UAAU,GAAGD,YAAY,GAAGzD,UAAU,GAAGmC,KAAK,CAAChG,KAA/C;AACH;;AACD,QAAIuH,UAAJ,EAAgB;AACZzC,MAAAA,IAAI,GAAG;AAAEnF,QAAAA,IAAI,EAAG,KAAKD,SAAL,CAAe8H,QAAf,GAA0B,EAA1B,GAA+B,KAAK7H,IAA7C;AAAoDsG,QAAAA,YAAY,EAAE,KAAKkB,WAAL,CAAiBG,YAAjB,EAA+BC,UAA/B,EAA2C,IAA3C,CAAlE;AACHZ,QAAAA,iBAAiB,EAAEO;AADhB,OAAP;AAEH;;AACD,WAAOpC,IAAP;AACH,GArCD;AAsCA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACIrF,EAAAA,SAAS,CAACoB,SAAV,CAAoBsG,WAApB,GAAkC,UAAUM,KAAV,EAAiBC,GAAjB,EAAsBC,iBAAtB,EAAyC;AACvE,QAAIC,SAAS,GAAG,KAAKA,SAArB;;AACA,QAAI,CAACA,SAAS,KAAK,UAAd,IAA4BA,SAAS,KAAK,kBAA3C,KAAkED,iBAAtE,EAAyF;AACrF,WAAKP,aAAL,GAAqBK,KAArB;AACA,WAAKJ,WAAL,GAAmBK,GAAnB;AACH,KAHD,MAIK,IAAIC,iBAAJ,EAAuB;AACxB,WAAKP,aAAL,GAAqBvF,IAAI,CAACgG,KAAL,CAAWJ,KAAX,CAArB;AACA,WAAKJ,WAAL,GAAmBxF,IAAI,CAACiG,IAAL,CAAUJ,GAAV,CAAnB;AACH;;AACD,YAAQE,SAAR;AACI,WAAK,QAAL;AACA,WAAK,UAAL;AACA,WAAK,aAAL;AACIH,QAAAA,KAAK,GAAG5F,IAAI,CAACgG,KAAL,CAAWJ,KAAX,CAAR;AACAC,QAAAA,GAAG,GAAG7F,IAAI,CAACiG,IAAL,CAAUJ,GAAV,CAAN;AACA;;AACJ,WAAK,UAAL;AACA,WAAK,kBAAL;AACID,QAAAA,KAAK,GAAG,IAAIM,IAAJ,CAASN,KAAT,CAAR;AACAC,QAAAA,GAAG,GAAG,IAAIK,IAAJ,CAASL,GAAT,CAAN;AACA;AAXR;;AAaA,WAAO;AAAEhB,MAAAA,OAAO,EAAEe,KAAX;AAAkBb,MAAAA,OAAO,EAAEc;AAA3B,KAAP;AACH,GAxBD;AAyBA;AACJ;AACA;AACA;AACA;AACA;;;AACIjI,EAAAA,SAAS,CAACoB,SAAV,CAAoBmH,MAApB,GAA6B,UAAUC,aAAV,EAAyB;AAClD,QAAI,KAAKvI,SAAL,CAAewI,UAAf,IAA8BD,aAAa,IAAI,KAAKtI,IAAL,CAAUwI,iBAAV,CAA4BC,MAA/E,EAAwF;AACpF,WAAKC,WAAL;AACH;;AACD,SAAKC,QAAL;AACA,SAAKC,eAAL;AACAtJ,IAAAA,eAAe,CAAC,IAAD,EAAO,KAAKS,SAAL,CAAe8I,WAAtB,CAAf;AACA,SAAKvG,UAAL,CAAgB,KAAKmC,SAArB;AACA,SAAKA,SAAL,CAAeqE,WAAf,CAA2B,KAAKvI,cAAL,CAAoBwI,cAApB,CAAmC,IAAnC,EAAyC,KAAKhJ,SAAL,CAAe8I,WAAxD,CAA3B;AACA,WAAO,KAAKpE,SAAZ;AACH,GAVD;AAWA;AACJ;AACA;AACA;AACA;;;AACI3E,EAAAA,SAAS,CAACoB,SAAV,CAAoByH,QAApB,GAA+B,YAAY;AACvC,SAAKK,mBAAL,GAA2BtJ,sBAAsB,CAAC,KAAKK,SAAL,CAAekJ,KAAhB,CAAjD;AACH,GAFD;AAGA;AACJ;AACA;AACA;AACA;;;AACInJ,EAAAA,SAAS,CAACoB,SAAV,CAAoB0H,eAApB,GAAsC,YAAY;AAC9C,QAAIM,QAAQ,CAACC,cAAT,CAAwB,KAAKpJ,SAAL,CAAe+B,OAAf,CAAuBC,EAAvB,GAA4B,gBAA5B,GAA+C,KAAK/B,IAAL,CAAUiB,IAAjF,CAAJ,EAA4F;AACxF7B,MAAAA,MAAM,CAAC8J,QAAQ,CAACC,cAAT,CAAwB,KAAKpJ,SAAL,CAAe+B,OAAf,CAAuBC,EAAvB,GAA4B,gBAA5B,GAA+C,KAAK/B,IAAL,CAAUiB,IAAjF,CAAD,CAAN;AACH;AACJ,GAJD;AAKA;AACJ;AACA;AACA;AACA;;;AACInB,EAAAA,SAAS,CAACoB,SAAV,CAAoBiF,SAApB,GAAgC,UAAUlD,MAAV,EAAkB;AAC9C,QAAIlB,EAAE,GAAGkB,MAAM,CAAClB,EAAhB;AACA,SAAK0C,SAAL,CAAeC,KAAf,CAAqBC,MAArB,GAA8B5C,EAAE,CAACN,OAAH,CAAW,iBAAX,IAAgC,CAAC,CAAjC,IAAsCM,EAAE,CAACN,OAAH,CAAW,aAAX,IAA4B,CAAC,CAAnE,GAC1B,cAD0B,GACRM,EAAE,CAACN,OAAH,CAAW,SAAX,IAAwB,CAAC,CAAzB,IAA8BM,EAAE,CAACN,OAAH,CAAW,QAAX,IAAuB,CAAC,CAAvD,GAA4D,KAAKgC,UAAL,GAAkB,WAAlB,GAC7E,WADiB,GACH,MAFlB;AAGH,GALD;AAMA;AACJ;AACA;AACA;AACA;;;AACI3D,EAAAA,SAAS,CAACoB,SAAV,CAAoBkF,QAApB,GAA+B,UAAUnD,MAAV,EAAkB;AAC7C,QAAIlB,EAAE,GAAGkB,MAAM,CAAClB,EAAhB;AACA,QAAIqH,WAAW,GAAGrH,EAAE,CAACN,OAAH,CAAW,cAAX,IAA6B,CAAC,CAA9B,IAAmCM,EAAE,CAACN,OAAH,CAAW,aAAX,IAA4B,CAAC,CAAlF;AACA,QAAI4H,YAAY,GAAGtH,EAAE,CAACN,OAAH,CAAW,eAAX,IAA8B,CAAC,CAA/B,IAAoCM,EAAE,CAACN,OAAH,CAAW,cAAX,IAA6B,CAAC,CAArF;AACA,QAAIiD,KAAK,GAAG,KAAKsE,mBAAjB;AACA,QAAIM,YAAY,GAAG,KAAK/I,cAAL,CAAoB+I,YAAvC;AACA,QAAIC,aAAa,GAAG,KAAKhJ,cAAL,CAAoBgJ,aAAxC;AACA,QAAIC,aAAa,GAAG,KAAKjJ,cAAL,CAAoBiJ,aAAxC;AACA,QAAIC,cAAc,GAAG,KAAKlJ,cAAL,CAAoBkJ,cAAzC;AACA,QAAIC,MAAM,GAAG,KAAKC,aAAL,CAAmB1G,MAAnB,EAA2BqG,YAA3B,CAAb;AACAE,IAAAA,aAAa,CAAC9E,KAAd,CAAoBkF,IAApB,GAA2BR,WAAW,IAAIM,MAAf,GAAwBhF,KAAK,CAACmF,WAA9B,GAA4CnF,KAAK,CAACoF,MAA7E;AACAL,IAAAA,cAAc,CAAC/E,KAAf,CAAqBkF,IAArB,GAA4BP,YAAY,IAAIK,MAAhB,GAAyBhF,KAAK,CAACmF,WAA/B,GAA6CnF,KAAK,CAACoF,MAA/E;AACAN,IAAAA,aAAa,CAAC9E,KAAd,CAAoBqF,MAApB,GAA6BX,WAAW,IAAIM,MAAf,GAAwBhF,KAAK,CAACmF,WAA9B,GAA4CnF,KAAK,CAACoF,MAA/E;AACAL,IAAAA,cAAc,CAAC/E,KAAf,CAAqBqF,MAArB,GAA8BV,YAAY,IAAIK,MAAhB,GAAyBhF,KAAK,CAACmF,WAA/B,GAA6CnF,KAAK,CAACoF,MAAjF;;AACA,QAAI,KAAK/J,SAAL,CAAekJ,KAAf,KAAyB,mBAA7B,EAAkD;AAC9CK,MAAAA,YAAY,CAAC5E,KAAb,CAAmBkF,IAAnB,GAA0BR,WAAW,IAAIM,MAAf,GAAwBhF,KAAK,CAACsF,UAA9B,GAA2CtF,KAAK,CAACuF,KAA3E;AACAX,MAAAA,YAAY,CAAC5E,KAAb,CAAmBqF,MAAnB,GAA4BX,WAAW,IAAIM,MAAf,GAAwBhF,KAAK,CAACsF,UAA9B,GAA2CtF,KAAK,CAACuF,KAA7E;AACAV,MAAAA,aAAa,CAAC7E,KAAd,CAAoBkF,IAApB,GAA2BP,YAAY,IAAIK,MAAhB,GAAyBhF,KAAK,CAACsF,UAA/B,GAA4CtF,KAAK,CAACuF,KAA7E;AACAV,MAAAA,aAAa,CAAC7E,KAAd,CAAoBqF,MAApB,GAA6BV,YAAY,IAAIK,MAAhB,GAAyBhF,KAAK,CAACsF,UAA/B,GAA4CtF,KAAK,CAACuF,KAA/E;AACAT,MAAAA,aAAa,CAAC9E,KAAd,CAAoBqF,MAApB,GAA6BX,WAAW,IAAIM,MAAf,GAAwBhF,KAAK,CAACmF,WAA9B,GAA4CnF,KAAK,CAACoF,MAA/E;AACAL,MAAAA,cAAc,CAAC/E,KAAf,CAAqBqF,MAArB,GAA8BV,YAAY,IAAIK,MAAhB,GAAyBhF,KAAK,CAACmF,WAA/B,GAA6CnF,KAAK,CAACoF,MAAjF;AACH;AACJ,GAtBD;AAuBA;AACJ;AACA;AACA;AACA;AACA;;;AACIhK,EAAAA,SAAS,CAACoB,SAAV,CAAoByI,aAApB,GAAoC,UAAU1G,MAAV,EAAkBiH,GAAlB,EAAuB;AACvD,WAAQjH,MAAM,CAAClB,EAAP,CAAUoI,KAAV,CAAgB,GAAhB,EAAqB,CAArB,MAA4BD,GAAG,CAACnI,EAAJ,CAAOoI,KAAP,CAAa,GAAb,EAAkB,CAAlB,CAApC;AACH,GAFD;AAGA;AACJ;AACA;AACA;AACA;;;AACIrK,EAAAA,SAAS,CAACoB,SAAV,CAAoBsF,WAApB,GAAkC,YAAY;AAC1C,QAAIZ,YAAJ;AACA,QAAIH,YAAY,GAAG,CAAnB;AACA,QAAI2E,OAAO,GAAG,CAAd;AACA,QAAIC,SAAS,GAAG,EAAhB;AACA,QAAIC,aAAa,GAAG7E,YAAY,GAAG,CAAf,GAAmB2E,OAAO,GAAG,CAA7B,GAAiCC,SAArD;AACA,QAAI1E,MAAM,GAAG,KAAK9B,aAAlB;AACA,QAAIV,SAAS,GAAG,KAAKnD,IAAL,CAAUoD,aAA1B,CAP0C,CAQ1C;;AACA,QAAIsC,OAAO,GAAI,KAAKjC,UAAL,IAAmBN,SAApB,GAAiC,KAAKf,MAAtC,GAA+C,KAAKqB,UAAL,GAAkB,KAAKC,KAAL,GAC3E,KAAKtB,MADoD,GAC3Ce,SAAS,GAAG,KAAKO,KAAL,GAAa,KAAKzB,MAArB,GAA8B,KAAKA,MAD9D;AAEA,QAAIsI,IAAI,GAAGrI,IAAI,CAACkF,GAAL,CAAS,KAAK5D,UAAL,GAAkBkC,OAA3B,CAAX;;AACA,QAAI,KAAKrC,YAAL,IAAqBqC,OAAO,IAAI,CAApC,EAAuC;AACnC,UAAId,QAAQ,GAAGe,MAAM,IAAID,OAAO,GAAG,KAAKlC,UAAf,GAA4B+G,IAA5B,GAAmC,CAACA,IAAxC,CAArB;AACA3E,MAAAA,YAAY,GAAGhB,QAAQ,GAAGa,YAAX,IAA2B,CAA3B,GAA+B,KAAK9B,aAAL,IAAsB+B,OAAO,GAAG,KAAKlC,UAAf,GAA4B,CAAC+G,IAA7B,GAAoCA,IAA1D,CAA/B,GACX,KAAK5G,aADT;AAEAiB,MAAAA,QAAQ,GAAGA,QAAQ,GAAGa,YAAX,IAA2B,CAA3B,GAA+Bb,QAA/B,GAA0Ce,MAArD;;AACA,UAAIC,YAAY,IAAI0E,aAAhB,IAAiC5E,OAAO,GAAGd,QAAQ,GAAGgB,YAA1D,EAAwE;AACpE,aAAKrF,cAAL,CAAoBuD,UAApB,GAAiC,KAAKD,aAAL,GAAqBe,QAAtD;AACA,aAAKrE,cAAL,CAAoBqD,cAApB,GAAqC,KAAKD,aAAL,GAAqBiC,YAA1D;AACA,aAAKpC,UAAL,GAAkBkC,OAAlB;AACA,aAAKX,aAAL,CAAmBH,QAAnB,EAA6BgB,YAA7B;AACA,aAAKZ,qBAAL,CAA2BJ,QAA3B,EAAqCgB,YAArC;AACH;AACJ,KAZD,MAaK,IAAI,KAAKrC,aAAT,EAAwB;AACzBqC,MAAAA,YAAY,GAAGF,OAAO,IAAI4E,aAAa,GAAG,KAAK/J,cAAL,CAAoBuD,UAA/C,IAA6D4B,OAAO,IAAI,KAAKhC,KAAL,GAAa+B,YAArF,GACXC,OAAO,GAAG,KAAKnF,cAAL,CAAoBuD,UADnB,GACgC,KAAKH,aADpD;AAEA,WAAKpD,cAAL,CAAoBqD,cAApB,GAAqC,KAAKD,aAAL,GAAqBiC,YAA1D;AACA,WAAKpC,UAAL,GAAkBkC,OAAlB;AACA,WAAKX,aAAL,CAAmB,KAAKoC,MAAxB,EAAgCvB,YAAhC;AACA,WAAKZ,qBAAL,CAA2B,KAAKmC,MAAhC,EAAwCvB,YAAxC;;AACA,UAAI,CAAC,KAAKX,UAAV,EAAsB;AAClB,aAAKD,qBAAL,CAA2B,KAAKmC,MAAhC,EAAwCvB,YAAxC;AACH;AACJ;AACJ,GApCD;AAqCA;AACJ;AACA;AACA;AACA;AACA;;;AACI9F,EAAAA,SAAS,CAACoB,SAAV,CAAoB6D,aAApB,GAAoC,UAAUH,QAAV,EAAoBgB,YAApB,EAAkC;AAClE,QAAI1C,IAAI,GAAG,KAAK3C,cAAhB;AACA,QAAI8J,SAAS,GAAG,EAAhB;AACA,QAAIG,kBAAkB,GAAG,CAAzB;AACA,QAAIJ,OAAO,GAAGC,SAAS,GAAG,CAAZ,GAAgBG,kBAA9B;AACAtH,IAAAA,IAAI,CAACuH,MAAL,CAAYC,YAAZ,CAAyB,GAAzB,EAA8B9F,QAAQ,CAAC+F,QAAT,EAA9B;AACAzH,IAAAA,IAAI,CAACuH,MAAL,CAAYC,YAAZ,CAAyB,OAAzB,EAAkC9E,YAAY,CAAC+E,QAAb,EAAlC;AACAzH,IAAAA,IAAI,CAACsG,aAAL,CAAmBkB,YAAnB,CAAgC,IAAhC,EAAsC9F,QAAQ,CAAC+F,QAAT,EAAtC;AACAzH,IAAAA,IAAI,CAACuG,cAAL,CAAoBiB,YAApB,CAAiC,IAAjC,EAAuC,CAAC9F,QAAQ,GAAGgB,YAAZ,EAA0B+E,QAA1B,EAAvC;AACAzH,IAAAA,IAAI,CAAC0H,iBAAL,CAAuBhG,QAAvB,EAAiCgB,YAAjC,EAA+C,KAAKP,MAApD;AACAnC,IAAAA,IAAI,CAAC2H,UAAL,CAAgBH,YAAhB,CAA6B,WAA7B,EAA0C,gBAAgB9F,QAAQ,GAAGgB,YAAY,GAAG,CAA1B,GAA+B,CAAC,KAAKnC,UAAL,GAAkB,CAAlB,GAAsB,CAAC,CAAxB,IAA6B2G,OAA5E,IACtC,GADsC,IAC/B,KAAK3G,UAAL,GAAkB,IAAlB,GAAyB,GADM,IACC,WADD,IACgB,KAAKA,UAAL,GAAkB,KAAlB,GAA0B,GAD1C,IACiD,GAD3F;AAEH,GAZD;AAaA;AACJ;AACA;AACA;AACA;;;AACI3D,EAAAA,SAAS,CAACoB,SAAV,CAAoBwH,WAApB,GAAkC,YAAY;AAC1C,QAAI1I,IAAI,GAAG,KAAKA,IAAhB;AACA,QAAIyF,YAAY,GAAG,CAAnB;AACA,QAAI2E,OAAO,GAAG,CAAd;AACA,QAAIC,SAAS,GAAG,EAAhB;AACA,QAAIC,aAAa,GAAG7E,YAAY,GAAG,CAAf,GAAmB2E,OAAO,GAAG,CAA7B,GAAiCC,SAArD;;AACA,QAAI,KAAKrK,IAAL,CAAUwI,iBAAV,CAA4BC,MAAhC,EAAwC;AACpC,WAAKxD,UAAL,GAAkB,IAAlB;AACA,WAAK6F,eAAL,CAAqB9K,IAArB;AACH;;AACD,SAAKyD,UAAL,GAAkBzD,IAAI,CAAC6G,WAAL,KAAqB,UAAvC;AACA,SAAK3C,UAAL,GAAkB,KAAKe,UAAL,GAAkB,KAAKf,UAAvB,GAAoClE,IAAI,CAACkE,UAA3D;AACA,SAAKF,YAAL,GAAoB,KAAKiB,UAAL,GAAkB,KAAKjB,YAAvB,GAAsChE,IAAI,CAACgE,YAA/D;AACA,QAAI4B,YAAY,GAAG,KAAK1B,UAAL,IAAmB,KAAKT,UAAL,GAAkBzD,IAAI,CAACkG,IAAL,CAAUb,MAA5B,GAAqCrF,IAAI,CAACkG,IAAL,CAAUxC,KAAlE,CAAnB;AACAkC,IAAAA,YAAY,GAAGA,YAAY,GAAG0E,aAAf,GAA+B1E,YAA/B,GAA8C0E,aAA7D;AACA,SAAKS,OAAL,GAAe/K,IAAI,CAACkG,IAAL,CAAU8E,CAAzB;AACA,SAAKC,OAAL,GAAejL,IAAI,CAACkG,IAAL,CAAUgF,CAAzB;AACA,SAAKxH,KAAL,GAAa,KAAKD,UAAL,GAAkBzD,IAAI,CAACkG,IAAL,CAAUb,MAA5B,GAAqCrF,IAAI,CAACkG,IAAL,CAAUxC,KAA5D;AACA,SAAK2B,MAAL,GAAc,EAAd;AACA,QAAIT,QAAQ,GAAG,KAAKZ,YAAL,IAAqB,KAAKP,UAAL,GAAkBzD,IAAI,CAACkG,IAAL,CAAUb,MAA5B,GAAqC,KAAK3B,KAA/D,CAAf;AACA,QAAIyH,SAAS,GAAI,KAAKzH,KAAL,GAAa4G,aAAb,GAA6B7E,YAA9C;AACA,SAAKlF,cAAL,CAAoBuD,UAApB,GAAiCc,QAAQ,GAAGuG,SAAX,GAAuBA,SAAvB,GAAmCvG,QAAQ,GAAGa,YAAX,GAA0BA,YAA1B,GAAyCb,QAA7G;AACA,SAAKrE,cAAL,CAAoBqD,cAApB,GAAuCgC,YAAY,GAAG,KAAKrF,cAAL,CAAoBuD,UAApC,GAAkD,KAAKJ,KAAL,GAAc+B,YAAY,GAAG,CAAhF,GAC/BG,YAD+B,GAChB,KAAKlC,KAAL,GAAa,KAAKnD,cAAL,CAAoBuD,UAAjC,GAA8C2B,YADnE;AAEH,GAxBD;AAyBA;AACJ;AACA;AACA;AACA;;;AACI3F,EAAAA,SAAS,CAACoB,SAAV,CAAoB4J,eAApB,GAAsC,UAAU9K,IAAV,EAAgB;AAClD,QAAI8H,KAAJ;AACA,QAAIC,GAAJ;AACA,QAAIE,SAAS,GAAGjI,IAAI,CAACiI,SAArB;AACA,QAAIO,iBAAiB,GAAGxI,IAAI,CAACwI,iBAA7B;AACA,QAAInC,KAAK,GAAGrG,IAAI,CAACwI,iBAAL,CAAuBnC,KAAnC;AACA,QAAIjC,YAAY,GAAGpE,IAAI,CAACoE,YAAxB;AACA,QAAIgH,YAAY,GAAGpL,IAAI,CAACwI,iBAAL,CAAuB4C,YAA1C;AACA,SAAKnD,SAAL,GAAiBA,SAAS,GAAG,CAAC,CAACO,iBAAiB,CAACnC,KAAlB,CAAwBU,OAAzB,IAAoC,CAACyB,iBAAiB,CAACnC,KAAlB,CAAwBY,OAA9D,KACzBuB,iBAAiB,CAAC4C,YADO,GACQ,QADR,GACmBnD,SADhD;AAEA,QAAIoD,MAAM,GAAG;AACTC,MAAAA,QAAQ,EAAE,MADD;AAET9J,MAAAA,IAAI,EAAE;AAFG,KAAb;AAIA,QAAI+J,UAAU,GAAG,KAAKxL,SAAL,CAAeyL,IAAf,CAAoBC,aAApB,CAAkCJ,MAAlC,CAAjB;AACA,QAAIK,aAAa,GAAG,KAAK3L,SAAL,CAAeyL,IAAf,CAAoBG,aAApB,CAAkCN,MAAlC,CAApB;;AACA,YAAQpD,SAAR;AACI,WAAK,QAAL;AACA,WAAK,UAAL;AACA,WAAK,aAAL;AACIH,QAAAA,KAAK,GAAGzB,KAAK,CAACU,OAAN,GAAgBV,KAAK,CAACU,OAAtB,GAAgCqE,YAAY,GAAG,CAAH,GAAOhH,YAAY,CAACjE,GAAxE;AACA4H,QAAAA,GAAG,GAAG1B,KAAK,CAACY,OAAN,GAAgBZ,KAAK,CAACY,OAAtB,GAAgCmE,YAAY,GAAIA,YAAY,GAAG,CAAnB,GAAwBhH,YAAY,CAAClE,GAAvF;AACA;;AACJ,WAAK,UAAL;AACA,WAAK,kBAAL;AACI4H,QAAAA,KAAK,GAAGzB,KAAK,CAACU,OAAN,GAAgBqB,IAAI,CAACwD,KAAL,CAAWL,UAAU,CAACG,aAAa,CAACrF,KAAK,CAACU,OAAP,CAAd,CAArB,CAAhB,GAAuE3C,YAAY,CAACjE,GAA5F;AACA4H,QAAAA,GAAG,GAAG1B,KAAK,CAACY,OAAN,GAAgBmB,IAAI,CAACwD,KAAL,CAAWL,UAAU,CAACG,aAAa,CAACrF,KAAK,CAACY,OAAP,CAAd,CAArB,CAAhB,GAAuE7C,YAAY,CAAClE,GAA1F;AACA;AAXR;;AAaA4H,IAAAA,KAAK,GAAG5F,IAAI,CAAC/B,GAAL,CAAS2H,KAAT,EAAgB1D,YAAY,CAACjE,GAA7B,CAAR;AACA4H,IAAAA,GAAG,GAAG7F,IAAI,CAAChC,GAAL,CAAS6H,GAAT,EAAc3D,YAAY,CAAClE,GAA3B,CAAN;AACA,QAAIgE,UAAU,GAAG,CAACE,YAAY,CAAClE,GAAb,GAAmBkE,YAAY,CAACjE,GAAjC,KAAyC4H,GAAG,GAAGD,KAA/C,CAAjB;AACA,QAAI9D,YAAY,GAAG,CAACI,YAAY,CAACjE,GAAb,GAAmB2H,KAApB,KAA8BC,GAAG,GAAGD,KAApC,CAAnB;AACA,SAAK5D,UAAL,GAAkBmC,KAAK,CAACU,OAAN,IAAiBV,KAAK,CAACY,OAAvB,GAAiC/C,UAAjC,GAA+C,KAAKlE,IAAL,CAAU6L,cAAV,GAA2B7L,IAAI,CAACwI,iBAAL,CAAuB4C,YAAnH;AACA,SAAKpH,YAAL,GAAoBqC,KAAK,CAACU,OAAN,IAAiBV,KAAK,CAACY,OAAvB,GAAiCjD,YAAjC,GAAgDhE,IAAI,CAACgE,YAAzE;AACA,SAAK/D,WAAL,CAAiBE,GAAjB,GAAuB2H,KAAvB;AACA,SAAK7H,WAAL,CAAiBC,GAAjB,GAAuB6H,GAAvB;AACA,SAAK9H,WAAL,CAAiBI,KAAjB,GAAyB0H,GAAG,GAAGD,KAA/B;AACA,SAAKL,aAAL,GAAqBrD,YAAY,CAACjE,GAAlC;AACA,SAAKuH,WAAL,GAAmBtD,YAAY,CAAClE,GAAhC;AACH,GAxCD;AAyCA;AACJ;AACA;AACA;AACA;;;AACIJ,EAAAA,SAAS,CAACoB,SAAV,CAAoB4K,WAApB,GAAkC,UAAU9L,IAAV,EAAgB;AAC9C,QAAIqG,KAAK,GAAGrG,IAAI,CAACwI,iBAAL,CAAuBnC,KAAnC;AACA,QAAIyB,KAAK,GAAGrI,OAAO,CAAC4G,KAAK,CAACU,OAAP,EAAgB/G,IAAI,CAACP,OAArB,CAAnB;AACA,QAAIsI,GAAG,GAAGtI,OAAO,CAAC4G,KAAK,CAACY,OAAP,EAAgBjH,IAAI,CAACP,OAArB,CAAjB;AACAqI,IAAAA,KAAK,GAAGiE,QAAQ,CAACjE,KAAD,CAAR,GAAkBA,KAAlB,GAA0BzB,KAAK,CAACU,OAAxC;AACAgB,IAAAA,GAAG,GAAGgE,QAAQ,CAACjE,KAAD,CAAR,GAAkBC,GAAlB,GAAwB1B,KAAK,CAACY,OAApC;AACA,WAAO;AAAEF,MAAAA,OAAO,EAAE7E,IAAI,CAAC8J,KAAL,CAAWlE,KAAK,GAAG,CAAnB,CAAX;AAAkCb,MAAAA,OAAO,EAAE/E,IAAI,CAACiG,IAAL,CAAUJ,GAAG,GAAG,CAAhB;AAA3C,KAAP;AACH,GAPD;AAQA;AACJ;AACA;AACA;AACA;AACA;;;AACIjI,EAAAA,SAAS,CAACoB,SAAV,CAAoB+K,QAApB,GAA+B,UAAUjM,IAAV,EAAgBD,SAAhB,EAA2B;AACtDC,IAAAA,IAAI,CAACkM,gBAAL,GAAwB,IAAIpM,SAAJ,CAAcC,SAAd,EAAyBC,IAAzB,CAAxB;AACH,GAFD;AAGA;AACJ;AACA;AACA;AACA;;;AACIF,EAAAA,SAAS,CAACoB,SAAV,CAAoBiL,OAApB,GAA8B,YAAY;AACtC,QAAIC,KAAK,GAAG,IAAZ;;AACA,QAAI,KAAKC,IAAT,EAAe;AACX,WAAKA,IAAL,CAAUC,GAAV,CAAc,UAAUtM,IAAV,EAAgB;AAC1BA,QAAAA,IAAI,CAACkM,gBAAL,CAAsBC,OAAtB;AACH,OAFD;AAGH,KAJD,MAKK;AACD,WAAK7L,QAAL,CAAcgM,GAAd,CAAkB,UAAUxK,OAAV,EAAmB;AACjCsK,QAAAA,KAAK,CAACrJ,YAAN,CAAmBjB,OAAnB;;AACA1C,QAAAA,MAAM,CAAC0C,OAAO,CAACyK,UAAT,CAAN;AACH,OAHD;AAIA,WAAKjM,QAAL,GAAgB,EAAhB;AACH;AACJ,GAdD;AAeA;AACJ;AACA;AACA;AACA;;;AACIR,EAAAA,SAAS,CAACoB,SAAV,CAAoBsL,aAApB,GAAoC,YAAY;AAC5C,WAAO,WAAP;AACH,GAFD;;AAGA1M,EAAAA,SAAS,CAACoB,SAAV,CAAoBqD,OAApB,GAA8B,UAAUkI,SAAV,EAAqBpG,KAArB,EAA4BrC,YAA5B,EAA0CE,UAA1C,EAAsDwI,aAAtD,EAAqE;AAC/F,QAAIC,UAAU,GAAG;AACb3M,MAAAA,IAAI,EAAG,KAAKD,SAAL,CAAe8H,QAAf,GAA0B,EAA1B,GAA+B,KAAK7H,IAD9B;AAEbiB,MAAAA,IAAI,EAAEwL,SAFO;AAGbpG,MAAAA,KAAK,EAAE,KAAKrG,IAAL,CAAUoE,YAHJ;AAIbF,MAAAA,UAAU,EAAE,KAAKlE,IAAL,CAAUkE,UAJT;AAKbF,MAAAA,YAAY,EAAE,KAAKhE,IAAL,CAAUgE,YALX;AAMbuD,MAAAA,aAAa,EAAElB,KANF;AAObuG,MAAAA,kBAAkB,EAAE1I,UAPP;AAQb2I,MAAAA,oBAAoB,EAAE7I,YART;AASbsC,MAAAA,YAAY,EAAEoG;AATD,KAAjB;AAWA,WAAOC,UAAP;AACH,GAbD;;AAcA,SAAO7M,SAAP;AACH,CAxtB8B,EAA/B;;AAytBA,SAASA,SAAT","sourcesContent":["/* eslint-disable @typescript-eslint/ban-types */\r\n/* eslint-disable @typescript-eslint/no-inferrable-types */\r\nimport { EventHandler, Browser, remove } from '@syncfusion/ej2-base';\r\nimport { ScrollElements, createScrollSvg } from './scrollbar-elements';\r\nimport { getElement, minMax, logBase } from '../utils/helper';\r\nimport { getScrollbarThemeColor } from '../model/theme';\r\nimport { scrollChanged, scrollEnd, scrollStart } from '../model/constants';\r\n/**\r\n * Scrollbar Base\r\n */\r\nvar ScrollBar = /** @class */ (function () {\r\n    /**\r\n     * Constructor for creating scrollbar\r\n     *\r\n     * @param component\r\n     * @param axis\r\n     */\r\n    function ScrollBar(component, axis) {\r\n        /** @private */\r\n        this.scrollRange = { max: null, min: null, interval: null, delta: null };\r\n        this.component = component;\r\n        this.elements = [];\r\n        this.scrollElements = new ScrollElements(component);\r\n        this.axis = axis;\r\n        this.mouseMoveListener = this.scrollMouseMove.bind(this);\r\n        this.mouseUpListener = this.scrollMouseUp.bind(this);\r\n        this.animateDuration = 500;\r\n        this.isPointer = Browser.isPointer;\r\n        this.browserName = Browser.info.name;\r\n    }\r\n    /**\r\n     * To Mouse x and y position\r\n     *\r\n     * @param e\r\n     */\r\n    ScrollBar.prototype.getMouseXY = function (e) {\r\n        var pageX;\r\n        var pageY;\r\n        var touchArg;\r\n        if (e.type.indexOf('touch') > -1) {\r\n            touchArg = e;\r\n            pageX = touchArg.changedTouches[0].clientX;\r\n            pageY = touchArg.changedTouches[0].clientY;\r\n        }\r\n        else {\r\n            pageX = e.clientX;\r\n            pageY = e.clientY;\r\n        }\r\n        var svgRect = getElement(this.component.element.id + '_scrollBar_svg' + this.axis.name).getBoundingClientRect();\r\n        this.mouseX = pageX - Math.max(svgRect.left, 0);\r\n        this.mouseY = pageY - Math.max(svgRect.top, 0);\r\n    };\r\n    /**\r\n     * Method to bind events for scrollbar svg object\r\n     *\r\n     * @param element\r\n     * @returns {void}\r\n     */\r\n    ScrollBar.prototype.wireEvents = function (element) {\r\n        EventHandler.add(element, Browser.touchStartEvent, this.scrollMouseDown, this);\r\n        EventHandler.add(element, Browser.touchMoveEvent, this.scrollMouseMove, this);\r\n        EventHandler.add(element, Browser.touchEndEvent, this.scrollMouseUp, this);\r\n        EventHandler.add(element, 'mousewheel', this.scrollMouseWheel, this);\r\n        window.addEventListener('mousemove', this.mouseMoveListener, false);\r\n        window.addEventListener('mouseup', this.mouseUpListener, false);\r\n    };\r\n    /**\r\n     * Method to remove events for srcollbar svg object\r\n     *\r\n     * @param element\r\n     */\r\n    ScrollBar.prototype.unWireEvents = function (element) {\r\n        EventHandler.remove(element, Browser.touchStartEvent, this.scrollMouseDown);\r\n        EventHandler.remove(element, Browser.touchMoveEvent, this.scrollMouseMove);\r\n        EventHandler.remove(element, Browser.touchEndEvent, this.scrollMouseUp);\r\n        EventHandler.remove(element, 'mousewheel', this.scrollMouseWheel);\r\n        window.removeEventListener('mousemove', this.mouseMoveListener, false);\r\n        window.removeEventListener('mouseup', this.mouseUpListener, false);\r\n    };\r\n    /**\r\n     * Handles the mouse down on scrollbar\r\n     *\r\n     * @param e\r\n     */\r\n    ScrollBar.prototype.scrollMouseDown = function (e) {\r\n        var id = e.target.id;\r\n        var elem = this.scrollElements;\r\n        var isInverse = this.axis.isAxisInverse;\r\n        this.getMouseXY(e);\r\n        this.isResizeLeft = this.isExist(id, '_leftCircle_') || this.isExist(id, '_leftArrow_');\r\n        this.isResizeRight = this.isExist(id, '_rightCircle_') || this.isExist(id, '_rightArrow_');\r\n        //  this.previousXY = this.isVertical ? this.mouseY : this.mouseX;\r\n        this.previousXY = (this.isVertical && isInverse) ? this.mouseY : this.isVertical ? this.width -\r\n            this.mouseY : isInverse ? this.width - this.mouseX : this.mouseX;\r\n        this.previousWidth = elem.thumbRectWidth;\r\n        this.previousRectX = elem.thumbRectX;\r\n        this.startZoomPosition = this.axis.zoomPosition;\r\n        this.startZoomFactor = this.axis.zoomFactor;\r\n        this.startRange = this.axis.visibleRange;\r\n        this.scrollStarted = true;\r\n        this.component.trigger(scrollStart, this.getArgs(scrollStart));\r\n        if (this.isExist(id, 'scrollBarThumb_') || this.isExist(id, 'gripCircle')) {\r\n            this.isThumbDrag = true;\r\n            this.svgObject.style.cursor = '-webkit-grabbing';\r\n        }\r\n        else if (this.isExist(id, 'scrollBarBackRect_')) {\r\n            var currentX = this.moveLength(this.previousXY, this.previousRectX);\r\n            elem.thumbRectX = this.isWithIn(currentX) ? currentX : elem.thumbRectX;\r\n            this.positionThumb(elem.thumbRectX, elem.thumbRectWidth);\r\n            this.setZoomFactorPosition(elem.thumbRectX, elem.thumbRectWidth, false);\r\n            if (this.isLazyLoad) {\r\n                var thumbMove = elem.thumbRectX > this.previousRectX ? 'RightMove' : 'LeftMove';\r\n                var args = this.calculateLazyRange(elem.thumbRectX, elem.thumbRectWidth, thumbMove);\r\n                if (args) {\r\n                    this.component.trigger(scrollEnd, args);\r\n                }\r\n            }\r\n        }\r\n        /**\r\n         * Customer issue\r\n         * Task ID - EJ2-28898\r\n         * Issue: While element's height is smaller than chart'height, html scroll bar presents. On that case while moving chart scrollbar,\r\n         * html scrollbar goes up due to chart's svg removed from the dom when zoomFactor and zoomPosition chnaged\r\n         * Fix: Only for scrolling purpose, height for element is set to chart's available height\r\n         */\r\n        if (this.component.element.style.height === '') {\r\n            this.isCustomHeight = true;\r\n            this.component.element.style.height = this.component.availableSize.height + 'px';\r\n        }\r\n    };\r\n    /**\r\n     * To check the matched string\r\n     *\r\n     * @param id\r\n     * @param match\r\n     */\r\n    ScrollBar.prototype.isExist = function (id, match) {\r\n        return id.indexOf(match) > -1;\r\n    };\r\n    /**\r\n     * To check current poisition is within scrollbar region\r\n     *\r\n     * @param currentX\r\n     */\r\n    ScrollBar.prototype.isWithIn = function (currentX) {\r\n        var circleRadius = 8;\r\n        return (currentX - circleRadius >= 0 &&\r\n            currentX + this.scrollElements.thumbRectWidth + circleRadius <= this.width);\r\n    };\r\n    /**\r\n     * Method to find move length of thumb\r\n     *\r\n     * @param mouseXY\r\n     * @param thumbX\r\n     * @param circleRadius\r\n     */\r\n    ScrollBar.prototype.moveLength = function (mouseXY, thumbX, circleRadius) {\r\n        if (circleRadius === void 0) { circleRadius = 8; }\r\n        var moveLength = (10 / 100) * (this.width - circleRadius * 2);\r\n        if (mouseXY < thumbX) {\r\n            moveLength = thumbX - (thumbX - moveLength > circleRadius ? moveLength : circleRadius);\r\n        }\r\n        else {\r\n            moveLength = thumbX + (thumbX + this.scrollElements.thumbRectWidth + moveLength < this.width - circleRadius ?\r\n                moveLength : circleRadius);\r\n        }\r\n        return moveLength;\r\n    };\r\n    /**\r\n     * Method to calculate zoom factor and position\r\n     *\r\n     * @param currentX\r\n     * @param currentWidth\r\n     */\r\n    ScrollBar.prototype.setZoomFactorPosition = function (currentX, currentWidth, isRequire) {\r\n        if (isRequire === void 0) { isRequire = true; }\r\n        this.isScrollUI = true;\r\n        var axis = this.axis;\r\n        var circleRadius = 8;\r\n        var circleWidth = 1;\r\n        var currentScrollWidth = currentX + currentWidth + circleRadius + circleWidth;\r\n        var currentZPWidth = circleRadius + (circleWidth / 2);\r\n        this.zoomPosition = (currentX - (currentX - currentZPWidth <= 0 ? currentZPWidth : 0)) / (this.isVertical\r\n            ? axis.rect.height : this.width);\r\n        this.zoomFactor = (currentWidth + (currentScrollWidth >= this.width ? circleRadius + circleWidth : 0)) / (this.isVertical\r\n            ? axis.rect.height : this.width);\r\n        axis.zoomPosition = this.zoomPosition < 0 ? 0 : this.zoomPosition > 0.9 ? 1 : this.zoomPosition;\r\n        axis.zoomFactor = isRequire ? this.zoomFactor : axis.zoomFactor;\r\n    };\r\n    /**\r\n     * Handles the mouse move on scrollbar\r\n     *\r\n     * @param e\r\n     */\r\n    ScrollBar.prototype.scrollMouseMove = function (e) {\r\n        var target = e.target;\r\n        var elem = this.scrollElements;\r\n        var isInverse = this.axis.isAxisInverse;\r\n        if (!getElement(this.svgObject.id)) {\r\n            return null;\r\n        }\r\n        this.getMouseXY(e);\r\n        this.setCursor(target);\r\n        this.setTheme(target);\r\n        //let mouseXY: number = this.isVertical ? this.mouseY : this.mouseX;\r\n        var mouseXY = (this.isVertical && isInverse) ? this.width - this.mouseY : this.isVertical ?\r\n            this.mouseY : this.mouseX;\r\n        var range = this.axis.visibleRange;\r\n        var zoomPosition = this.zoomPosition;\r\n        var zoomFactor = this.zoomFactor;\r\n        var moveLength = this.previousRectX - elem.thumbRectX;\r\n        var thumbMove = moveLength < 0 ? 'RightMove' : 'LeftMove';\r\n        var args;\r\n        if (this.isLazyLoad && (this.isThumbDrag || this.isResizeLeft || this.isResizeRight)) {\r\n            args = this.calculateLazyRange(elem.thumbRectX, elem.thumbRectWidth, thumbMove);\r\n        }\r\n        var currentRange = args ? args.currentRange : null;\r\n        if (this.isThumbDrag) {\r\n            this.component.isScrolling = this.isThumbDrag;\r\n            mouseXY = (this.isVertical || isInverse) ? this.width - mouseXY : mouseXY;\r\n            var currentX = elem.thumbRectX + (mouseXY - this.previousXY);\r\n            if (mouseXY >= currentX + elem.thumbRectWidth) {\r\n                this.setCursor(target);\r\n            }\r\n            else {\r\n                this.svgObject.style.cursor = '-webkit-grabbing';\r\n            }\r\n            if (mouseXY >= 0 && mouseXY <= currentX + elem.thumbRectWidth) {\r\n                elem.thumbRectX = this.isWithIn(currentX) ? currentX : elem.thumbRectX;\r\n                this.positionThumb(elem.thumbRectX, elem.thumbRectWidth);\r\n                this.previousXY = mouseXY;\r\n                this.setZoomFactorPosition(currentX, elem.thumbRectWidth, false);\r\n            }\r\n            this.component.trigger(scrollChanged, this.getArgs(scrollChanged, range, zoomPosition, zoomFactor, currentRange));\r\n        }\r\n        else if (this.isResizeLeft || this.isResizeRight) {\r\n            this.resizeThumb();\r\n            this.component.trigger(scrollChanged, this.getArgs(scrollChanged, range, zoomPosition, zoomFactor, currentRange));\r\n        }\r\n    };\r\n    /**\r\n     * Handles the mouse wheel on scrollbar\r\n     *\r\n     * @param e\r\n     */\r\n    ScrollBar.prototype.scrollMouseWheel = function (e) {\r\n        var svgRect = getElement(this.component.element.id + '_scrollBar_svg' + this.axis.name).getBoundingClientRect();\r\n        this.mouseX = e.clientX - Math.max(svgRect.left, 0);\r\n        this.mouseY = e.clientY - Math.max(svgRect.top, 0);\r\n        var origin = 0.5;\r\n        var elem = this.scrollElements;\r\n        var axis = this.axis;\r\n        var direction = (this.browserName === 'mozilla' && !this.isPointer) ?\r\n            -(e.detail) / 3 > 0 ? 1 : -1 : (e['wheelDelta'] / 120) > 0 ? 1 : -1;\r\n        var cumulative = Math.max(Math.max(1 / minMax(axis.zoomFactor, 0, 1), 1) + (0.25 * direction), 1);\r\n        var range = this.axis.visibleRange;\r\n        var zoomPosition = this.zoomPosition;\r\n        var zoomFactor = this.zoomFactor;\r\n        var args;\r\n        if (cumulative >= 1) {\r\n            origin = axis.orientation === 'Horizontal' ? this.mouseX / axis.rect.width : 1 - (this.mouseY / axis.rect.height);\r\n            origin = origin > 1 ? 1 : origin < 0 ? 0 : origin;\r\n            this.zoomFactor = (cumulative === 1) ? 1 : minMax(1 / cumulative, 0, 1);\r\n            this.zoomPosition = (cumulative === 1) ? 0 : axis.zoomPosition + ((axis.zoomFactor - this.zoomFactor) * origin);\r\n        }\r\n        elem.thumbRectX = this.isWithIn(this.zoomPosition * this.width) ? this.zoomPosition * this.width : elem.thumbRectX;\r\n        this.isScrollUI = true;\r\n        this.positionThumb(elem.thumbRectX, elem.thumbRectWidth);\r\n        if (this.isLazyLoad) {\r\n            this.setZoomFactorPosition(elem.thumbRectX, elem.thumbRectWidth);\r\n        }\r\n        axis.zoomFactor = this.zoomFactor;\r\n        axis.zoomPosition = this.zoomPosition;\r\n        if (this.isLazyLoad) {\r\n            args = this.calculateMouseWheelRange(elem.thumbRectX, elem.thumbRectWidth);\r\n            if (args) {\r\n                if ((args.currentRange.minimum !== args.previousAxisRange.minimum) && (args.currentRange.maximum !==\r\n                    args.previousAxisRange.maximum)) {\r\n                    this.component.trigger(scrollEnd, args);\r\n                    this.isScrollEnd = false;\r\n                }\r\n            }\r\n        }\r\n        if (!this.isLazyLoad) {\r\n            this.component.trigger(scrollChanged, this.getArgs(scrollChanged, range, zoomPosition, zoomFactor));\r\n        }\r\n    };\r\n    /**\r\n     * Handles the mouse up on scrollbar\r\n     *\r\n     * @param e\r\n     */\r\n    ScrollBar.prototype.scrollMouseUp = function () {\r\n        var args;\r\n        this.startX = this.scrollElements.thumbRectX;\r\n        var circleRadius = 8;\r\n        var circleWidth = 1;\r\n        var currentScrollWidth = this.startX + this.scrollElements.thumbRectWidth + circleRadius + circleWidth;\r\n        var currentZPWidth = circleRadius + (circleWidth / 2);\r\n        if ((this.isResizeLeft || this.isResizeRight) && !this.isLazyLoad) {\r\n            this.axis.zoomFactor = (currentScrollWidth >= this.width - 1 && (this.startX - currentZPWidth) <= 0) ? 1 : this.zoomFactor;\r\n        }\r\n        if (this.isLazyLoad) {\r\n            var moveLength = this.previousRectX - this.startX;\r\n            if ((moveLength > 0 || moveLength < 0) && this.isThumbDrag) {\r\n                var thumbMove = moveLength < 0 ? 'RightMove' : 'LeftMove';\r\n                if (thumbMove === 'RightMove') {\r\n                    this.startX = (this.startX + Math.abs(moveLength)) < this.width - circleRadius ? this.startX :\r\n                        this.width - circleRadius - this.scrollElements.thumbRectWidth;\r\n                }\r\n                else {\r\n                    this.startX = (this.startX + this.scrollElements.thumbRectWidth - Math.abs(moveLength)) > circleRadius ?\r\n                        this.startX : circleRadius;\r\n                }\r\n                args = this.calculateLazyRange(this.startX, this.scrollElements.thumbRectWidth, thumbMove);\r\n                if (args) {\r\n                    this.component.trigger(scrollEnd, args);\r\n                    this.scrollStarted = false;\r\n                }\r\n            }\r\n            if (this.isResizeLeft || this.isResizeRight) {\r\n                args = this.calculateLazyRange(this.startX, this.scrollElements.thumbRectWidth);\r\n                if (args) {\r\n                    this.component.trigger(scrollEnd, args);\r\n                    this.scrollStarted = false;\r\n                }\r\n            }\r\n        }\r\n        this.isThumbDrag = false;\r\n        this.isResizeLeft = false;\r\n        this.isResizeRight = false;\r\n        this.isScrollEnd = false;\r\n        this.component.isScrolling = false;\r\n        if (this.scrollStarted && !this.isLazyLoad) {\r\n            this.component.trigger(scrollEnd, this.getArgs(scrollChanged, this.startRange, this.startZoomPosition, this.startZoomFactor));\r\n            this.scrollStarted = false;\r\n        }\r\n        /**\r\n         * Customer issue\r\n         * Task ID - EJ2-28898\r\n         * Chart's height setted is removed here.\r\n         */\r\n        if (this.isCustomHeight) {\r\n            this.component.element.style.height = null;\r\n        }\r\n    };\r\n    ScrollBar.prototype.calculateMouseWheelRange = function (scrollThumbX, scrollThumbWidth) {\r\n        var zoomFactor;\r\n        var zoomPosition;\r\n        var args;\r\n        var range = this.scrollRange;\r\n        var previousRange = this.getStartEnd(this.previousStart, this.previousEnd, false);\r\n        var circleRadius = 8;\r\n        if ((scrollThumbX + scrollThumbWidth + circleRadius) <= this.width) {\r\n            zoomPosition = (scrollThumbX - circleRadius) / this.width;\r\n            zoomFactor = scrollThumbWidth / (this.width);\r\n        }\r\n        var currentStart = range.min + zoomPosition * range.delta;\r\n        var currentEnd = currentStart + zoomFactor * range.delta;\r\n        if (currentEnd) {\r\n            args = { axis: this.axis, currentRange: this.getStartEnd(currentStart, currentEnd, true), previousAxisRange: previousRange };\r\n        }\r\n        return args;\r\n    };\r\n    /**\r\n     * Range calculation for lazy loading\r\n     *\r\n     * @param scrollThumbX\r\n     * @param scrollThumbWidth\r\n     * @param thumbMove\r\n     * @param scrollThumbX\r\n     * @param scrollThumbWidth\r\n     * @param thumbMove\r\n     * @param scrollThumbX\r\n     * @param scrollThumbWidth\r\n     * @param thumbMove\r\n     */\r\n    ScrollBar.prototype.calculateLazyRange = function (scrollThumbX, scrollThumbWidth, thumbMove) {\r\n        var currentScrollWidth = scrollThumbWidth;\r\n        var zoomFactor;\r\n        var zoomPosition;\r\n        var currentStart;\r\n        var currentEnd;\r\n        var args;\r\n        var range = this.scrollRange;\r\n        var previousRange = this.getStartEnd(this.previousStart, this.previousEnd, false);\r\n        var circleRadius = 8;\r\n        var circleWidth = 16;\r\n        if (this.isResizeRight || thumbMove === 'RightMove') {\r\n            currentScrollWidth = this.isResizeRight ? currentScrollWidth + circleWidth : currentScrollWidth;\r\n            zoomFactor = (currentScrollWidth + circleRadius) / this.width;\r\n            zoomPosition = thumbMove === 'RightMove' ? (scrollThumbX + circleRadius) / this.width : this.axis.zoomPosition;\r\n            currentStart = thumbMove === 'RightMove' ? (range.min + zoomPosition * range.delta) : this.previousStart;\r\n            currentEnd = currentStart + zoomFactor * range.delta;\r\n        }\r\n        else if (this.isResizeLeft || thumbMove === 'LeftMove') {\r\n            zoomPosition = (scrollThumbX - circleRadius) / this.width;\r\n            zoomFactor = currentScrollWidth / this.width;\r\n            currentStart = range.min + zoomPosition * range.delta;\r\n            currentStart = currentStart >= range.min ? currentStart : range.min;\r\n            currentEnd = thumbMove === 'LeftMove' ? (currentStart + zoomFactor * range.delta) : this.previousEnd;\r\n        }\r\n        else if (this.isThumbDrag) {\r\n            zoomPosition = thumbMove === 'RightMove' ? (scrollThumbX + circleRadius) / this.width : (scrollThumbX - circleRadius) / this.width;\r\n            zoomFactor = (this.scrollElements.thumbRectWidth) / this.width;\r\n            currentStart = range.min + zoomPosition * range.delta;\r\n            currentStart = currentStart >= range.min ? currentStart : range.min;\r\n            currentEnd = currentStart + zoomFactor * range.delta;\r\n        }\r\n        if (currentEnd) {\r\n            args = { axis: (this.component.isBlazor ? {} : this.axis), currentRange: this.getStartEnd(currentStart, currentEnd, true),\r\n                previousAxisRange: previousRange };\r\n        }\r\n        return args;\r\n    };\r\n    /**\r\n     * Get start and end values\r\n     *\r\n     * @param start\r\n     * @param end\r\n     * @param isCurrentStartEnd\r\n     * @param start\r\n     * @param end\r\n     * @param isCurrentStartEnd\r\n     * @param start\r\n     * @param end\r\n     * @param isCurrentStartEnd\r\n     */\r\n    ScrollBar.prototype.getStartEnd = function (start, end, isCurrentStartEnd) {\r\n        var valueType = this.valueType;\r\n        if ((valueType === 'DateTime' || valueType === 'DateTimeCategory') && isCurrentStartEnd) {\r\n            this.previousStart = start;\r\n            this.previousEnd = end;\r\n        }\r\n        else if (isCurrentStartEnd) {\r\n            this.previousStart = Math.round(start);\r\n            this.previousEnd = Math.ceil(end);\r\n        }\r\n        switch (valueType) {\r\n            case 'Double':\r\n            case 'Category':\r\n            case 'Logarithmic':\r\n                start = Math.round(start);\r\n                end = Math.ceil(end);\r\n                break;\r\n            case 'DateTime':\r\n            case 'DateTimeCategory':\r\n                start = new Date(start);\r\n                end = new Date(end);\r\n                break;\r\n        }\r\n        return { minimum: start, maximum: end };\r\n    };\r\n    /**\r\n     * To render scroll bar\r\n     *\r\n     * @param isScrollExist\r\n     * @private\r\n     */\r\n    ScrollBar.prototype.render = function (isScrollExist) {\r\n        if (this.component.zoomModule || (isScrollExist && this.axis.scrollbarSettings.enable)) {\r\n            this.getDefaults();\r\n        }\r\n        this.getTheme();\r\n        this.removeScrollSvg();\r\n        createScrollSvg(this, this.component.svgRenderer);\r\n        this.wireEvents(this.svgObject);\r\n        this.svgObject.appendChild(this.scrollElements.renderElements(this, this.component.svgRenderer));\r\n        return this.svgObject;\r\n    };\r\n    /**\r\n     * Theming for scrollabr\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ScrollBar.prototype.getTheme = function () {\r\n        this.scrollbarThemeStyle = getScrollbarThemeColor(this.component.theme);\r\n    };\r\n    /**\r\n     * Method to remove existing scrollbar\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ScrollBar.prototype.removeScrollSvg = function () {\r\n        if (document.getElementById(this.component.element.id + '_scrollBar_svg' + this.axis.name)) {\r\n            remove(document.getElementById(this.component.element.id + '_scrollBar_svg' + this.axis.name));\r\n        }\r\n    };\r\n    /**\r\n     * Method to set cursor fpr scrollbar\r\n     *\r\n     * @param target\r\n     */\r\n    ScrollBar.prototype.setCursor = function (target) {\r\n        var id = target.id;\r\n        this.svgObject.style.cursor = id.indexOf('scrollBarThumb_') > -1 || id.indexOf('_gripCircle') > -1 ?\r\n            '-webkit-grab' : (id.indexOf('Circle_') > -1 || id.indexOf('Arrow_') > -1) ? this.isVertical ? 'ns-resize' :\r\n            'ew-resize' : 'auto';\r\n    };\r\n    /**\r\n     * Method to set theme for sollbar\r\n     *\r\n     * @param target\r\n     */\r\n    ScrollBar.prototype.setTheme = function (target) {\r\n        var id = target.id;\r\n        var isLeftHover = id.indexOf('_leftCircle_') > -1 || id.indexOf('_leftArrow_') > -1;\r\n        var isRightHover = id.indexOf('_rightCircle_') > -1 || id.indexOf('_rightArrow_') > -1;\r\n        var style = this.scrollbarThemeStyle;\r\n        var leftArrowEle = this.scrollElements.leftArrowEle;\r\n        var rightArrowEle = this.scrollElements.rightArrowEle;\r\n        var leftCircleEle = this.scrollElements.leftCircleEle;\r\n        var rightCircleEle = this.scrollElements.rightCircleEle;\r\n        var isAxis = this.isCurrentAxis(target, leftArrowEle);\r\n        leftCircleEle.style.fill = isLeftHover && isAxis ? style.circleHover : style.circle;\r\n        rightCircleEle.style.fill = isRightHover && isAxis ? style.circleHover : style.circle;\r\n        leftCircleEle.style.stroke = isLeftHover && isAxis ? style.circleHover : style.circle;\r\n        rightCircleEle.style.stroke = isRightHover && isAxis ? style.circleHover : style.circle;\r\n        if (this.component.theme === 'HighContrastLight') {\r\n            leftArrowEle.style.fill = isLeftHover && isAxis ? style.arrowHover : style.arrow;\r\n            leftArrowEle.style.stroke = isLeftHover && isAxis ? style.arrowHover : style.arrow;\r\n            rightArrowEle.style.fill = isRightHover && isAxis ? style.arrowHover : style.arrow;\r\n            rightArrowEle.style.stroke = isRightHover && isAxis ? style.arrowHover : style.arrow;\r\n            leftCircleEle.style.stroke = isLeftHover && isAxis ? style.circleHover : style.circle;\r\n            rightCircleEle.style.stroke = isRightHover && isAxis ? style.circleHover : style.circle;\r\n        }\r\n    };\r\n    /**\r\n     * To check current axis\r\n     *\r\n     * @param target\r\n     * @param ele\r\n     */\r\n    ScrollBar.prototype.isCurrentAxis = function (target, ele) {\r\n        return (target.id.split('_')[2] === ele.id.split('_')[2]);\r\n    };\r\n    /**\r\n     * Method to resize thumb\r\n     *\r\n     * @param e\r\n     */\r\n    ScrollBar.prototype.resizeThumb = function () {\r\n        var currentWidth;\r\n        var circleRadius = 8;\r\n        var padding = 5;\r\n        var gripWidth = 14;\r\n        var minThumbWidth = circleRadius * 2 + padding * 2 + gripWidth;\r\n        var thumbX = this.previousRectX;\r\n        var isInverse = this.axis.isAxisInverse;\r\n        // let mouseXY: number = this.isVertical ? this.mouseY : this.mouseX;\r\n        var mouseXY = (this.isVertical && isInverse) ? this.mouseY : this.isVertical ? this.width -\r\n            this.mouseY : isInverse ? this.width - this.mouseX : this.mouseX;\r\n        var diff = Math.abs(this.previousXY - mouseXY);\r\n        if (this.isResizeLeft && mouseXY >= 0) {\r\n            var currentX = thumbX + (mouseXY > this.previousXY ? diff : -diff);\r\n            currentWidth = currentX - circleRadius >= 0 ? this.previousWidth + (mouseXY > this.previousXY ? -diff : diff) :\r\n                this.previousWidth;\r\n            currentX = currentX - circleRadius >= 0 ? currentX : thumbX;\r\n            if (currentWidth >= minThumbWidth && mouseXY < currentX + currentWidth) {\r\n                this.scrollElements.thumbRectX = this.previousRectX = currentX;\r\n                this.scrollElements.thumbRectWidth = this.previousWidth = currentWidth;\r\n                this.previousXY = mouseXY;\r\n                this.positionThumb(currentX, currentWidth);\r\n                this.setZoomFactorPosition(currentX, currentWidth);\r\n            }\r\n        }\r\n        else if (this.isResizeRight) {\r\n            currentWidth = mouseXY >= minThumbWidth + this.scrollElements.thumbRectX && mouseXY <= this.width - circleRadius ?\r\n                mouseXY - this.scrollElements.thumbRectX : this.previousWidth;\r\n            this.scrollElements.thumbRectWidth = this.previousWidth = currentWidth;\r\n            this.previousXY = mouseXY;\r\n            this.positionThumb(this.startX, currentWidth);\r\n            this.setZoomFactorPosition(this.startX, currentWidth);\r\n            if (!this.isLazyLoad) {\r\n                this.setZoomFactorPosition(this.startX, currentWidth);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Method to position the scrollbar thumb\r\n     *\r\n     * @param currentX\r\n     * @param currentWidth\r\n     */\r\n    ScrollBar.prototype.positionThumb = function (currentX, currentWidth) {\r\n        var elem = this.scrollElements;\r\n        var gripWidth = 14;\r\n        var gripCircleDiameter = 2;\r\n        var padding = gripWidth / 2 - gripCircleDiameter;\r\n        elem.slider.setAttribute('x', currentX.toString());\r\n        elem.slider.setAttribute('width', currentWidth.toString());\r\n        elem.leftCircleEle.setAttribute('cx', currentX.toString());\r\n        elem.rightCircleEle.setAttribute('cx', (currentX + currentWidth).toString());\r\n        elem.setArrowDirection(currentX, currentWidth, this.height);\r\n        elem.gripCircle.setAttribute('transform', 'translate(' + (currentX + currentWidth / 2 + ((this.isVertical ? 1 : -1) * padding)) +\r\n            ',' + (this.isVertical ? '10' : '5') + ') rotate(' + (this.isVertical ? '180' : '0') + ')');\r\n    };\r\n    /**\r\n     * Method to get default values\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ScrollBar.prototype.getDefaults = function () {\r\n        var axis = this.axis;\r\n        var circleRadius = 8;\r\n        var padding = 5;\r\n        var gripWidth = 14;\r\n        var minThumbWidth = circleRadius * 2 + padding * 2 + gripWidth;\r\n        if (this.axis.scrollbarSettings.enable) {\r\n            this.isLazyLoad = true;\r\n            this.getLazyDefaults(axis);\r\n        }\r\n        this.isVertical = axis.orientation === 'Vertical';\r\n        this.zoomFactor = this.isLazyLoad ? this.zoomFactor : axis.zoomFactor;\r\n        this.zoomPosition = this.isLazyLoad ? this.zoomPosition : axis.zoomPosition;\r\n        var currentWidth = this.zoomFactor * (this.isVertical ? axis.rect.height : axis.rect.width);\r\n        currentWidth = currentWidth > minThumbWidth ? currentWidth : minThumbWidth;\r\n        this.scrollX = axis.rect.x;\r\n        this.scrollY = axis.rect.y;\r\n        this.width = this.isVertical ? axis.rect.height : axis.rect.width;\r\n        this.height = 16;\r\n        var currentX = this.zoomPosition * (this.isVertical ? axis.rect.height : this.width);\r\n        var minThumbX = (this.width - minThumbWidth - circleRadius);\r\n        this.scrollElements.thumbRectX = currentX > minThumbX ? minThumbX : currentX < circleRadius ? circleRadius : currentX;\r\n        this.scrollElements.thumbRectWidth = ((currentWidth + this.scrollElements.thumbRectX) < this.width - (circleRadius * 2))\r\n            ? currentWidth : this.width - this.scrollElements.thumbRectX - circleRadius;\r\n    };\r\n    /**\r\n     * Lazy load default values\r\n     *\r\n     * @param axis\r\n     */\r\n    ScrollBar.prototype.getLazyDefaults = function (axis) {\r\n        var start;\r\n        var end;\r\n        var valueType = axis.valueType;\r\n        var scrollbarSettings = axis.scrollbarSettings;\r\n        var range = axis.scrollbarSettings.range;\r\n        var visibleRange = axis.visibleRange;\r\n        var pointsLength = axis.scrollbarSettings.pointsLength;\r\n        this.valueType = valueType = (!scrollbarSettings.range.minimum || !scrollbarSettings.range.maximum) &&\r\n            scrollbarSettings.pointsLength ? 'Double' : valueType;\r\n        var option = {\r\n            skeleton: 'full',\r\n            type: 'dateTime'\r\n        };\r\n        var dateParser = this.component.intl.getDateParser(option);\r\n        var dateFormatter = this.component.intl.getDateFormat(option);\r\n        switch (valueType) {\r\n            case 'Double':\r\n            case 'Category':\r\n            case 'Logarithmic':\r\n                start = range.minimum ? range.minimum : pointsLength ? 0 : visibleRange.min;\r\n                end = range.maximum ? range.maximum : pointsLength ? (pointsLength - 1) : visibleRange.max;\r\n                break;\r\n            case 'DateTime':\r\n            case 'DateTimeCategory':\r\n                start = range.minimum ? Date.parse(dateParser(dateFormatter(range.minimum))) : visibleRange.min;\r\n                end = range.maximum ? Date.parse(dateParser(dateFormatter(range.maximum))) : visibleRange.max;\r\n                break;\r\n        }\r\n        start = Math.min(start, visibleRange.min);\r\n        end = Math.max(end, visibleRange.max);\r\n        var zoomFactor = (visibleRange.max - visibleRange.min) / (end - start);\r\n        var zoomPosition = (visibleRange.min - start) / (end - start);\r\n        this.zoomFactor = range.minimum || range.maximum ? zoomFactor : (this.axis.maxPointLength / axis.scrollbarSettings.pointsLength);\r\n        this.zoomPosition = range.minimum || range.maximum ? zoomPosition : axis.zoomPosition;\r\n        this.scrollRange.min = start;\r\n        this.scrollRange.max = end;\r\n        this.scrollRange.delta = end - start;\r\n        this.previousStart = visibleRange.min;\r\n        this.previousEnd = visibleRange.max;\r\n    };\r\n    /**\r\n     * Method to get log range\r\n     *\r\n     * @param axis\r\n     */\r\n    ScrollBar.prototype.getLogRange = function (axis) {\r\n        var range = axis.scrollbarSettings.range;\r\n        var start = logBase(range.minimum, axis.logBase);\r\n        var end = logBase(range.maximum, axis.logBase);\r\n        start = isFinite(start) ? start : range.minimum;\r\n        end = isFinite(start) ? end : range.maximum;\r\n        return { minimum: Math.floor(start / 1), maximum: Math.ceil(end / 1) };\r\n    };\r\n    /**\r\n     * Method for injecting scrollbar module\r\n     *\r\n     * @param axis\r\n     * @param component\r\n     */\r\n    ScrollBar.prototype.injectTo = function (axis, component) {\r\n        axis.zoomingScrollBar = new ScrollBar(component, axis);\r\n    };\r\n    /**\r\n     * Method to destroy scrollbar\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ScrollBar.prototype.destroy = function () {\r\n        var _this = this;\r\n        if (this.axes) {\r\n            this.axes.map(function (axis) {\r\n                axis.zoomingScrollBar.destroy();\r\n            });\r\n        }\r\n        else {\r\n            this.elements.map(function (element) {\r\n                _this.unWireEvents(element);\r\n                remove(element.firstChild);\r\n            });\r\n            this.elements = [];\r\n        }\r\n    };\r\n    /**\r\n     * Method to get scrollbar module name\r\n     *\r\n     * @returns {string}\r\n     */\r\n    ScrollBar.prototype.getModuleName = function () {\r\n        return 'ScrollBar';\r\n    };\r\n    ScrollBar.prototype.getArgs = function (eventName, range, zoomPosition, zoomFactor, currentRanges) {\r\n        var scrollArgs = {\r\n            axis: (this.component.isBlazor ? {} : this.axis),\r\n            name: eventName,\r\n            range: this.axis.visibleRange,\r\n            zoomFactor: this.axis.zoomFactor,\r\n            zoomPosition: this.axis.zoomPosition,\r\n            previousRange: range,\r\n            previousZoomFactor: zoomFactor,\r\n            previousZoomPosition: zoomPosition,\r\n            currentRange: currentRanges\r\n        };\r\n        return scrollArgs;\r\n    };\r\n    return ScrollBar;\r\n}());\r\nexport { ScrollBar };\r\n"]},"metadata":{},"sourceType":"module"}