{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\amase\\\\Desktop\\\\open_dsa\\\\openDSA_dashboard\\\\project\\\\src\\\\components\\\\Charts\\\\IRT.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport Plot from 'react-plotly.js';\nimport { create, all } from 'mathjs';\nimport Papa from 'papaparse';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst math = create(all);\n\nfunction IRT() {\n  _s();\n\n  const [result, setResult] = useState(null);\n  const [plotData, setPlotData] = useState({\n    icc: {\n      x: [],\n      y: []\n    },\n    tcc: {\n      x: [],\n      y: []\n    }\n  });\n  const [selectedExercise, setSelectedExercise] = useState(0);\n  useEffect(() => {\n    const data = 'attemps_test.csv'; // Replace this with the actual file name\n\n    axios.post(`http://localhost:4000/estimate/${data}`).then(response => {\n      var _response$data$Abilit, _response$data$Discri, _response$data$Diffic;\n\n      const x = (_response$data$Abilit = response.data.Ability) !== null && _response$data$Abilit !== void 0 ? _response$data$Abilit : [];\n      const a = (_response$data$Discri = response.data.Discrimination) !== null && _response$data$Discri !== void 0 ? _response$data$Discri : []; // use the first element for all items\n\n      const b = (_response$data$Diffic = response.data.Difficulty) !== null && _response$data$Diffic !== void 0 ? _response$data$Diffic : [];\n      console.log(x, a[0], b[0]);\n\n      const sigmoid = (x, a, b) => {\n        const denominator = 1 + Math.exp(-a * (x - b));\n        return denominator === 0 ? NaN : 1 / denominator;\n      };\n\n      const y = x.map(val => sigmoid(val, a[18], b[18]));\n      console.log(y);\n      const sortedData = x.map((value, index) => [value, y[index]]).sort((a, b) => a[0] - b[0]);\n      const sortedX = sortedData.map(pair => pair[0]);\n      const sortedY = sortedData.map(pair => pair[1]); // Calculate mean discrimination and difficulty for all exercises\n\n      const meanA = math.mean(response.data.Discrimination);\n      const meanB = math.mean(response.data.Difficulty); // Calculate item response probabilities for a range of ability values\n\n      const minAbility = Math.min(...response.data.Ability);\n      const maxAbility = Math.max(...response.data.Ability);\n      const range = maxAbility - minAbility;\n      const step = range / 100;\n      const abilityValues = math.range(minAbility, maxAbility, step).toArray();\n      const y2 = abilityValues.map(val => sigmoid(val, meanA, meanB)); // Plot the test characteristic curve\n\n      setPlotData({\n        icc: { ...plotData.icc,\n          [selectedExercise]: {\n            x: sortedX,\n            y: sortedY\n          }\n        },\n        tcc: { ...plotData.tcc,\n          [selectedExercise]: {\n            x: abilityValues,\n            y: y2\n          }\n        }\n      });\n    }).catch(error => {\n      console.error(error);\n    });\n  }, [selectedExercise]);\n\n  const handleExerciseChange = event => {\n    setSelectedExercise(event.target.value);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"select\", {\n      value: selectedExercise,\n      onChange: handleExerciseChange,\n      children: Object.keys(plotData.icc).map((exercise, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n        value: exercise,\n        children: [\"Exercise \", index + 1]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 5\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Item Response Curve\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Plot, {\n          data: [{\n            x: plotData.icc[selectedExercise].x,\n            y: plotData.icc[selectedExercise].y,\n            type: 'scatter',\n            mode: 'lines+markers',\n            line: {\n              color: 'black'\n            },\n            marker: {\n              symbol: 'circle',\n              size: 8\n            }\n          }],\n          layout: {\n            width: 550,\n            height: 600,\n            title: 'IRT Model - Item Response Curve',\n            xaxis: {\n              title: 'Latent Trait'\n            },\n            yaxis: {\n              title: 'Item Response'\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Test Characteristic Curve\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Plot, {\n          data: [{\n            x: plotData.tcc.x,\n            y: plotData.tcc.y,\n            type: 'scatter',\n            mode: 'lines',\n            line: {\n              color: 'black'\n            },\n            marker: {\n              symbol: 'circle',\n              size: 8\n            }\n          }],\n          layout: {\n            width: 550,\n            height: 600,\n            title: 'IRT Model - Test Characteristic Curve'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 3\n  }, this);\n}\n\n_s(IRT, \"OpMgKifRwu+/FLfsC2RlKrKJ9yQ=\");\n\n_c = IRT;\nexport default IRT;\n\nvar _c;\n\n$RefreshReg$(_c, \"IRT\");","map":{"version":3,"sources":["C:/Users/amase/Desktop/open_dsa/openDSA_dashboard/project/src/components/Charts/IRT.jsx"],"names":["React","useState","axios","Plot","create","all","Papa","math","IRT","result","setResult","plotData","setPlotData","icc","x","y","tcc","selectedExercise","setSelectedExercise","useEffect","data","post","then","response","Ability","a","Discrimination","b","Difficulty","console","log","sigmoid","denominator","Math","exp","NaN","map","val","sortedData","value","index","sort","sortedX","pair","sortedY","meanA","mean","meanB","minAbility","min","maxAbility","max","range","step","abilityValues","toArray","y2","catch","error","handleExerciseChange","event","target","Object","keys","exercise","display","flex","type","mode","line","color","marker","symbol","size","width","height","title","xaxis","yaxis"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport Plot from 'react-plotly.js';\r\nimport { create, all } from 'mathjs';\r\nimport Papa from 'papaparse';\r\n\r\nconst math = create(all)\r\n\r\nfunction IRT() {\r\n  const [result, setResult] = useState(null);\r\n  const [plotData, setPlotData] = useState({ icc: { x: [], y: [] }, tcc: { x: [], y: [] }});\r\n  const [selectedExercise, setSelectedExercise] = useState(0); \r\n\r\n \r\n  useEffect(() => {\r\n    const data = 'attemps_test.csv'; // Replace this with the actual file name\r\n    axios\r\n      .post(`http://localhost:4000/estimate/${data}`)\r\n      .then((response) => {\r\n        const x = response.data.Ability ?? [];\r\n        const a = response.data.Discrimination ?? []; // use the first element for all items\r\n        const b = response.data.Difficulty ?? [];\r\n        console.log(x, a[0], b[0]);\r\n        const sigmoid = (x, a, b) => {\r\n          const denominator = 1 + Math.exp(-a * (x - b));\r\n          return denominator === 0 ? NaN : 1 / denominator;\r\n        };\r\n        const y = x.map((val) => sigmoid(val, a[18], b[18]));\r\n        console.log(y);\r\n        const sortedData = x\r\n          .map((value, index) => [value, y[index]])\r\n          .sort((a, b) => a[0] - b[0]);\r\n        const sortedX = sortedData.map((pair) => pair[0]);\r\n        const sortedY = sortedData.map((pair) => pair[1]);\r\n        // Calculate mean discrimination and difficulty for all exercises\r\n        const meanA = math.mean(response.data.Discrimination);\r\n        const meanB = math.mean(response.data.Difficulty);\r\n  \r\n        // Calculate item response probabilities for a range of ability values\r\n        const minAbility = Math.min(...response.data.Ability);\r\n        const maxAbility = Math.max(...response.data.Ability);\r\n        const range = maxAbility - minAbility;\r\n        const step = range / 100;\r\n        const abilityValues = math.range(minAbility, maxAbility, step).toArray();\r\n        const y2 = abilityValues.map((val) => sigmoid(val, meanA, meanB));\r\n  \r\n        // Plot the test characteristic curve\r\n        setPlotData({\r\n          icc: { ...plotData.icc, [selectedExercise]: { x: sortedX, y: sortedY } },\r\n          tcc: { ...plotData.tcc, [selectedExercise]: { x: abilityValues, y: y2 } },\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        console.error(error);\r\n      });\r\n  }, [selectedExercise]);\r\n          const handleExerciseChange = (event) => {\r\n            setSelectedExercise(event.target.value);\r\n          };\r\n     \r\n return (\r\n  <div>\r\n    <select value={selectedExercise} onChange={handleExerciseChange}>\r\n  {Object.keys(plotData.icc).map((exercise, index) => (\r\n    <option key={index} value={exercise}>\r\n      Exercise {index + 1}\r\n    </option>\r\n  ))}\r\n</select>\r\n    <div style={{ display: 'flex' }}>\r\n      <div style={{ flex: 1 }}>\r\n        <div>Item Response Curve</div>\r\n        <Plot\r\n          data={[\r\n            {\r\n              x: plotData.icc[selectedExercise].x,\r\n              y: plotData.icc[selectedExercise].y,\r\n              type: 'scatter',\r\n              mode: 'lines+markers',\r\n              line: { color: 'black' },\r\n              marker: { symbol: 'circle', size: 8 }\r\n            }\r\n          ]}\r\n          layout={{\r\n            width: 550,\r\n            height: 600,\r\n            title: 'IRT Model - Item Response Curve',\r\n            xaxis: { title: 'Latent Trait' },\r\n            yaxis: { title: 'Item Response' }\r\n          }}\r\n        />\r\n      </div>\r\n      <div style={{ flex: 1 }}>\r\n        <div>Test Characteristic Curve</div>\r\n        <Plot\r\n          data={[\r\n            {\r\n              x: plotData.tcc.x,\r\n              y: plotData.tcc.y,\r\n              type: 'scatter',\r\n              mode: 'lines',\r\n              line: { color: 'black' },\r\n              marker: { symbol: 'circle', size: 8 }\r\n            },\r\n          ]}\r\n          layout={{ width: 550, height: 600, title: 'IRT Model - Test Characteristic Curve' }}\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n);\r\n\r\n}\r\n\r\nexport default IRT;\r\n"]},"metadata":{},"sourceType":"module"}